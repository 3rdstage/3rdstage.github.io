<!doctype html>
<html lang="en">
  <head>
    <!-- Initially brought from 'https://github.com/twbs/bootstrap/blob/v4.0.0-beta.2/_includes/header.html' -->

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Jekyll v3.6.2">

<title>Simple Patterns and Typical Samples &middot; 3rdstage's Wiki</title>

<!-- Bootstrap core CSS -->
<!-- Refer http://getbootstrap.com/docs/4.0/getting-started/introduction/#starter-template -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

<!-- Documentation extras -->
<!--

<link href="/assets/css/docs.min.css" rel="stylesheet">
 -->

<!--
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-146052-10', 'getbootstrap.com');
  ga('send', 'pageview');
</script>
 -->
  </head>
  <body>
    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2">
          <ul>


<li><a href='/computer-programming.html'>Computer Programming</a></li>



<li><a href='/framworks-libraries.html'>Platforms, Frameworks, Libraries and Tools</a></li>



<li><a href='/'>Index</a></li>



<li><a href='/on-linux-and-unix.html'>On Linux and UNIX</a></li>



<li><a href='/patterns-and-samples.html'>Simple Patterns and Typical Samples</a></li>



<li><a href='/assets/css/style.css'></a></li>


</ul>
        </div>

        <main class="col-12 col-md-9 col-xl-8" role="main">
        <h2 id="java">Java</h2>

<h3 id="jvm-startup-command-line">JVM startup command-line</h3>

<ul>
  <li>References
    <ul>
      <li><a href="http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html">Java HotSpot VM Options</a></li>
      <li><a href="http://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#CBBIJCHG">JVM 8 Command-line Options</a></li>
      <li><a href="http://www.oracle.com/technetwork/java/javase/index-137495.html">Troubleshooting Guide for Java SE 6 with HotSpot VM</a> (Nov. 2008)</li>
    </ul>
  </li>
</ul>

<pre><code class="language-dos">:: Starts stand-alone MyApp server
::
:: @author Sangmoon Oh
:: @since 2015-01-01

@ echo off
setLocal enableDelayedExpansion

if not exist "%JAVA_HOME%\bin\java.exe" (
  echo.
  echo Fail to run
  echo JDK 1.6 ^(32-bit^) or higher and 'JAVA_HOME' environment variable for it are required.
  goto :END
)
echo JAVA_HOME = %JAVA_HOME%

if exist "%JAVA_HOME%\release" (
  for /F "tokens=2 delims==" %%x in ('findstr "JAVA_VERSION" "%JAVA_HOME%\release"') do set JAVA_VERSION=%%~x
  for /F "tokens=2 delims==" %%x in ('findstr "OS_ARCH" "%JAVA_HOME%\release"') do set OS_ARCH=%%~x

  echo JAVA_VERSION = !JAVA_VERSION!
  echo OS_ARCH = !OS_ARCH!

  if !OS_ARCH! equ amd64 (
    echo.
    echo The provided JDK is 64-bit. This application requires 32-bit JDK.
    goto :END
  )
)

if not exist "%MYAPP_HOME%" (
  echo.
  echo 'MYAPP_HOME' environment variable is not set or has inappropriate value.
  goto :END
)
if not exist "%OPENCV_DIR%" (
  echo.
  echo 'OPENCV_DIR' environment variable is not set or has inappropriate value.
  goto :END
)
echo MYAPP_HOME = %MYAPP_HOME%
echo OPENCV_DIR = %OPENCV_DIR%

set CLASSPATH=%MYAPP_HOME%\conf;%MYAPP_HOME%\lib\*

:: For more on JVM options, refer http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html
set JVM_ARGS=-server -Xms256m -Xmx256m -XX:MaxPermSize=256M
set JVM_ARGS=%JVM_ARGS% -XX:NewRatio=2 -XX:SurvivorRatio=8
if %JAVA_VERSION:~0,3% equ 1.7 (
  set JVM_ARGS=%JVM_ARGS% -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:G1ReservePercent=10
) else (
  set JVM_ARGS=%JVM_ARGS%  -XX:+UseParallelGC -XX:+UseParallelOldGC -XX:+UseNUMA
)
set JVM_ARGS=%JVM_ARGS% -verbose:gc -Xloggc:"%MYAPP_HOME%\log\jvm\gc_%%t.log" -XX:+PrintGCDateStamps -XX:+PrintGCDetails
set JVM_ARGS=%JVM_ARGS% -XX:NativeMemoryTracking=detail
set JVM_ARGS=%JVM_ARGS% -XX:+UnlockDiagnosticVMOptions -XX:+PrintNMTStatistics
set JVM_ARGS=%JVM_ARGS% -XX:+DisableExplicitGC
set JVM_ARGS=%JVM_ARGS% -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath="%MYAPP_HOME%\jvm"
set JVM_ARGS=%JVM_ARGS% -XX:ErrorFile="%MYAPP_HOME%\jvm\hs_err_pid%%p.log"
set JVM_ARGS=%JVM_ARGS% -Djava.library.path="%OPENCV_DIR%\..\..\java\x86"
set JVM_ARGS=%JVM_ARGS% -Dfile.encoding=UTF-8
set JVM_ARGS=%JVM_ARGS% -Duser.timezone=Asia/Seoul
rem set JVM_ARGS=%JVM_ARGS% -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000
set JVM_ARGS=%JVM_ARGS% -Dcom.sun.management.jmxremote.port=3333
set JVM_ARGS=%JVM_ARGS% -Dcom.sun.management.jmxremote.ssl=false
set JVM_ARGS=%JVM_ARGS% -Dcom.sun.management.jmxremote.authenticate=false
set JVM_ARGS=%JVM_ARGS% -Dlog.level.root=TRACE
set JVM_ARGS=%JVM_ARGS% -Dlog.level.spring=DEBUG
set JVM_ARGS=%JVM_ARGS% -Dlog.level.mybatis=DEBUG
set JVM_ARGS=%JVM_ARGS% -Dlog.timezone=Asia/Seoul

echo ************************************************
echo '"%JAVA_HOME%\bin\java" %JVM_ARGS% -cp "%CLASSPATH%" myapp.StandaloneServer'
echo ************************************************

"%JAVA_HOME%\bin\java" %JVM_ARGS% -cp "%CLASSPATH%" myapp.StandaloneServer

:END
endLocal
</code></pre>

<h3 id="waiting-enter-key-press-on-the-console">Waiting <strong><code class="highlighter-rouge">Enter</code></strong> key press on the console</h3>

<p>Using <strong><code class="highlighter-rouge">java.io.InputStream.read()</code></strong>, <strong><code class="highlighter-rouge">java.util.Scanner.hasNextLine()</code></strong>, or <strong><code class="highlighter-rouge">java.util.Scanner.nexLine()</code></strong> may make the code simple, but they are much bad on behalf of performance in concurrent environment or debugging situation. To make other thread or debugging session unaffected as possible, it is better to use <strong><code class="highlighter-rouge">java.io.InputStream.available()</code></strong> with loop.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">...</span>
   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Press [Enter] key to start."</span><span class="o">);</span>
   <span class="kt">int</span> <span class="n">cnt</span><span class="o">;</span>
   <span class="k">while</span><span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">available</span><span class="o">())</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">){</span>
      <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
   <span class="o">}</span>
   <span class="k">while</span><span class="o">(</span><span class="n">cnt</span><span class="o">--</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
   <span class="o">...</span>

   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Press [Enter] key to proceed."</span><span class="o">);</span>
   <span class="k">while</span><span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">available</span><span class="o">())</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">){</span>
      <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
   <span class="o">}</span>
   <span class="k">while</span><span class="o">(</span><span class="n">cnt</span><span class="o">--</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
   <span class="o">...</span>

   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Press [Enter] key to end."</span><span class="o">);</span>
   <span class="k">while</span><span class="o">((</span><span class="n">cnt</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">available</span><span class="o">())</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">){</span>
      <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">);</span>
   <span class="o">}</span>
   <span class="k">while</span><span class="o">(</span><span class="n">cnt</span><span class="o">--</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="n">System</span><span class="o">.</span><span class="na">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
</code></pre></div></div>

<p>You should call the <code class="highlighter-rouge">available()</code> in the loop, because it is non blocking. The keys pressed before <code class="highlighter-rouge">Enter</code> should be consumed before the next wait.</p>

<ul>
  <li>Readings
    <ul>
      <li>[<a href="http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available">http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available</a>() API of <code class="highlighter-rouge">java.io.InputStream.available()</code>]</li>
    </ul>
  </li>
</ul>

<h3 id="wait-notify-and-notifyall"><strong><code class="highlighter-rouge">wait</code></strong>, <strong><code class="highlighter-rouge">notify</code></strong> and <strong><code class="highlighter-rouge">notifyAll</code></strong></h3>

<p>The thread should own the monitor of the instance to call <code class="highlighter-rouge">wait</code>, <code class="highlighter-rouge">notify</code> or <code class="highlighter-rouge">notifyAll</code> before the call. So, the call of these basic method should be <strong>always located inside <code class="highlighter-rouge">synchronized</code> block</strong>.</p>

<p>A thread can wake up by unexpected or unpredictable reason, so the call of <code class="highlighter-rouge">wait</code> and the logic to process after wake-up should be guarded by loop.</p>

<p>So, the typical code block for calling <code class="highlighter-rouge">wait</code> is</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">...</span>
   <span class="kd">final</span> <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">;</span>
   <span class="o">...</span>

   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">while</span> <span class="o">(&lt;</span><span class="n">condition</span> <span class="n">does</span> <span class="n">not</span> <span class="n">hold</span><span class="o">&gt;)</span>
             <span class="n">obj</span><span class="o">.</span><span class="na">wait</span><span class="o">(</span><span class="n">timeout</span><span class="o">);</span>
         <span class="o">...</span> <span class="c1">// Perform action appropriate to condition</span>
   <span class="o">}</span>

   <span class="o">...</span>
</code></pre></div></div>

<p>And for <code class="highlighter-rouge">notifyAll</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">...</span>
   <span class="kd">final</span> <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Object</span><span class="o">;</span>
   <span class="o">...</span>

   <span class="kd">synchronized</span> <span class="o">(</span><span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">//Perform some action to release the hold condition</span>
      <span class="n">obj</span><span class="o">.</span><span class="na">notifyAll</span><span class="o">();</span>
      <span class="o">...</span>
   <span class="o">}</span>

   <span class="o">...</span>
</code></pre></div></div>

<h3 id="using-lock-class-of-javautilconcurrentlocks-package">Using <strong><code class="highlighter-rouge">Lock</code></strong> class of <strong><code class="highlighter-rouge">java.util.concurrent.locks</code></strong> package</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 <span class="kd">class</span> <span class="nc">X</span> <span class="o">{</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="n">ReentrantLock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReentrantLock</span><span class="o">();</span>
   <span class="c1">// ...</span>

   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">m</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>  <span class="c1">// block until condition holds</span>
     <span class="k">try</span> <span class="o">{</span>
       <span class="c1">// ... method body</span>
     <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
       <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">()</span>
     <span class="o">}</span>
   <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div></div>

<h3 id="controlling-start-up-and-detecting-end-of-thread-executions-using-countdownlatch">Controlling start-up and detecting end of thread executions using <code class="highlighter-rouge">CountDownLatch</code></h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Control</span><span class="o">{</span>

   <span class="kd">private</span> <span class="kt">int</span> <span class="n">numOfTasks</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">CountDownLatch</span> <span class="n">startCntDwn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CountDownLatch</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
   <span class="kd">private</span> <span class="n">CountDownLatch</span> <span class="n">endCntDwn</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CountDownLatch</span><span class="o">(</span><span class="n">numOfTasks</span><span class="o">);</span>

   <span class="c1">//...</span>

   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">execute</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>
      <span class="n">ExecutorService</span> <span class="n">executor</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">numOfTasks</span><span class="o">);</span>

      <span class="c1">//conditions for the tasks</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">Condition</span><span class="o">&gt;</span> <span class="n">conditions</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Condition</span><span class="o">&gt;(</span><span class="n">numOfTasks</span><span class="o">);</span>
      <span class="c1">//tasks</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">Task</span><span class="o">&gt;</span> <span class="n">tasks</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Task</span><span class="o">&gt;(</span><span class="n">numOfTasks</span><span class="o">);</span>
      <span class="c1">//futures to get results</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&gt;&gt;</span> <span class="n">futures</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&gt;&gt;(</span><span class="n">numOfTasks</span><span class="o">);</span>
      <span class="c1">//results of tasks</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&gt;(</span><span class="n">numOfTasks</span><span class="o">);</span>

      <span class="n">Condition</span> <span class="n">cndt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numOfTasks</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
         <span class="n">cndt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Condition</span><span class="o">();</span>
         <span class="c1">//setup Condition object for each task</span>
         <span class="n">tasks</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Task</span><span class="o">(</span><span class="n">cndt</span><span class="o">,</span> <span class="n">startCntDwn</span><span class="o">,</span> <span class="n">endCntDwn</span><span class="o">));</span>
      <span class="o">}</span>

      <span class="k">for</span><span class="o">(</span><span class="n">Task</span> <span class="nl">task:</span> <span class="n">tasks</span><span class="o">){</span>
         <span class="n">futures</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">executor</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="n">task</span><span class="o">));</span>
      <span class="o">}</span>

      <span class="n">startCntDwn</span><span class="o">.</span><span class="na">countDown</span><span class="o">();</span>
      <span class="n">endCntDwn</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>

      <span class="k">for</span><span class="o">(</span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">:</span> <span class="n">futures</span><span class="o">){</span>
         <span class="n">results</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">future</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
      <span class="o">}</span>

      <span class="c1">//manipulating results</span>

      <span class="n">executor</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getNumberOfTasks</span><span class="o">(){</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">numOfTasks</span><span class="o">;</span> <span class="o">}</span>

   <span class="kd">public</span> <span class="kt">long</span> <span class="nf">getNumberOfRunningTasks</span><span class="o">(){</span>
      <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">startCntDwn</span><span class="o">.</span><span class="na">getCount</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">else</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">endCntDwn</span><span class="o">.</span><span class="na">getCount</span><span class="o">();</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Task</span> <span class="kd">implements</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">Result</span><span class="o">&gt;{</span>

   <span class="kd">private</span> <span class="n">CountDownLatch</span> <span class="n">startCntDwn</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">CountDownLatch</span> <span class="n">endCntDwn</span><span class="o">;</span>

   <span class="c1">//other fields to do task.</span>

   <span class="kd">public</span> <span class="nf">Task</span><span class="o">(</span><span class="n">Condition</span> <span class="n">condition</span><span class="o">,</span> <span class="n">CountDownLatch</span> <span class="n">start</span><span class="o">,</span> <span class="n">CountDownLatch</span> <span class="n">end</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">startCntDwn</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">endCntDwn</span> <span class="o">=</span> <span class="n">end</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="n">Result</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>
      <span class="n">Result</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">startCntDwn</span><span class="o">.</span><span class="na">await</span><span class="o">();</span>

      <span class="c1">//do its own task and create result;</span>

      <span class="k">this</span><span class="o">.</span><span class="na">endCntDwn</span><span class="o">.</span><span class="na">countDown</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Condition</span><span class="o">{</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Result</span><span class="o">{</span>

<span class="o">}</span>
</code></pre></div></div>

<h3 id="lazy-initialization-of-field">Lazy initialization of field</h3>

<h4 id="lazy-initialization-of-instance-field-using-double-checked-locking">Lazy initialization of instance field using double-checked locking</h4>

<p>Prior to JDK 1.5, double-checked locking is not safe with Java because the reordering of object publication and initialization can not be controlled. But as of JDK 1.5, volatile is specified not to be reordered, so it become possible to use safely double-checked locking with volatile field.</p>

<p>A typical code would be like this :</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ThreadSafe</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Worker</span><span class="o">{</span>

   <span class="kd">private</span> <span class="kd">volatile</span> <span class="n">Resource</span> <span class="n">resource</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//creating resource is expensive</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">lock</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>  <span class="c1">//avoid String intern.</span>

   <span class="nd">@GuardedBy</span><span class="o">(</span><span class="s">"lock"</span><span class="o">)</span>
   <span class="kd">public</span> <span class="n">Resource</span> <span class="nf">getResource</span><span class="o">(){</span>
      <span class="n">Resource</span> <span class="n">r</span> <span class="o">=</span> <span class="n">resource</span><span class="o">;</span>
      <span class="k">if</span><span class="o">(</span><span class="n">r</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//first check</span>
         <span class="kd">synchronized</span><span class="o">(</span><span class="n">lock</span><span class="o">){</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">resource</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">r</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//second check</span>
               <span class="n">resource</span> <span class="o">=</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Resource</span><span class="o">();</span>
            <span class="o">}</span>
         <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">r</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In above sample code, note that the <code class="highlighter-rouge">lock</code> object is define to be <code class="highlighter-rouge">final</code>, because reference on non final field can change any time. The above code can be enhanced using <code class="highlighter-rouge">java.util.concurrent.locks.Lock</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@ThreadSafe</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Worker</span><span class="o">{</span>

   <span class="kd">private</span> <span class="kd">volatile</span> <span class="n">Resource</span> <span class="n">resource</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">//creating resource is expensive</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="n">Lock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReentrantLock</span><span class="o">();</span>

   <span class="nd">@GuardedBy</span><span class="o">(</span><span class="s">"lock"</span><span class="o">)</span>
   <span class="kd">public</span> <span class="n">Resource</span> <span class="nf">getResource</span><span class="o">(){</span>
      <span class="n">Resource</span> <span class="n">r</span> <span class="o">=</span> <span class="n">resource</span><span class="o">;</span>
      <span class="k">if</span><span class="o">(</span><span class="n">r</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//first check</span>
         <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">()</span>
         <span class="k">try</span><span class="o">{</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">resource</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">r</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//second check</span>
               <span class="n">resource</span> <span class="o">=</span> <span class="n">r</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Resource</span><span class="o">();</span>
            <span class="o">}</span>
         <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
            <span class="c1">//write log and re-throw the exception</span>
         <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
        <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
     <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="n">r</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The following is a simple Spring container locator class.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Locates Spring containers.
 * &lt;p&gt;
 * This class can be used to access Spring container from where DI is not possible.
 * &lt;p&gt;
 * Note that this class is thread-safe and caches the Spring containers
 *
 * @version 1.0, 2015-08-13, Sangmoon Oh, Initial version
 * @author Sangmoon Oh
 * @since 2015-08-13
 */</span>
<span class="nd">@Singleton</span>
<span class="nd">@ThreadSafe</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpringContainerLocator</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">SpringContainerLocator</span> <span class="n">instance</span><span class="o">;</span>

  <span class="kd">private</span> <span class="kd">volatile</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="n">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">ConfigurableApplicationContext</span><span class="o">&gt;();</span>

  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Lock</span> <span class="n">cacheLock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReentrantLock</span><span class="o">();</span>

  <span class="cm">/**
   * Test purpose filed to confirm concurrency in hight congestion.
   */</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">AtomicInteger</span> <span class="n">count</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AtomicInteger</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

  <span class="cm">/**
   * Gets the count of Spring container loadings.
   * This method is test only purpose.
   */</span>
  <span class="kd">protected</span> <span class="kt">int</span> <span class="nf">getCount</span><span class="o">(){</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">.</span><span class="na">intValue</span><span class="o">();</span> <span class="o">}</span>

  <span class="kd">static</span><span class="o">{</span>
    <span class="c1">//No need on lazy initialization.</span>
    <span class="k">if</span><span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SpringContainerLocator</span><span class="o">();</span> <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="nf">SpringContainerLocator</span><span class="o">(){}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">SpringContainerLocator</span> <span class="nf">getSingleton</span><span class="o">(){</span> <span class="k">return</span> <span class="n">instance</span><span class="o">;</span> <span class="o">}</span>

  <span class="cm">/**
   * Gets the Spring container configured by the specified configuration file.
   * &lt;p&gt;
   * Currently, the location of Spring configuration file should be
   * &lt;emp&gt;classpath relative&lt;/emp&gt;.
   * &lt;p&gt;
   * The loaded Spring container will be registered shutdown hook, so you don't need to do in your code.
   *
   * @param configLoc The location of configuration file on classpath. such as 'foo/bar/spring.xml'
   * @return The Spring container configured by the specified configLoc.
   */</span>
  <span class="nd">@GuardedBy</span><span class="o">(</span><span class="s">"cacheLock"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">ApplicationContext</span> <span class="nf">getSpringContainer</span><span class="o">(</span><span class="nd">@NotBlank</span> <span class="n">String</span> <span class="n">configLoc</span><span class="o">){</span>
    <span class="n">Validate</span><span class="o">.</span><span class="na">isTrue</span><span class="o">(</span><span class="n">StringUtils</span><span class="o">.</span><span class="na">isNotBlank</span><span class="o">(</span><span class="n">configLoc</span><span class="o">),</span> <span class="s">"The location of configuration should be specified."</span><span class="o">);</span>
    <span class="n">ConfigurableApplicationContext</span> <span class="n">container</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">configLoc</span><span class="o">);</span>

    <span class="k">if</span><span class="o">(</span><span class="n">container</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//first check</span>
      <span class="n">cacheLock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>
      <span class="k">try</span><span class="o">{</span>
        <span class="n">container</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">configLoc</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">container</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="c1">//send check</span>
          <span class="n">container</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ClassPathXmlApplicationContext</span><span class="o">(</span><span class="n">configLoc</span><span class="o">);</span>
          <span class="n">container</span><span class="o">.</span><span class="na">registerShutdownHook</span><span class="o">();</span>
          <span class="n">cache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">configLoc</span><span class="o">,</span> <span class="n">container</span><span class="o">);</span>
          <span class="kt">int</span> <span class="n">cnt</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">count</span><span class="o">.</span><span class="na">incrementAndGet</span><span class="o">();</span>
          <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"The {}-th loading of Spring container: {}"</span><span class="o">,</span> <span class="n">cnt</span><span class="o">,</span> <span class="n">configLoc</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
        <span class="n">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Fail to load spring container whose configuration is"</span> <span class="o">+</span> <span class="n">configLoc</span> <span class="o">+</span> <span class="s">" on classpath."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Fail to load spring container whose configuration is"</span> <span class="o">+</span> <span class="n">configLoc</span> <span class="o">+</span> <span class="s">" on classpath."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
      <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
        <span class="n">cacheLock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">container</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="lazy-initialization-of-static-field-using-initialization-on-demand-holder-class">Lazy initialization of static field using initialization on demand holder class</h4>

<p>On behalf of the characteristics of class loading and static initialization, static field can be safely lazy initialized using holder class without locking.</p>

<p>JVM load classes in lazy way and JVM run static initilizers at class initilization time which is after class loading but before the class is used by any thread. So, the static holder class having static field like the below would be lazy initialized in safe way.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Worker</span><span class="o">{</span>

   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ResourceHolder</span><span class="o">{</span>
      <span class="kd">public</span> <span class="kd">static</span> <span class="n">Resource</span> <span class="n">resource</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Resource</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="kd">static</span> <span class="n">Resource</span> <span class="nf">getResource</span><span class="o">(){</span>
      <span class="k">return</span> <span class="n">ResourceHolder</span><span class="o">.</span><span class="na">resource</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="more-readings">More readings</h4>

<ul>
  <li><a href="http://en.wikipedia.org/wiki/Double-checked_locking">Double-checked locking in Wikipedia</a></li>
  <li><a href="http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html">The “Double-Checked Locking is Broken” Declaration</a></li>
  <li><a href="http://gee.cs.oswego.edu/dl/cpj/jmm.html">http://gee.cs.oswego.edu/dl/cpj/jmm.html</a> Synchronization and the Java Memory Model] by Doug Lea</li>
  <li>“Item 71 : Use lazy initialization judiciously” of Effective Java, 2nd Ed.</li>
  <li><a href="http://javarevisited.blogspot.com/2011/04/synchronization-in-java-synchronized.html">How Synchronization works in Java ?</a> by Javin Paul</li>
</ul>

<h4 id="more-code-samples">More code samples</h4>

<h5 id="commonannotationbeanpostprocessorfindresourcemetadata-method-of-spring-framework"><code class="highlighter-rouge">CommonAnnotationBeanPostProcessor.findResourceMetadata</code> method of Spring framework</h5>

<p>The following code from Spring framework uses double-checked locking for non-volatile field.</p>

<p>Is it safe ?</p>

<p>Assuming <code class="highlighter-rouge">ConcurrentHashMap.put</code> method may not be so complicated to expose stale values to threads and the local codes inside second check block (inner if clause checking <code class="highlighter-rouge">metadata == null</code>) would not be reordered with <code class="highlighter-rouge">ConcurrentHashMap.put</code> method execution, the below code could be almost safe ?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">annotation</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommonAnnotationBeanPostProcessor</span> <span class="kd">extends</span> <span class="o">...{</span>

  <span class="o">...</span>
  <span class="kd">private</span> <span class="kd">transient</span> <span class="kd">final</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;,</span> <span class="n">InjectionMetadata</span><span class="o">&gt;</span> <span class="n">injectionMetadataCache</span> <span class="o">=</span>
  <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&lt;?&gt;,</span> <span class="n">InjectionMetadata</span><span class="o">&gt;();</span>

  <span class="o">...</span>

  <span class="kd">private</span> <span class="n">InjectionMetadata</span> <span class="nf">findResourceMetadata</span><span class="o">(</span><span class="kd">final</span> <span class="n">Class</span> <span class="n">clazz</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Quick check on the concurrent map first, with minimal locking.</span>
    <span class="n">InjectionMetadata</span> <span class="n">metadata</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">injectionMetadataCache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">metadata</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">injectionMetadataCache</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">metadata</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">injectionMetadataCache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">metadata</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="kd">final</span> <span class="n">InjectionMetadata</span> <span class="n">newMetadata</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InjectionMetadata</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span>
          <span class="n">ReflectionUtils</span><span class="o">.</span><span class="na">doWithFields</span><span class="o">(</span><span class="n">clazz</span><span class="o">,</span> <span class="k">new</span> <span class="n">ReflectionUtils</span><span class="o">.</span><span class="na">FieldCallback</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doWith</span><span class="o">(</span><span class="n">Field</span> <span class="n">field</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">if</span> <span class="o">(</span><span class="n">webServiceRefClass</span> <span class="o">!=</span> <span class="kc">null</span>
                  <span class="o">&amp;&amp;</span> <span class="n">field</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">webServiceRefClass</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">isStatic</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@WebServiceRef annotation is not supported on static fields"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">newMetadata</span><span class="o">.</span><span class="na">addInjectedField</span><span class="o">(</span><span class="k">new</span> <span class="n">WebServiceRefElement</span><span class="o">(</span><span class="n">field</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
              <span class="o">}</span>
              <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">ejbRefClass</span> <span class="o">!=</span> <span class="kc">null</span>
                  <span class="o">&amp;&amp;</span> <span class="n">field</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">ejbRefClass</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">isStatic</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@EJB annotation is not supported on static fields"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">newMetadata</span><span class="o">.</span><span class="na">addInjectedField</span><span class="o">(</span><span class="k">new</span> <span class="n">EjbRefElement</span><span class="o">(</span><span class="n">field</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
              <span class="o">}</span>
              <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">Resource</span><span class="o">.</span><span class="na">class</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">isStatic</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@Resource annotation is not supported on static fields"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(!</span><span class="n">ignoredResourceTypes</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">field</span><span class="o">.</span><span class="na">getType</span><span class="o">().</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="n">newMetadata</span><span class="o">.</span><span class="na">addInjectedField</span><span class="o">(</span><span class="k">new</span> <span class="n">ResourceElement</span><span class="o">(</span><span class="n">field</span><span class="o">,</span> <span class="kc">null</span><span class="o">));</span>
                <span class="o">}</span>
              <span class="o">}</span>
            <span class="o">}</span>
          <span class="o">});</span>
          <span class="n">ReflectionUtils</span><span class="o">.</span><span class="na">doWithMethods</span><span class="o">(</span><span class="n">clazz</span><span class="o">,</span> <span class="k">new</span> <span class="n">ReflectionUtils</span><span class="o">.</span><span class="na">MethodCallback</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doWith</span><span class="o">(</span><span class="n">Method</span> <span class="n">method</span><span class="o">)</span> <span class="o">{</span>
              <span class="k">if</span> <span class="o">(</span><span class="n">webServiceRefClass</span> <span class="o">!=</span> <span class="kc">null</span>
                  <span class="o">&amp;&amp;</span> <span class="n">method</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">webServiceRefClass</span><span class="o">)</span>
                  <span class="o">&amp;&amp;</span>
                  <span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">ClassUtils</span><span class="o">.</span><span class="na">getMostSpecificMethod</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">clazz</span><span class="o">)))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">isStatic</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@WebServiceRef annotation is not supported on static methods"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getParameterTypes</span><span class="o">().</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@WebServiceRef annotation requires a single-arg method: "</span> <span class="o">+</span> <span class="n">method</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">PropertyDescriptor</span> <span class="n">pd</span> <span class="o">=</span> <span class="n">BeanUtils</span><span class="o">.</span><span class="na">findPropertyForMethod</span><span class="o">(</span><span class="n">method</span><span class="o">);</span>
                <span class="n">newMetadata</span><span class="o">.</span><span class="na">addInjectedMethod</span><span class="o">(</span><span class="k">new</span> <span class="n">WebServiceRefElement</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">pd</span><span class="o">));</span>
              <span class="o">}</span>
              <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">ejbRefClass</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">method</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">ejbRefClass</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                  <span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">ClassUtils</span><span class="o">.</span><span class="na">getMostSpecificMethod</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">clazz</span><span class="o">)))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">isStatic</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@EJB annotation is not supported on static methods"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getParameterTypes</span><span class="o">().</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@EJB annotation requires a single-arg method: "</span> <span class="o">+</span> <span class="n">method</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">PropertyDescriptor</span> <span class="n">pd</span> <span class="o">=</span> <span class="n">BeanUtils</span><span class="o">.</span><span class="na">findPropertyForMethod</span><span class="o">(</span><span class="n">method</span><span class="o">);</span>
                <span class="n">newMetadata</span><span class="o">.</span><span class="na">addInjectedMethod</span><span class="o">(</span><span class="k">new</span> <span class="n">EjbRefElement</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">pd</span><span class="o">));</span>
              <span class="o">}</span>
              <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">isAnnotationPresent</span><span class="o">(</span><span class="n">Resource</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
                  <span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">ClassUtils</span><span class="o">.</span><span class="na">getMostSpecificMethod</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">clazz</span><span class="o">)))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">Modifier</span><span class="o">.</span><span class="na">isStatic</span><span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">getModifiers</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@Resource annotation is not supported on static methods"</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">Class</span><span class="o">[]</span> <span class="n">paramTypes</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getParameterTypes</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">paramTypes</span><span class="o">.</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                  <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"@Resource annotation requires a single-arg method: "</span> <span class="o">+</span> <span class="n">method</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(!</span><span class="n">ignoredResourceTypes</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">paramTypes</span><span class="o">[</span><span class="mi">0</span><span class="o">].</span><span class="na">getName</span><span class="o">()))</span> <span class="o">{</span>
                  <span class="n">PropertyDescriptor</span> <span class="n">pd</span> <span class="o">=</span> <span class="n">BeanUtils</span><span class="o">.</span><span class="na">findPropertyForMethod</span><span class="o">(</span><span class="n">method</span><span class="o">);</span>
                  <span class="n">newMetadata</span><span class="o">.</span><span class="na">addInjectedMethod</span><span class="o">(</span><span class="k">new</span> <span class="n">ResourceElement</span><span class="o">(</span><span class="n">method</span><span class="o">,</span> <span class="n">pd</span><span class="o">));</span>
                <span class="o">}</span>
              <span class="o">}</span>
            <span class="o">}</span>
          <span class="o">});</span>
          <span class="n">metadata</span> <span class="o">=</span> <span class="n">newMetadata</span><span class="o">;</span>
          <span class="k">this</span><span class="o">.</span><span class="na">injectionMetadataCache</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">clazz</span><span class="o">,</span> <span class="n">metadata</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">metadata</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="sample-usage-of-concurrenthashmap">Sample usage of <code class="highlighter-rouge">ConcurrentHashMap</code></h3>

<ul>
  <li>Can use <code class="highlighter-rouge">ConcurrentHashMap</code> in multi-threaded context without locking</li>
  <li>Pay attention to <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#putIfAbsent"><code class="highlighter-rouge">putIfAbsent</code></a> method.</li>
</ul>

<!-- -->

<ul>
  <li>Sample usage
    <ul>
      <li><a href="https://github.com/apache/commons-lang/blob/4777c3a5e4291af2420db57d008152c70c4a8f24/src/main/java/org/apache/commons/lang3/time/FormatCache.java#L83"><code class="highlighter-rouge">org.apache.commons.lang3.time.FormatCache</code></a></li>
      <li>In the following code, <strong>no</strong> locking is used to avoid concurrent update on cache. The update on the same key is avoided by <code class="highlighter-rouge">putIfAbsent</code> method. This type of approach that permit the concurrent trial of update is affordable ‘cause <code class="highlighter-rouge">format</code> is somewhat light-weight object. For, more heavy-weight object, it is preferable to prevent the object to cache from being created more than once, by using locking</li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">FormatCache</span><span class="o">&lt;</span><span class="n">F</span> <span class="kd">extends</span> <span class="n">Format</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">NONE</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="n">ConcurrentMap</span><span class="o">&lt;</span><span class="n">MultipartKey</span><span class="o">,</span> <span class="n">F</span><span class="o">&gt;</span> <span class="n">cInstanceCache</span>
        <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;</span><span class="n">MultipartKey</span><span class="o">,</span> <span class="n">F</span><span class="o">&gt;(</span><span class="mi">7</span><span class="o">);</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ConcurrentMap</span><span class="o">&lt;</span><span class="n">MultipartKey</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">cDateTimeInstanceCache</span>
        <span class="o">=</span> <span class="k">new</span> <span class="n">ConcurrentHashMap</span><span class="o">&lt;</span><span class="n">MultipartKey</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;(</span><span class="mi">7</span><span class="o">);</span>

    <span class="kd">public</span> <span class="n">F</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">getDateTimeInstance</span><span class="o">(</span><span class="n">DateFormat</span><span class="o">.</span><span class="na">SHORT</span><span class="o">,</span> <span class="n">DateFormat</span><span class="o">.</span><span class="na">SHORT</span><span class="o">,</span> <span class="n">TimeZone</span><span class="o">.</span><span class="na">getDefault</span><span class="o">(),</span> <span class="n">Locale</span><span class="o">.</span><span class="na">getDefault</span><span class="o">());</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">F</span> <span class="nf">getInstance</span><span class="o">(</span><span class="kd">final</span> <span class="n">String</span> <span class="n">pattern</span><span class="o">,</span> <span class="n">TimeZone</span> <span class="n">timeZone</span><span class="o">,</span> <span class="n">Locale</span> <span class="n">locale</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pattern</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">NullPointerException</span><span class="o">(</span><span class="s">"pattern must not be null"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">timeZone</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">timeZone</span> <span class="o">=</span> <span class="n">TimeZone</span><span class="o">.</span><span class="na">getDefault</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">locale</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">locale</span> <span class="o">=</span> <span class="n">Locale</span><span class="o">.</span><span class="na">getDefault</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="kd">final</span> <span class="n">MultipartKey</span> <span class="n">key</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MultipartKey</span><span class="o">(</span><span class="n">pattern</span><span class="o">,</span> <span class="n">timeZone</span><span class="o">,</span> <span class="n">locale</span><span class="o">);</span>
        <span class="n">F</span> <span class="n">format</span> <span class="o">=</span> <span class="n">cInstanceCache</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">format</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">format</span> <span class="o">=</span> <span class="n">createInstance</span><span class="o">(</span><span class="n">pattern</span><span class="o">,</span> <span class="n">timeZone</span><span class="o">,</span> <span class="n">locale</span><span class="o">);</span>
            <span class="kd">final</span> <span class="n">F</span> <span class="n">previousValue</span><span class="o">=</span> <span class="n">cInstanceCache</span><span class="o">.</span><span class="na">putIfAbsent</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">format</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">previousValue</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// another thread snuck in and did the same work</span>
                <span class="c1">// we should return the instance that is in ConcurrentMap</span>
                <span class="n">format</span><span class="o">=</span> <span class="n">previousValue</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">format</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="generic-method-declaration">Generic method declaration</h3>

<ul>
  <li>Case 1 : <strong>The type parameter is used only for method parameters, not for return type.</strong></li>
</ul>

<p>&lt;T extends Object&gt; is definitely different from &lt;?&gt;. The former means some fixed type, but the latter means unfixed type. In other words, with &lt;?&gt; the type can vary among executions.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">PropertyMeta</span><span class="o">&lt;?&gt;</span> <span class="n">getPropertyMeta</span><span class="o">(</span>
      <span class="nd">@Nonnull</span> <span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="nd">@Nonnull</span> <span class="n">PropertyType</span> <span class="n">type</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">title</span><span class="o">,</span> <span class="n">String</span> <span class="n">desc</span><span class="o">,</span> <span class="n">Boolean</span> <span class="n">required</span><span class="o">,</span>
      <span class="n">Double</span> <span class="n">max</span><span class="o">,</span> <span class="n">Boolean</span> <span class="n">exclusiveMax</span><span class="o">,</span> <span class="n">Double</span> <span class="n">min</span><span class="o">,</span>
      <span class="n">Doolean</span> <span class="n">exclusiveMin</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">maxLen</span><span class="o">,</span> <span class="n">Integer</span> <span class="n">minLen</span><span class="o">,</span>
      <span class="n">T</span><span class="o">[]</span> <span class="n">enums</span><span class="o">,</span> <span class="n">String</span> <span class="n">pattern</span><span class="o">,</span> <span class="n">T</span> <span class="n">defaultValue</span><span class="o">){</span>
<span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="safe-release-of-system-resources">Safe release of system resources</h3>

<p>Classes in <code class="highlighter-rouge">java.io</code> or <code class="highlighter-rouge">java.sql</code> packages handle system resources on networking or file system. When using them, if the resources are not released in some circumstances, it may cause the performance degradation and finally more serious problems. Java has well-shaped code pattern or guideline to prevent these resource leakage.</p>

<ul>
  <li><strong>Coding guideline</strong>
    <ul>
      <li><u>**Process system resources entirely in A local scope**</u>
        <ul>
          <li>Do <strong>NOT</strong> define them as a member fields as possible.</li>
          <li>Do <strong>NOT</strong> handle an object for a system resource in multiple methods passing them.</li>
          <li>In usual coding pattern, <code class="highlighter-rouge">java.sql.Connection</code> is exceptional.</li>
        </ul>
      </li>
      <li><u>**Process system resources in `try/catch/finally` statement.**</u></li>
      <li><u>**Define variables for resource objects before `try` block.**</u></li>
      <li><u>**Create, assign and use the resource objects IN `try` block**</u></li>
      <li><u>**Close(release) the resource objects IN `finally` block, NEVER in `try` block.**</u>
        <ul>
          <li>Exceptionally when assigning multiple resource objects to a same variable in turn within loop, the resource objects of each iteration should be closed inside the loop (and so in <code class="highlighter-rouge">try</code> block). - See the 2nd sample below.</li>
        </ul>
      </li>
      <li><u>**Close all the resource objects, when using multiple ones at the same time.**</u></li>
      <li><u>**Close the resource objects in order from the underlying one, when the resource objects are in a stack together.**</u>
        <ul>
          <li>eg 1. new PrintStream(new BufferedOutputStream(new FileOutputStream(path, true, “utf-8”)));</li>
          <li>eg 2. Connection -&gt; Statement -&gt; ResultSet</li>
        </ul>
      </li>
      <li><u>**AVOID to design the resource class as a parameter type and use the location of the resource as possible**</u></li>
      <li><u>**The method that access the resource objects handed as a parameter, should NOT release or close the resource.**</u>
        <ul>
          <li>It’s more intuitive and less confusing, the code block that create the resource object also release it.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<!-- -->

<ul>
  <li>Sample 1 - <strong><code class="highlighter-rouge">java.io</code></strong> package</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeEmployeesToFileMostUnsafe</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">emps</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">){</span>

    <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">BufferedOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">PrintStream</span> <span class="n">ps</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="k">try</span><span class="o">{</span>
      <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
      <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedOutputStream</span><span class="o">(</span><span class="n">fos</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
      <span class="n">ps</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">PrintStream</span><span class="o">(</span><span class="n">bos</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"utf-8"</span><span class="o">);</span>

      <span class="k">for</span><span class="o">(</span><span class="n">Employee</span> <span class="n">emp</span> <span class="o">:</span> <span class="n">emps</span><span class="o">){</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>

      <span class="n">fos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">//may not be executed -&gt; Unsafe</span>
      <span class="n">bos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">//may not be executed -&gt; Unsafe</span>
      <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="c1">//may not be executed -&gt; Unsafe</span>
    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeEmployeesToFileUnsafe</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">emps</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">){</span>

    <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">BufferedOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">PrintStream</span> <span class="n">ps</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="k">try</span><span class="o">{</span>
      <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
      <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedOutputStream</span><span class="o">(</span><span class="n">fos</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
      <span class="n">ps</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">PrintStream</span><span class="o">(</span><span class="n">bos</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"utf-8"</span><span class="o">);</span> <span class="c1">//may throw UnsupportedEncodingException</span>

      <span class="k">for</span><span class="o">(</span><span class="n">Employee</span> <span class="n">emp</span> <span class="o">:</span> <span class="n">emps</span><span class="o">){</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
      <span class="c1">//This block explicitly closes only ps and does NOT close fos and bos.</span>
      <span class="c1">//In usual case, closing ps also closes underlying fos and bos.</span>
      <span class="c1">//But if exception occurrs at new PrintStream in try block,</span>
      <span class="c1">//bos and fos may remain unclosed.</span>
      <span class="c1">// -&gt; UNSAFE</span>

      <span class="k">if</span><span class="o">(</span><span class="n">ps</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close a resource"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeEmployeesToFileAlsoUnsafe</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">emps</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">){</span>

    <span class="n">PrintStream</span> <span class="n">ps</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="k">try</span><span class="o">{</span>
      <span class="c1">//may throw UnsupportedEncodingException</span>
      <span class="n">ps</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">PrintStream</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedOutputStream</span><span class="o">(</span>
        <span class="k">new</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="n">path</span><span class="o">),</span> <span class="mi">1000</span><span class="o">),</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"utf-8"</span><span class="o">);</span>

      <span class="k">for</span><span class="o">(</span><span class="n">Employee</span> <span class="n">emp</span> <span class="o">:</span> <span class="n">emps</span><span class="o">){</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
      <span class="c1">//Same with right above case.</span>
      <span class="c1">//When the exception occurs creating PrintStream after the underlying</span>
      <span class="c1">//BufferedStream and FileOutputStream, the underlying streams would</span>
      <span class="c1">//remain unclosed with the following code.</span>
      <span class="c1">// -&gt; UNSAFE</span>

      <span class="k">if</span><span class="o">(</span><span class="n">ps</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close a resource"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeEmployeesToFileSafe</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">emps</span><span class="o">,</span> <span class="n">String</span> <span class="n">path</span><span class="o">){</span> <span class="c1">// method with SAFE codes</span>

    <span class="c1">//Define the resources as local variables as possible.</span>
    <span class="c1">//Avoid to define them as member fields, without definite requirement.</span>
    <span class="c1">//And do not handle these variables amongst multiple mehtod passing them.</span>
    <span class="c1">//In other word, process all the necessary operations inside this method.</span>
    <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">BufferedOutputStream</span> <span class="n">bos</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">PrintStream</span> <span class="n">ps</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="k">try</span><span class="o">{</span>
      <span class="c1">//There a PrintStream(File) constructor which dosen't</span>
      <span class="c1">//need to create underlying FileOutputStream or BufferedOutputStream.</span>
      <span class="c1">//But, this sample dosen't use it to show the intended code pattern.</span>

      <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
      <span class="n">bos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedOutputStream</span><span class="o">(</span><span class="n">fos</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
      <span class="n">ps</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">PrintStream</span><span class="o">(</span><span class="n">bos</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="s">"utf-8"</span><span class="o">);</span> <span class="c1">//may throw UnsupportedEncodingException</span>

      <span class="k">for</span><span class="o">(</span><span class="n">Employee</span> <span class="n">emp</span> <span class="o">:</span> <span class="n">emps</span><span class="o">){</span>
        <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">emp</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>

    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Can't write the Employee list"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
      <span class="c1">//take care of order - close the underlying reource first.</span>
      <span class="c1">//take care of each try/catch pattern</span>
      <span class="c1">// - close also can throw exception, but shouldn't block the next tries of close.</span>

      <span class="k">if</span><span class="o">(</span><span class="n">fos</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">fos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close a resource"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">if</span><span class="o">(</span><span class="n">bos</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">bos</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close a resource"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
      <span class="o">}</span>
      <span class="k">if</span><span class="o">(</span><span class="n">ps</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close a resource"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Sample 2 - <strong><code class="highlighter-rouge">java.sql</code></strong> package</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="nf">listEmployees</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">ids</span><span class="o">){</span>  <span class="c1">// method with SAFE codes</span>

  <span class="k">if</span><span class="o">(</span><span class="n">ids</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">"ID list should be specified."</span><span class="o">);</span>

  <span class="n">Connection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">PreparedStatement</span> <span class="n">ps</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

  <span class="n">List</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Employee</span><span class="o">&gt;(</span><span class="n">ids</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
  <span class="n">String</span> <span class="n">qry</span> <span class="o">=</span> <span class="s">"SELECT name, age, height, weight, married FROM emp WHERE id = ?"</span><span class="o">;</span>

  <span class="n">Employee</span> <span class="n">emp</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="k">try</span><span class="o">{</span>
    <span class="c1">//In most cases, data-source manages connection pool internally.</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getDataSource</span><span class="o">().</span><span class="na">getConnection</span><span class="o">();</span>
    <span class="n">ps</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="na">prepareStatement</span><span class="o">(</span><span class="n">qry</span><span class="o">);</span>

    <span class="k">for</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span> <span class="o">:</span> <span class="n">ids</span><span class="o">){</span>
      <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
      <span class="n">rs</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">();</span>

      <span class="k">if</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">()){</span>
        <span class="n">emp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Employee</span><span class="o">();</span>
        <span class="n">emp</span><span class="o">.</span><span class="na">setId</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="n">emp</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">"age"</span><span class="o">));</span>
        <span class="n">emp</span><span class="o">.</span><span class="na">setHeight</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getDouble</span><span class="o">(</span><span class="s">"height"</span><span class="o">));</span>
        <span class="n">emp</span><span class="o">.</span><span class="na">setWeight</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getDouble</span><span class="o">(</span><span class="s">"weight"</span><span class="o">));</span>
        <span class="n">emp</span><span class="o">.</span><span class="na">setMarried</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="s">"married"</span><span class="o">));</span>
        <span class="n">result</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">emp</span><span class="o">);</span>
      <span class="o">}</span>

      <span class="c1">//Close each ResultSet in the iteration</span>
      <span class="c1">//Although the spec says that closing of Statement can open only one</span>
      <span class="c1">//ResultSet at a time and closing a Statement also close the ResultSet</span>
      <span class="c1">//retunred by the Statement, you'd better not trust the implementations</span>
      <span class="c1">//too much.</span>
      <span class="k">if</span><span class="o">(</span><span class="n">rs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close ResultSet object"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>

  <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't list specified employees."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">"Can't list specified employees."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
  <span class="o">}</span><span class="k">finally</span><span class="o">{</span>
    <span class="c1">//take care of order - reverse of creation order</span>
    <span class="c1">//take care of each try/catch pattern</span>
    <span class="c1">// - close also can throw exception, but shouldn't block the next lines.</span>

    <span class="k">if</span><span class="o">(</span><span class="n">rs</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
      <span class="k">try</span><span class="o">{</span> <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
      <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close ResultSet object"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">ps</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
      <span class="k">try</span><span class="o">{</span> <span class="n">ps</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
      <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close PreparedStatement object"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">if</span><span class="o">(</span><span class="n">conn</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
      <span class="k">try</span><span class="o">{</span> <span class="n">conn</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
      <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Can't close Connection object"</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>Sample 3 - <strong><code class="highlighter-rouge">java.net</code></strong> package</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1">//method with SAFE codes</span>
  <span class="cm">/**
   * Run this method in debug mode, and
   * monitor the conn.connected field (which is protected)
   * and the closed field of underlying input stream object.
   */</span>
  <span class="nd">@Test</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testUrlConnection</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>

    <span class="c1">// references</span>
    <span class="c1">// http://docs.oracle.com/javase/tutorial/networking/urls/readingWriting.html</span>
    <span class="c1">// http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html</span>
    <span class="c1">// http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html</span>

    <span class="n">URL</span> <span class="n">url</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"http://www.google.com/"</span><span class="o">);</span>
    <span class="n">HttpURLConnection</span> <span class="n">conn</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">InputStreamReader</span> <span class="n">isr</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

    <span class="k">try</span><span class="o">{</span>
      <span class="c1">// "A new connection is opened every time by</span>
      <span class="c1">// calling the openConnection method" - from Java SE API</span>
      <span class="n">conn</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)(</span><span class="n">url</span><span class="o">.</span><span class="na">openConnection</span><span class="o">());</span>

      <span class="c1">// "Operations that depend on being connected,</span>
      <span class="c1">// like getContentLength, will implicitly perform</span>
      <span class="c1">// the connection, if necessary."</span>
      <span class="c1">// - from Java SE API</span>
      <span class="c1">//</span>
      <span class="c1">// "The connection is opened implicitly by calling</span>
      <span class="c1">// getInputStream." - from The Java Tutorials</span>
      <span class="n">isr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">conn</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">());</span>
      <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="n">isr</span><span class="o">);</span>

      <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
      <span class="k">while</span><span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
      <span class="o">}</span>

    <span class="o">}</span><span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
      <span class="k">throw</span> <span class="n">ex</span><span class="o">;</span>
    <span class="o">}</span><span class="k">finally</span><span class="o">{</span>

      <span class="k">if</span><span class="o">(</span><span class="n">conn</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">conn</span><span class="o">.</span><span class="na">disconnect</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
          <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"The connection is not diconnected."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>

      <span class="c1">// "Invoking the close() methods on the InputStream or</span>
      <span class="c1">// OutputStream of an URLConnection after a request may</span>
      <span class="c1">// free network resources associated with this instance"</span>
      <span class="c1">// - from Java SE API</span>
      <span class="k">if</span><span class="o">(</span><span class="n">isr</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">isr</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
          <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"The output stream is not closed."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>

      <span class="k">if</span><span class="o">(</span><span class="n">br</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
        <span class="k">try</span><span class="o">{</span> <span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span> <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="o">){</span>
          <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"The output stream is not closed."</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
</code></pre></div></div>

<h3 id="investigating-initialcontext-using-recursive-call">Investigating <code class="highlighter-rouge">InitialContext</code> using recursive call</h3>

<p>You can get all name-class pairs under <strong><code class="highlighter-rouge">InitialContext</code></strong> of your application server using the following simple code containing recursive call.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Retrieve all name class pairs recursively under the given naming context.
 *
 * @return
 */</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">NameClassPair</span><span class="o">&gt;</span> <span class="nf">getNameClassPairsUnderContext</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Context</span> <span class="n">cntx</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">NamingException</span><span class="o">{</span>

  <span class="k">if</span><span class="o">(</span><span class="n">cntx</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">"Context shouldn't be null."</span><span class="o">);</span>

  <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">NameClassPair</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">NameClassPair</span><span class="o">&gt;();</span>
  <span class="n">NamingEnumeration</span><span class="o">&lt;</span><span class="n">NameClassPair</span><span class="o">&gt;</span> <span class="n">pairs</span> <span class="o">=</span> <span class="n">cntx</span><span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
  <span class="n">NameClassPair</span> <span class="n">pair</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">Object</span> <span class="n">obj</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">String</span> <span class="n">path</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="k">while</span><span class="o">(</span><span class="n">pairs</span><span class="o">.</span><span class="na">hasMore</span><span class="o">()){</span>
    <span class="n">pair</span> <span class="o">=</span> <span class="n">pairs</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">cntx</span><span class="o">.</span><span class="na">lookup</span><span class="o">(</span><span class="n">pair</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">name</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">pair</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>

    <span class="k">if</span><span class="o">(</span><span class="n">obj</span> <span class="k">instanceof</span> <span class="n">javax</span><span class="o">.</span><span class="na">naming</span><span class="o">.</span><span class="na">Context</span><span class="o">){</span>
      <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">pair</span><span class="o">);</span>
      <span class="n">result</span><span class="o">.</span><span class="na">putAll</span><span class="o">(</span><span class="n">getNameClassPairsUnderContext</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="o">(</span><span class="n">Context</span><span class="o">)</span><span class="n">obj</span><span class="o">));</span>
    <span class="o">}</span>
    <span class="k">else</span><span class="o">{</span> <span class="n">result</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="n">pair</span><span class="o">);}</span>
  <span class="o">}</span>

  <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="typical-code-pattern-for-regex-api">Typical code pattern for Regex API</h3>

<p>The simplest code pattern for when a regular expression is used just once is to use <strong><code class="highlighter-rouge">static Pattern.matches</code></strong> method.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">matches</span><span class="o">(</span><span class="s">"a*b"</span><span class="o">,</span> <span class="s">"aaaaab"</span><span class="o">);</span>
</code></pre></div></div>

<p>When using a expression several times, it is better to use compiled pattern object considering performance.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Pattern</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">"a*b"</span><span class="o">);</span>
<span class="kt">boolean</span> <span class="n">b1</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="s">"aaaaab"</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
<span class="kt">boolean</span> <span class="n">b2</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">matcher</span><span class="o">(</span><span class="s">"bbbbb"</span><span class="o">).</span><span class="na">matches</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="extract-rgb-pixel-data-in-byte-array-from-general-image-file">Extract RGB pixel data in byte array from general image file</h3>

<p>Note that <code class="highlighter-rouge">java.awt.image.BufferedImage.getRGB(int, int, int, int, int[], int, int)</code> method returns an array of integer pixels in the default RGB color model(<code class="highlighter-rouge">TYPE_INT_ARGB</code>) regardless of the intrinsic color model. Color conversion takes place if the intrinsic color model is not the default RGB.
By virtue of this automatic conversion inside BufferedImage when necessary, we can easily extract the RGB pixel data of the images in various formats (including those that don’t uses RGB color space) using codes like following.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">byte</span><span class="o">[]</span> <span class="nf">extractRgbPixelsFromImage</span><span class="o">(</span><span class="n">String</span> <span class="n">path</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">{</span>

      <span class="n">BufferedImage</span> <span class="n">img</span> <span class="o">=</span> <span class="n">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="n">path</span><span class="o">));</span>
      <span class="kt">int</span> <span class="n">w</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="na">getWidth</span><span class="o">();</span>
      <span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="na">getHeight</span><span class="o">();</span>
      <span class="kt">int</span><span class="o">[]</span> <span class="n">pixels</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">pixels</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="na">getRGB</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">w</span><span class="o">);</span> <span class="c1">//ARGB pixels (regardless of original color model and color space)</span>

      <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">w</span> <span class="o">*</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">3</span><span class="o">];</span>
      <span class="kt">int</span> <span class="n">pixel</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">w</span> <span class="o">*</span> <span class="n">h</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span>
         <span class="n">pixel</span> <span class="o">=</span> <span class="n">pixels</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
         <span class="n">bytes</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">pixel</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="o">);</span>
         <span class="n">bytes</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">pixel</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="o">);</span>
         <span class="n">bytes</span><span class="o">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">2</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)(</span><span class="n">pixel</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="o">);</span>
      <span class="o">}</span>

      <span class="k">return</span> <span class="n">bytes</span><span class="o">;</span>
   <span class="o">}</span>
</code></pre></div></div>

<h4 id="references">References</h4>

<ul>
  <li><a href="http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#getRGB(int,%20int,%20int,%20int,%20int%5B%5D,%20int,%20int)"><code class="highlighter-rouge">java.awt.image.BufferedImage.getRGB</code> API</a></li>
  <li><a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/image/PixelGrabber.html"><code class="highlighter-rouge">java.awt.image.PixelGrabber</code> API</a></li>
  <li><a href="http://docs.oracle.com/javase/7/docs/api/index.html?javax/imageio/package-summary.html"><code class="highlighter-rouge">javax.imageio</code> package</a>
    <ul>
      <li>Java Image I/O API(<code class="highlighter-rouge">javax.imageio</code>) supports <code class="highlighter-rouge">JPEG</code>, <code class="highlighter-rouge">PNG</code>, <code class="highlighter-rouge">BMP</code>, <code class="highlighter-rouge">WBMP</code>, and <code class="highlighter-rouge">GIF</code> image formats.</li>
    </ul>
  </li>
  <li><a href="https://commons.apache.org/proper/commons-imaging/">Apache Commons Imaging</a>
    <ul>
      <li>Commons imaging supports <code class="highlighter-rouge">TIFF</code>, <code class="highlighter-rouge">DCX</code>, <code class="highlighter-rouge">ICNS</code>, <code class="highlighter-rouge">ICO/CUR</code>, <code class="highlighter-rouge">PCX</code>, and <code class="highlighter-rouge">PNM</code> image formats.</li>
    </ul>
  </li>
</ul>

<h3 id="typical-usage-pattern-of-slf4j-logger">Typical usage pattern of SLF4J <strong><code class="highlighter-rouge">Logger</code></strong></h3>

<p>The following code snippet is from the <a href="http://www.slf4j.org/apidocs/index.html?org/slf4j/Logger.html">API documentation of SLF4J <strong><code class="highlighter-rouge">Logger</code></strong> interface</a>. Note that they recommend the logger to be <strong><code class="highlighter-rouge">final static</code></strong> member of the user class.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>

 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">Wombat</span> <span class="o">{</span>

   <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">Wombat</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
   <span class="n">Integer</span> <span class="n">t</span><span class="o">;</span>
   <span class="n">Integer</span> <span class="n">oldT</span><span class="o">;</span>

   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setTemperature</span><span class="o">(</span><span class="n">Integer</span> <span class="n">temperature</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">oldT</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
     <span class="n">t</span> <span class="o">=</span> <span class="n">temperature</span><span class="o">;</span>
     <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="s">"Temperature set to {}. Old temperature was {}."</span><span class="o">,</span> <span class="n">t</span><span class="o">,</span> <span class="n">oldT</span><span class="o">);</span>
     <span class="k">if</span><span class="o">(</span><span class="n">temperature</span><span class="o">.</span><span class="na">intValue</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="o">)</span> <span class="o">{</span>
       <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Temperature has risen above 50 degrees."</span><span class="o">);</span>
     <span class="o">}</span>
   <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div></div>

<h3 id="simplest-log4j-configuration">Simplest Log4j configuration</h3>

<h4 id="properties-configuration">Properties configuration</h4>

<ul>
  <li>Properties configurations support <code class="highlighter-rouge">DailyRollingFileAppender</code>, but don’t support <code class="highlighter-rouge">TimeBasedRollingPolicy</code> and <code class="highlighter-rouge">RollingFileAppender</code>.</li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Pre-defined appender can be customized using Java system properties : Console, DRFA
</span>
<span class="c"># ext properties are expected to be specified as Java system properties in command-line
</span><span class="py">ext.log.dir</span><span class="p">=</span><span class="s">${user.home}</span>
<span class="py">ext.log.file</span><span class="p">=</span><span class="s">log4j.log</span>

<span class="c"># global settings
</span><span class="py">log4j.rootLogger</span><span class="p">=</span><span class="s">INFO,Console,DRFA</span>
<span class="py">log4j.threshhold</span><span class="p">=</span><span class="s">ALL</span>

<span class="c"># Console appender
</span><span class="py">log4j.appender.Console</span><span class="p">=</span><span class="s">org.apache.log4j.ConsoleAppender</span>
<span class="py">log4j.appender.Console.Target</span><span class="p">=</span><span class="s">System.out</span>
<span class="py">log4j.appender.Console.Threshold</span><span class="p">=</span><span class="s">WARN</span>
<span class="py">log4j.appender.Console.layout</span><span class="p">=</span><span class="s">org.apache.log4j.PatternLayout</span>
<span class="py">log4j.appender.Console.layout.ConversionPattern</span><span class="p">=</span><span class="s">%d{yy/MM/dd HH:mm:ss} %-5p %c{2}: %m%n</span>

<span class="c"># Pre-defined daily rolling file appender
</span><span class="py">log4j.appender.DRFA</span><span class="p">=</span><span class="s">org.apache.log4j.DailyRollingFileAppender</span>
<span class="py">log4j.appender.DRFA.Threshold</span><span class="p">=</span><span class="s">DEBUG</span>
<span class="py">log4j.appender.DRFA.File</span><span class="p">=</span><span class="s">${ext.log.dir}/${ext.log.file}</span>
<span class="py">log4j.appender.DRFA.DatePattern</span><span class="p">=</span><span class="s">.yyyy-MM-dd</span>
<span class="py">log4j.appender.DRFA.MaxBackupIndex</span><span class="p">=</span><span class="s">30</span>
<span class="py">log4j.appender.DRFA.layout</span><span class="p">=</span><span class="s">org.apache.log4j.PatternLayout</span>
<span class="py">log4j.appender.DRFA.layout.ConversionPattern</span><span class="p">=</span><span class="s">%d{yy/MM/dd HH:mm:ss} %-5p %c{2} (%F:%M(%L)) - %m%n</span>
</code></pre></div></div>

<h4 id="xml-configuration">XML configuration</h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="cp">&lt;!DOCTYPE log4j:configuration&gt;</span>

<span class="nt">&lt;log4j:configuration</span> <span class="na">debug=</span><span class="s">"true"</span> <span class="na">threshold=</span><span class="s">"all"</span> <span class="na">xmlns:log4j=</span><span class="s">"http://jakarta.apache.org/log4j/"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;root&gt;</span>
    <span class="nt">&lt;priority</span> <span class="na">value=</span><span class="s">"DEBUG"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/root&gt;</span>

  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"Console"</span> <span class="na">class=</span><span class="s">"org.apache.log4j.ConsoleAppender"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"Target"</span> <span class="na">value=</span><span class="s">"System.out"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"Threshold"</span> <span class="na">value=</span><span class="s">"TRACE"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"org.apache.log4j.PatternLayout"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"ConversionPattern"</span> <span class="na">value=</span><span class="s">"[%d{yy/MM/dd,HH:mm:ss}|%-5p|%c{2}] %m(%M{1}:%L)"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/layout&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>

  <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"DRFA"</span> <span class="na">class=</span><span class="s">"org.apache.log4j.rolling.RollingFileAppender"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"MaxBackupIndex"</span> <span class="na">value=</span><span class="s">"30"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;rollingPolicy</span> <span class="na">class=</span><span class="s">"org.apache.log4j.rolling.TimeBasedRollingPolicy"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"FileNamePattern"</span> <span class="na">value=</span><span class="s">"${LOG_FILE_DIR}\\log4j.%d{yyyy-MM-dd}.log"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/rollingPolicy&gt;</span>
    <span class="nt">&lt;layout</span> <span class="na">class=</span><span class="s">"org.apache.log4j.PatternLayout"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"ConversionPattern"</span> <span class="na">value=</span><span class="s">"[%d{yy/MM/dd,HH:mm:ss}|%-5p|%c{2}] %m(%M{1}:%L)%n"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/layout&gt;</span>
  <span class="nt">&lt;/appender&gt;</span>

<span class="nt">&lt;/log4j:configuration&gt;</span>
</code></pre></div></div>

<h3 id="simplest-logback-configuration">Simplest Logback configuration</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;configuration</span> <span class="na">debug=</span><span class="s">"true"</span> <span class="na">scan=</span><span class="s">"true"</span> <span class="na">scanPeriod=</span><span class="s">"180 seconds"</span><span class="nt">&gt;</span>

   <span class="c">&lt;!-- For more on JMX configuration, refer http://logback.qos.ch/manual/jmxConfig.html --&gt;</span>
   <span class="nt">&lt;jmxConfigurator/&gt;</span>

   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_FILE_DIR"</span> <span class="na">value=</span><span class="s">"${log.file.dir:-${LOG_BASE:-${TEMP:-${user.home}}}}"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_FILE_NAME"</span> <span class="na">value=</span><span class="s">"${log.file.name:-logback}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- excluding path and extension --&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_TIMEZONE"</span> <span class="na">value=</span><span class="s">"${log.timezone:-Asia/Seoul}"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_PID"</span> <span class="na">value=</span><span class="s">"${log.pid:-false}"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_LEVEL_ROOT"</span> <span class="na">value=</span><span class="s">"${log.level.root:-${log.level.default:-INFO}}"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_LEVEL_SPRING"</span> <span class="na">value=</span><span class="s">"${log.level.spring:-${log.level.default:-INFO}}"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_LEVEL_MYBATIS"</span> <span class="na">value=</span><span class="s">"${log.level.mybatis:-${log.level.default:-INFO}}"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_LEVEL_JETTY"</span> <span class="na">value=</span><span class="s">"${log.level.jetty:-${log.level.default:-DEBUG}}"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_LEVEL_AKKA"</span> <span class="na">value=</span><span class="s">"${log.level.akka:-${log.level.default:-DEBUG}}"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_LOG_LEVEL_AKKA_CLUSTER_HEARTBEAT"</span> <span class="na">value=</span><span class="s">"${log.level.akka.clusterHeartBeat:-OFF}"</span><span class="nt">/&gt;</span>

   <span class="nt">&lt;if</span> <span class="na">condition=</span><span class="s">'property("_LOG_PID").trim().equals("true")'</span><span class="nt">&gt;</span>
      <span class="nt">&lt;then&gt;</span>
         <span class="c">&lt;!-- For more on conversion pattern, refer http://logback.qos.ch/manual/layouts.html#ClassicPatternLayout --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_PATTERN_HEADER"</span> <span class="na">value=</span><span class="s">"[%d{yy/MM/dd HH:mm:ss, ${_LOG_TIMEZONE}}|%-5.-5p|%X{pid}|%-15.-15t|%40.40c{2}]"</span> <span class="nt">/&gt;</span>
         <span class="c">&lt;!-- %M is not particularly fast. Thus, it should be uses only in test --&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_PATTERN_HEADER_METHOD"</span> <span class="na">value=</span><span class="s">"[%d{yy/MM/dd HH:mm:ss, ${_LOG_TIMEZONE}}|%-5.-5p|%X{pid}|%-15.-15t|%40.40c{2}|%M]"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/then&gt;</span>
      <span class="nt">&lt;else&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_PATTERN_HEADER"</span> <span class="na">value=</span><span class="s">"[%d{yy/MM/dd HH:mm:ss, ${_LOG_TIMEZONE}}|%-5.-5p|%-15.-15t|%40.40c{2}]"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"_PATTERN_HEADER_METHOD"</span> <span class="na">value=</span><span class="s">"[%d{yy/MM/dd HH:mm:ss, ${_LOG_TIMEZONE}}|%-5.-5p|%-15.-15t|%40.40c{2}|%M]"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/else&gt;</span>
   <span class="nt">&lt;/if&gt;</span>

   <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"Console"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.ConsoleAppender"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;filter</span> <span class="na">class=</span><span class="s">"ch.qos.logback.classic.filter.ThresholdFilter"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;level&gt;</span>DEBUG<span class="nt">&lt;/level&gt;</span>
      <span class="nt">&lt;/filter&gt;</span>
      <span class="nt">&lt;encoder&gt;</span>
         <span class="nt">&lt;pattern&gt;</span>${_PATTERN_HEADER} %m%n<span class="nt">&lt;/pattern&gt;</span>
      <span class="nt">&lt;/encoder&gt;</span>
   <span class="nt">&lt;/appender&gt;</span>
   <span class="c">&lt;!-- For more on RollingFileAppender, refer http://logback.qos.ch/manual/appenders.html#RollingFileAppender --&gt;</span>
   <span class="nt">&lt;appender</span> <span class="na">name=</span><span class="s">"DRFA"</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.RollingFileAppender"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- Do NOT specify file element to use prudent mode --&gt;</span>
      <span class="nt">&lt;prudent&gt;</span>true<span class="nt">&lt;/prudent&gt;</span>
      <span class="nt">&lt;rollingPolicy</span> <span class="na">class=</span><span class="s">"ch.qos.logback.core.rolling.TimeBasedRollingPolicy"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;fileNamePattern&gt;</span>${_LOG_FILE_DIR}/${_LOG_FILE_NAME}.%d{yyyy-MM-dd, ${_LOG_TIMEZONE}}.log<span class="nt">&lt;/fileNamePattern&gt;</span>
         <span class="nt">&lt;maxHistory&gt;</span>10<span class="nt">&lt;/maxHistory&gt;</span>
      <span class="nt">&lt;/rollingPolicy&gt;</span>
      <span class="nt">&lt;filter</span> <span class="na">class=</span><span class="s">"ch.qos.logback.classic.filter.ThresholdFilter"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;level&gt;</span>DEBUG<span class="nt">&lt;/level&gt;</span>
      <span class="nt">&lt;/filter&gt;</span>
      <span class="nt">&lt;encoder&gt;</span>
         <span class="nt">&lt;pattern&gt;</span>${_PATTERN_HEADER} %m%n<span class="nt">&lt;/pattern&gt;</span>
      <span class="nt">&lt;/encoder&gt;</span>
   <span class="nt">&lt;/appender&gt;</span>

   <span class="nt">&lt;root</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_ROOT}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/root&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.springframework"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_SPRING}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.apache.ibatis"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_MYBATIS}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

  <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.mybatis.spring"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_MYBATIS}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.eclipse.jetty"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_JETTY}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.eclipse.jetty.http.HttpParser"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_JETTY}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"org.eclipse.jetty.webapp.WebAppClassLoader"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_JETTY}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"akka"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_AKKA}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"Console"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>

   <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"akka.cluster.ClusterHeartbeatSender"</span> <span class="na">level=</span><span class="s">"${_LOG_LEVEL_AKKA_CLUSTER_HEARTBEAT}"</span> <span class="na">additivity=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;appender-ref</span> <span class="na">ref=</span><span class="s">"DRFA"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/logger&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<h3 id="identifying-the-implementation-of-jaxp-in-use">Identifying the implementation of JAXP in use</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%1$s = %2$s\n"</span><span class="o">,</span>
            <span class="s">"javax.xml.parsers.SAXParserFactory"</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"javax.xml.parsers.SAXParserFactory"</span><span class="o">));</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%1$s = %2$s\n"</span><span class="o">,</span>
            <span class="s">"javax.xml.parsers.DocumentBuilderFactory"</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"javax.xml.parsers.DocumentBuilderFactory"</span><span class="o">));</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%1$s = %2$s\n"</span><span class="o">,</span>
            <span class="s">"javax.xml.transform.TransformerFactory"</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"javax.xml.transform.TransformerFactory"</span><span class="o">));</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%1$s = %2$s\n"</span><span class="o">,</span>
            <span class="s">"javax.xml.xpath.XPathFactory"</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"javax.xml.xpath.XPathFactory"</span><span class="o">));</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%1$s = %2$s\n"</span><span class="o">,</span>
            <span class="s">"javax.xml.validation.SchemaFactory"</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s">"javax.xml.validation.SchemaFactory"</span><span class="o">));</span>

      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"SaxParserFactory implementation = %1$s\n"</span><span class="o">,</span>
            <span class="n">SAXParserFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">().</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"DocumentBuilderFactory implementation = %1$s\n"</span><span class="o">,</span>
            <span class="n">DocumentBuilderFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">().</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"TransformerFactory implementation = %1$s\n"</span><span class="o">,</span>
            <span class="n">TransformerFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">().</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"XPathFactory implementation = %1$s\n"</span><span class="o">,</span>
            <span class="n">XPathFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">().</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"SchemaFactory implementation = %1$s\n"</span><span class="o">,</span>
            <span class="n">SchemaFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">XMLConstants</span><span class="o">.</span><span class="na">W3C_XML_SCHEMA_NS_URI</span><span class="o">).</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
</code></pre></div></div>

<h3 id="validating-xml-document-using-dtd-xml-schema-relax-ng-or-schematron">Validating XML document using DTD, XML Schema, RELAX NG or Schematron</h3>

<p>As of Java SE 1.5, <strong><code class="highlighter-rouge">javax.xml.validation</code></strong> package is added. It makes the validation of XML using various schema language more clear and convenient.</p>

<h4 id="validating-with-dom-praser-explicitly">Validating with DOM praser explicitly</h4>

<p>The following code snippet is a little bit enhancement of the one from <a href="http://docs.oracle.com/javase/6/docs/api/index.html?javax/xml/validation/package-summary.html">the API documentation of <code class="highlighter-rouge">javax.xml.validation</code> package</a>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="n">DocumentBuilderFactory</span> <span class="n">builderFactory</span> <span class="o">=</span> <span class="n">DocumentBuilderFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
    <span class="n">builderFactory</span><span class="o">.</span><span class="na">setNamespaceAware</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="n">builderFactory</span><span class="o">.</span><span class="na">setValidating</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

    <span class="c1">// parse an XML document into a DOM tree</span>
    <span class="n">DocumentBuilder</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">builderFactory</span> <span class="o">.</span><span class="na">newDocumentBuilder</span><span class="o">();</span>
    <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"instance.xml"</span><span class="o">));</span>

    <span class="c1">// create a SchemaFactory capable of understanding WXS schemas</span>
    <span class="n">SchemaFactory</span> <span class="n">factory</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">XMLConstants</span><span class="o">.</span><span class="na">W3C_XML_SCHEMA_NS_URI</span><span class="o">);</span>

    <span class="c1">// load a WXS schema, represented by a Schema instance</span>
    <span class="n">Source</span> <span class="n">schemaFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StreamSource</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"mySchema.xsd"</span><span class="o">));</span>
    <span class="n">Schema</span> <span class="n">schema</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="na">newSchema</span><span class="o">(</span><span class="n">schemaFile</span><span class="o">);</span>

    <span class="c1">// create a Validator instance, which can be used to validate an instance document</span>
    <span class="n">Validator</span> <span class="n">validator</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="na">newValidator</span><span class="o">();</span>

    <span class="c1">// validate the DOM tree</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">validator</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="k">new</span> <span class="n">DOMSource</span><span class="o">(</span><span class="n">document</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SAXException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// instance document is invalid!</span>
    <span class="o">}</span>
</code></pre></div></div>

<h4 id="validating-without-parser-explicitly">Validating without parser explicitly</h4>

<p>When using DOM parser, the exact location of invalid element is difficulty to get. To get exact location, you should use SAX parser or stream parser. When using stream parser, you may not create explicitly stream parser in your code. Instead, just use</p>

<p><code class="highlighter-rouge">StreamSource</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="o">...</span>
    <span class="n">URL</span> <span class="n">schUrl</span> <span class="o">=</span> <span class="n">ClassLoader</span><span class="o">.</span><span class="na">getSystemResource</span><span class="o">(</span><span class="s">"component-meta.xsd"</span><span class="o">);</span>
    <span class="n">URL</span> <span class="n">xmlUrl</span> <span class="o">=</span> <span class="n">ClassLoader</span><span class="o">.</span><span class="na">getSystemResource</span><span class="o">(</span><span class="s">"component-meta-valid.xml"</span><span class="o">);</span>

    <span class="n">SchemaFactory</span> <span class="n">sf</span> <span class="o">=</span> <span class="n">SchemaFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span><span class="n">XMLConstants</span><span class="o">.</span><span class="na">W3C_XML_SCHEMA_NS_URI</span><span class="o">);</span>
    <span class="c1">//A Schema object is thread safe and applications are encouraged to share it across many parsers in many threads.</span>
    <span class="n">Schema</span> <span class="n">sch</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="na">newSchema</span><span class="o">(</span><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">File</span><span class="o">(</span><span class="n">schUrl</span><span class="o">.</span><span class="na">toURI</span><span class="o">()));</span>
    <span class="c1">//A validator object is not thread-safe and not reentrant.</span>
    <span class="n">Validator</span> <span class="n">vldt</span> <span class="o">=</span> <span class="n">sch</span><span class="o">.</span><span class="na">newValidator</span><span class="o">();</span>

    <span class="n">SimpleCollectiveErrorHandler</span> <span class="n">errHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleCollectiveErrorHandler</span><span class="o">();</span>
    <span class="n">vldt</span><span class="o">.</span><span class="na">setErrorHandler</span><span class="o">(</span><span class="n">errHandler</span><span class="o">);</span>
    <span class="n">vldt</span><span class="o">.</span><span class="na">validate</span><span class="o">(</span><span class="k">new</span> <span class="n">StreamSource</span><span class="o">(</span><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">File</span><span class="o">(</span><span class="n">xmlUrl</span><span class="o">.</span><span class="na">toURI</span><span class="o">())));</span>

    <span class="n">List</span><span class="o">&lt;</span><span class="n">SAXParseException</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="n">errHandler</span><span class="o">.</span><span class="na">getErrors</span><span class="o">();</span>

    <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"There exist "</span> <span class="o">+</span> <span class="n">errors</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">+</span> <span class="s">" errors."</span><span class="o">);</span>
    <span class="k">for</span><span class="o">(</span><span class="n">SAXParseException</span> <span class="n">error</span> <span class="o">:</span> <span class="n">errors</span><span class="o">){</span>
      <span class="n">SimpleCollectiveErrorHandler</span><span class="o">.</span><span class="na">printSAXParseException</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">,</span> <span class="n">error</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="o">....</span>
</code></pre></div></div>

<h4 id="error-handler">Error Handler</h4>

<p>In the above code, a custom <code class="highlighter-rouge">ErrorHandler</code> is used. The error handler classes provided by JDK is somewhat simple. The source of the custom error handler (<strong>‘<code class="highlighter-rouge">SimpleCollectiveErrorHandler</code></strong>’) is like as below.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleCollectiveErrorHandler</span> <span class="kd">extends</span> <span class="n">DefaultHandler</span><span class="o">{</span>

  <span class="kd">private</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">SAXParseException</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">ArrayList</span><span class="o">&lt;</span><span class="n">SAXParseException</span><span class="o">&gt;();</span>

  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">SAXParseException</span><span class="o">&gt;</span> <span class="nf">getErrors</span><span class="o">(){</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">errors</span><span class="o">;</span> <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasError</span><span class="o">(){</span> <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="na">errors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span> <span class="o">}</span>

  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">warning</span><span class="o">(</span><span class="n">SAXParseException</span> <span class="n">ex</span><span class="o">){}</span>
  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">error</span><span class="o">(</span><span class="n">SAXParseException</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">errors</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span> <span class="o">}</span>
  <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fatalError</span><span class="o">(</span><span class="n">SAXParseException</span> <span class="n">ex</span><span class="o">){</span> <span class="k">this</span><span class="o">.</span><span class="na">errors</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">ex</span><span class="o">);</span> <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">printErrors</span><span class="o">(</span><span class="n">PrintStream</span> <span class="n">ps</span><span class="o">){</span>
    <span class="k">if</span><span class="o">(</span><span class="n">ps</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="k">return</span><span class="o">;</span>
    <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&gt;&gt; Errors : "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">errors</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
    <span class="k">for</span><span class="o">(</span><span class="n">SAXParseException</span> <span class="nl">ex:</span> <span class="k">this</span><span class="o">.</span><span class="na">errors</span><span class="o">)</span>    <span class="n">printSAXParseException</span><span class="o">(</span><span class="n">ps</span><span class="o">,</span> <span class="n">ex</span><span class="o">);</span>
    <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">printSAXParseException</span><span class="o">(</span><span class="n">PrintStream</span> <span class="n">ps</span><span class="o">,</span> <span class="n">SAXParseException</span> <span class="n">ex</span><span class="o">){</span>
    <span class="n">ps</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Line : "</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getLineNumber</span><span class="o">()</span> <span class="o">+</span> <span class="s">", Column : "</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getColumnNumber</span><span class="o">()</span> <span class="o">+</span> <span class="s">" ; "</span> <span class="o">+</span> <span class="n">ex</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="validating-xml-document-with-no-declared-namespace-using-schema">Validating XML document with no declared namespace using schema</h4>

<p>When validating XML documents with no namespace related attributes such as <strong><code class="highlighter-rouge">xmlns</code></strong> or <strong><code class="highlighter-rouge">xsi:noNamespaceSchemaLocation</code></strong> in the root element, Applying schema with <strong><code class="highlighter-rouge">xmlns</code></strong> or <strong><code class="highlighter-rouge">targetNamespace</code></strong> would cause fundamental errors that say’s “Cannot find the declaration of element …”.</p>

<p>To successfully apply the schema without the modification (such as adding <code class="highlighter-rouge">xmlns</code> attribute.) of XML documents, the schema to apply should not have <code class="highlighter-rouge">xmlns</code> and <code class="highlighter-rouge">targetNamespace</code> attributes.</p>

<ul>
  <li>XLM document to validate</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>

<span class="nt">&lt;component-meta&gt;</span>
  <span class="nt">&lt;name&gt;</span>pie-chart<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;ver&gt;</span>1.0<span class="nt">&lt;/ver&gt;</span>
  <span class="nt">&lt;parts&gt;</span>
    <span class="nt">&lt;part&gt;</span>
      <span class="nt">&lt;name&gt;</span>pie<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;properties&gt;</span>
        <span class="nt">&lt;property&gt;</span>
          <span class="nt">&lt;name&gt;</span>title<span class="nt">&lt;/name&gt;</span>
          ...
</code></pre></div></div>

<ul>
  <li>Schema to use</li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;xsd:schema</span>
  <span class="na">xmlns:xsd=</span><span class="s">"http://www.w3.org/2001/XMLSchema"</span>
  <span class="na">elementFormDefault=</span><span class="s">"qualified"</span><span class="nt">&gt;</span>

<span class="nt">&lt;xsd:annotation&gt;</span>
  <span class="nt">&lt;xsd:documentation&gt;</span>
adding the following attribute to the schema element will prevent
applying this schema to the document without namespace declarations
using xmlns or xsi:noNamespaceSchemaLocation attribute

  xmlns="http://www.3rdstage.org/schema/component-meta"
  targetNamespace="http://www.3rdstage.org/schema/component-meta"
  <span class="nt">&lt;/xsd:documentation&gt;</span>
<span class="nt">&lt;/xsd:annotation&gt;</span>

<span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">"component-meta"</span> <span class="na">type=</span><span class="s">"component-metaType"</span><span class="nt">/&gt;</span>

<span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">"component-metaType"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;xsd:sequence&gt;</span>
    <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">"name"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;xsd:simpleType&gt;</span>
        <span class="nt">&lt;xsd:restriction</span> <span class="na">base=</span><span class="s">"xsd:string"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;xsd:pattern</span> <span class="na">value=</span><span class="s">"[a-zA-Z][-_:.0-9a-zA-Z]*"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/xsd:restriction&gt;</span>
      <span class="nt">&lt;/xsd:simpleType&gt;</span>
    <span class="nt">&lt;/xsd:element&gt;</span>
...
</code></pre></div></div>

<ul>
  <li>More readings
    <ul>
      <li><a href="http://www.edankert.com/validate.html">How to Validate XML using Java</a></li>
      <li><a href="http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html">The Java XML Validation API <i>from developerWorks</i></a>(08 Aug 2006)</li>
    </ul>
  </li>
</ul>

<h3 id="access-xml-using-xpath-and-dom">Access XML using XPath and DOM</h3>

<p>Maybe, the most common use case of XPath would be along with DOM representation of XML. The following sample is provided in the <a href="http://docs.oracle.com/javase/6/docs/api/index.html?javax/xml/xpath/package-summary.html">API documentation of <strong><code class="highlighter-rouge">javax.xml.xpath</code></strong> package</a>.
Note that <strong><code class="highlighter-rouge">XPathFactory</code></strong> and <strong><code class="highlighter-rouge">XPath</code></strong> class is <strong>NOT expected to be thread-safe</strong>, says the API documentation.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// parse the XML as a W3C Document</span>
<span class="n">DocumentBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="n">DocumentBuilderFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">().</span><span class="na">newDocumentBuilder</span><span class="o">();</span>
<span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">"/widgets.xml"</span><span class="o">));</span>

<span class="n">XPath</span> <span class="n">xpath</span> <span class="o">=</span> <span class="n">XPathFactory</span><span class="o">.</span><span class="na">newInstance</span><span class="o">().</span><span class="na">newXPath</span><span class="o">();</span>
<span class="n">String</span> <span class="n">expression</span> <span class="o">=</span> <span class="s">"/widgets/widget"</span><span class="o">;</span>
<span class="n">Node</span> <span class="n">widgetNode</span> <span class="o">=</span> <span class="o">(</span><span class="n">Node</span><span class="o">)</span> <span class="n">xpath</span><span class="o">.</span><span class="na">evaluate</span><span class="o">(</span><span class="n">expression</span><span class="o">,</span> <span class="n">document</span><span class="o">,</span> <span class="n">XPathConstants</span><span class="o">.</span><span class="na">NODE</span><span class="o">);</span>
</code></pre></div></div>

<h3 id="applying-xquery-on-html">Applying XQuery on HTML</h3>

<p>Saxon can’t parse HTML file directly. But using TagSoup along with Saxon, you can parse HTML and apply XPath or XQuery to access data. The sample below shows the overall programming.</p>

<pre><code class="language-java5">package thirdstage.exercise.xml.saxon;

import java.io.File;
import java.io.FileInputStream;
import java.net.URL;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.transform.Source;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.sax.SAXSource;

import net.sf.saxon.Configuration;
import net.sf.saxon.dom.DocumentBuilderImpl;
import net.sf.saxon.lib.ParseOptions;
import net.sf.saxon.lib.Validation;
import net.sf.saxon.s9api.Processor;
import net.sf.saxon.s9api.XQueryCompiler;
import net.sf.saxon.s9api.XQueryEvaluator;
import net.sf.saxon.s9api.XQueryExecutable;
import net.sf.saxon.s9api.XdmNode;
import net.sf.saxon.s9api.XdmValue;

import org.ccil.cowan.tagsoup.Parser;
import org.testng.annotations.Test;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

...

  @Test
  public void testXqueryOnHtmlAlongWithTagSoup() throws Exception{

    Configuration cfg = new Configuration();
    cfg.setSchemaValidationMode(Validation.LAX);
    cfg.setValidation(false);
    cfg.setValidationWarnings(true);
    Processor proc = new Processor(cfg);

    URL url = ClassLoader.getSystemResource("thirdstage/exercise/xml/saxon/krx-stock-code-only-10.html");
    XMLReader xr = new org.ccil.cowan.tagsoup.Parser();
    //xr.setFeature(Parser.namespacesFeature, false);
    Source src = new SAXSource(xr, new InputSource(new FileInputStream(new File(url.toURI()))));
    net.sf.saxon.s9api.DocumentBuilder db = proc.newDocumentBuilder();
    XdmNode input = db.build(src);

    String qr = new StringBuilder()
      .append("declare default element namespace \"http://www.w3.org/1999/xhtml\";\n")
      .append("for $x in /html/body[1]/table[1]/tr/td[1]/child::text() return $x").toString();
    XQueryCompiler xqc = proc.newXQueryCompiler();
    XQueryExecutable xqe = xqc.compile(qr);
    XQueryEvaluator xqev = xqe.load();
    xqev.setSource(input.asSource());

    XdmValue result = xqev.evaluate();

    System.out.printf("The result of query contains %1$d items.\n", result.size());
    System.out.printf(result.toString());
  }

...
</code></pre>

<h3 id="marshalling-or-unmarshalling-xml-using-jaxb">Marshalling or Unmarshalling XML using JAXB</h3>

<p>The main entrance class of JAXB is <a href="http://docs.oracle.com/javase/7/docs/api/index.html?javax/xml/bind/JAXBContext.html"><strong><code class="highlighter-rouge">javax.xml.bind.JAXBContext</code></strong></a>. Typically, JAXBContext object is created on the behalf of context object(s) and then, marshaller, unmarshaller and validator can be obtained from the context.</p>

<p>Typical code sample from the API document is as following</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="n">JAXBContext</span> <span class="n">jc</span> <span class="o">=</span> <span class="n">JAXBContext</span><span class="o">.</span><span class="na">newInstance</span><span class="o">(</span> <span class="s">"com.acme.foo"</span> <span class="o">);</span>

   <span class="c1">// unmarshal from foo.xml</span>
   <span class="n">Unmarshaller</span> <span class="n">u</span> <span class="o">=</span> <span class="n">jc</span><span class="o">.</span><span class="na">createUnmarshaller</span><span class="o">();</span>
   <span class="n">FooObject</span> <span class="n">fooObj</span> <span class="o">=</span> <span class="o">(</span><span class="n">FooObject</span><span class="o">)</span><span class="n">u</span><span class="o">.</span><span class="na">unmarshal</span><span class="o">(</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span> <span class="s">"foo.xml"</span> <span class="o">)</span> <span class="o">);</span>

   <span class="c1">// marshal to System.out</span>
   <span class="n">Marshaller</span> <span class="n">m</span> <span class="o">=</span> <span class="n">jc</span><span class="o">.</span><span class="na">createMarshaller</span><span class="o">();</span>
   <span class="n">m</span><span class="o">.</span><span class="na">marshal</span><span class="o">(</span> <span class="n">fooObj</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span> <span class="o">);</span>
</code></pre></div></div>

<p>API documentation of <code class="highlighter-rouge">Marshaller</code> and <code class="highlighter-rouge">Unmarshaller</code> has more sample codes in various circumstances.</p>

<ul>
  <li><a href="http://jaxb.java.net/nonav/2.2.7/docs/api/javax/xml/bind/Unmarshaller.html"><strong><code class="highlighter-rouge">Unmarshaller</code></strong> documentation</a></li>
  <li><a href="http://jaxb.java.net/nonav/2.2.7/docs/api/javax/xml/bind/Marshaller.html"><strong><code class="highlighter-rouge">Marshaller</code></strong> documentation</a></li>
</ul>

<h3 id="serialize-objects-into-json-strings-using-jackson-and-jaxb-annotations">Serialize objects into JSON strings using Jackson and JAXB annotations</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MessierObject</span><span class="o">&gt;</span> <span class="n">messierCatalog</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">MessierObject</span><span class="o">&gt;();</span>

   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">ObjectMapper</span> <span class="n">jacksonMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectMapper</span><span class="o">();</span>

   <span class="kd">static</span><span class="o">{</span>
      <span class="n">jacksonMapper</span><span class="o">.</span><span class="na">registerModule</span><span class="o">(</span><span class="k">new</span> <span class="n">JaxbAnnotationModule</span><span class="o">())</span>
      <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">MapperFeature</span><span class="o">.</span><span class="na">AUTO_DETECT_FIELDS</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
      <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">MapperFeature</span><span class="o">.</span><span class="na">AUTO_DETECT_CREATORS</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
      <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">MapperFeature</span><span class="o">.</span><span class="na">AUTO_DETECT_GETTERS</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
      <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">MapperFeature</span><span class="o">.</span><span class="na">AUTO_DETECT_IS_GETTERS</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
      <span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">MapperFeature</span><span class="o">.</span><span class="na">AUTO_DETECT_SETTERS</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
   <span class="o">}</span>

   <span class="nd">@Nonnull</span>
   <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">MessierObject</span><span class="o">&gt;</span> <span class="nf">getMessierCatalog</span><span class="o">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">messierCatalog</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getMessierCatalogInJsonString</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">{</span>
      <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

      <span class="n">List</span><span class="o">&lt;</span><span class="n">MessierObject</span><span class="o">&gt;</span> <span class="n">mos</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getMessierCatalog</span><span class="o">();</span>

      <span class="n">Writer</span> <span class="n">wr</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringWriter</span><span class="o">();</span>
      <span class="n">jacksonMapper</span><span class="o">.</span><span class="na">writeValue</span><span class="o">(</span><span class="n">wr</span><span class="o">,</span> <span class="n">mos</span><span class="o">);</span>

      <span class="k">return</span> <span class="n">wr</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="nd">@Immutable</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">MessierObject</span><span class="o">{</span>

      <span class="kd">private</span> <span class="n">String</span> <span class="n">number</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">String</span> <span class="n">ngcNumber</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">String</span> <span class="n">commonName</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">String</span> <span class="n">type</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">Double</span> <span class="n">distance</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">String</span> <span class="n">constellation</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">Double</span> <span class="n">apparentMagnitude</span><span class="o">;</span>

      <span class="cm">/**
       * @param number
       * @param ngcNumber
       * @param commonName
       * @param type
       * @param distance
       * @param constellation
       * @param apparentMagnitude
       */</span>
      <span class="nd">@JsonCreator</span>
      <span class="kd">public</span> <span class="nf">MessierObject</span><span class="o">(</span><span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"number"</span><span class="o">)</span> <span class="n">String</span> <span class="n">number</span><span class="o">,</span>
            <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"ngc-number"</span><span class="o">)</span> <span class="n">String</span> <span class="n">ngcNumber</span><span class="o">,</span>
            <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"common-name"</span><span class="o">)</span> <span class="n">String</span> <span class="n">commonName</span><span class="o">,</span>
            <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"type"</span><span class="o">)</span> <span class="n">String</span> <span class="n">type</span><span class="o">,</span>
            <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"distance"</span><span class="o">)</span> <span class="n">Double</span> <span class="n">distance</span><span class="o">,</span>
            <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"constellation"</span><span class="o">)</span> <span class="n">String</span> <span class="n">constellation</span><span class="o">,</span>
            <span class="nd">@JsonProperty</span><span class="o">(</span><span class="s">"apparent-magnitude"</span><span class="o">)</span> <span class="n">Double</span> <span class="n">apparentMagnitude</span><span class="o">){</span>
         <span class="kd">super</span><span class="o">();</span>
         <span class="k">this</span><span class="o">.</span><span class="na">number</span> <span class="o">=</span> <span class="n">number</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">ngcNumber</span> <span class="o">=</span> <span class="n">ngcNumber</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">commonName</span> <span class="o">=</span> <span class="n">commonName</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">type</span> <span class="o">=</span> <span class="n">type</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">distance</span> <span class="o">=</span> <span class="n">distance</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">constellation</span> <span class="o">=</span> <span class="n">constellation</span><span class="o">;</span>
         <span class="k">this</span><span class="o">.</span><span class="na">apparentMagnitude</span> <span class="o">=</span> <span class="n">apparentMagnitude</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getNumber</span><span class="o">(){</span> <span class="k">return</span> <span class="n">number</span><span class="o">;</span> <span class="o">}</span>

      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getNgcNumber</span><span class="o">(){</span> <span class="k">return</span> <span class="n">ngcNumber</span><span class="o">;}</span>

      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getCommonName</span><span class="o">(){</span> <span class="k">return</span> <span class="n">commonName</span><span class="o">;</span> <span class="o">}</span>

      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getType</span><span class="o">(){</span> <span class="k">return</span> <span class="n">type</span><span class="o">;</span> <span class="o">}</span>

      <span class="kd">public</span> <span class="n">Double</span> <span class="nf">getDistance</span><span class="o">(){</span> <span class="k">return</span> <span class="n">distance</span><span class="o">;</span> <span class="o">}</span>

      <span class="kd">public</span> <span class="n">String</span> <span class="nf">getConstellation</span><span class="o">(){</span> <span class="k">return</span> <span class="n">constellation</span><span class="o">;</span> <span class="o">}</span>

      <span class="kd">public</span> <span class="n">Double</span> <span class="nf">getApparentMagnitude</span><span class="o">(){</span> <span class="k">return</span> <span class="n">apparentMagnitude</span><span class="o">;</span> <span class="o">}</span>
   <span class="o">}</span>
</code></pre></div></div>

<ul>
  <li>references
    <ul>
      <li><a href="http://wiki.fasterxml.com/JacksonJAXBAnnotations">Using JAXB annotations with Jackson</a></li>
      <li><a href="https://github.com/FasterXML/jackson-module-jaxb-annotations">jackson-module-jaxb-annotations</a></li>
      <li>Maven artifacts : <a href="http://mvnrepository.com/artifact/com.fasterxml.jackson.module">com.fasterxml.jackson.module</a></li>
    </ul>
  </li>
</ul>

<h3 id="loading-freemarker-template-using-classpath-resource">Loading FreeMarker template using classpath resource</h3>

<p>Locating resources as a classpath resource is very useful, ‘cause it makes the code more portable. When loading template files for FreeMarker, you can set the <code class="highlighter-rouge">ClassTemplateLoader</code> as a <code class="highlighter-rouge">TemplateLoader</code> using code like the following.</p>

<p>In the following code, the <code class="highlighter-rouge">Schedule.ftl</code> is expected to be located in some <code class="highlighter-rouge">foo/bar</code> directory under the root directories of classpath. But it’s not clear, whether the template can be loaded when the file is in the archived file or not.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">...</span>
<span class="kn">import</span> <span class="nn">freemarker.template.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">freemarker.template.Template</span><span class="o">;</span>
<span class="o">...</span>

  <span class="c1">//context or configuration for the FreeMaker, thread-safe without modification after initiation.</span>
  <span class="n">Configuration</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">();</span>
  <span class="n">config</span><span class="o">.</span><span class="na">setWhitespaceStripping</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
  <span class="n">config</span><span class="o">.</span><span class="na">setClassForTemplateLoading</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">(),</span> <span class="s">"/"</span><span class="o">);</span>
  <span class="n">BeansWrapper</span> <span class="n">bw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BeansWrapper</span><span class="o">();</span>
  <span class="n">bw</span><span class="o">.</span><span class="na">setExposeFields</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
  <span class="n">config</span><span class="o">.</span><span class="na">setObjectWrapper</span><span class="o">(</span><span class="n">bw</span><span class="o">);</span>

  <span class="c1">//set static methods and enums as shared variables.</span>
  <span class="n">config</span><span class="o">.</span><span class="na">setSharedVariable</span><span class="o">(</span><span class="s">"statics"</span><span class="o">,</span> <span class="n">BeansWrapper</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">().</span><span class="na">getStaticModels</span><span class="o">());</span>
  <span class="n">config</span><span class="o">.</span><span class="na">setSharedVariable</span><span class="o">(</span><span class="s">"enums"</span><span class="o">,</span> <span class="n">BeansWrapper</span><span class="o">.</span><span class="na">getDefaultInstance</span><span class="o">().</span><span class="na">getEnumModels</span><span class="o">());</span>

  <span class="c1">//template, NOT thread-safe</span>
  <span class="n">Template</span> <span class="n">tpl</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="na">getTemplate</span><span class="o">(</span><span class="s">"foo/bar/Schedule.ftl"</span><span class="o">);</span>
  <span class="n">StringWriter</span> <span class="n">sw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringWriter</span><span class="o">();</span>

  <span class="n">tpl</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">schedule</span><span class="o">,</span> <span class="n">sw</span><span class="o">);</span>
  <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">sw</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>

<span class="o">...</span>
</code></pre></div></div>

<ul>
  <li>more reading
    <ul>
      <li><a href="http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/resources.html#resources-implementations-classpathresource"><code class="highlighter-rouge">ClassPathResource</code> of Spring framework</a></li>
      <li><a href="http://freemarker.org/docs/api/freemarker/template/Configuration.html#setClassForTemplateLoading(java.lang.Class,%20java.lang.String)"><code class="highlighter-rouge">Configuration.setClassForTemplateLoading</code> API</a></li>
      <li><a href="http://freemarker.org/docs/api/index.html?freemarker/cache/ClassTemplateLoader.html"><code class="highlighter-rouge">ClassTemplateLoader</code> API</a></li>
    </ul>
  </li>
</ul>

<h2 id="aop">AOP</h2>

<h3 id="sample-aspect-to-trace-method-call-on-rtmpminaiohandler-in-red5-client">Sample Aspect to trace method call on <code class="highlighter-rouge">RTMPMinaIoHandler</code> in Red5 client</h3>

<ul>
  <li>Red5 client is highly concurrent using Apache MINA. So, tracing internal run-time behavior of it is not so trivial. Using AOP can be a little bit better approach.</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">javax.annotation.Nonnull</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.aspectj.lang.JoinPoint.EnclosingStaticPart</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.JoinPoint.StaticPart</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Aspect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.aspectj.lang.annotation.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Marker</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.MarkerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.lang3.tuple.Pair</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.mina.core.service.IoHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.mina.core.session.IoSession</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.red5.client.net.rtmp.RTMPMinaIoHandler</span><span class="o">;</span>

<span class="cm">/**
 * @author Sangmoon Oh
 * @since 2015-07-21
 */</span>
<span class="nd">@Aspect</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Red5RtmpClientTracingAspect</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">transient</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>

  <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Marker</span> <span class="n">AOP_MARKER</span> <span class="o">=</span> <span class="n">MarkerFactory</span><span class="o">.</span><span class="na">getMarker</span><span class="o">(</span><span class="s">"AOP"</span><span class="o">);</span>

  <span class="cm">/**
   * Traces {@code sessionCreated}, {@code sessionOpened}, {@code sessionClosed}
   * of {@code RTMPMinaIoHandler}.
   *
   * @param joinPt
   * @param enclosingJoinPt
   * @param sess
   * @param msg
   * @see org.red5.client.net.rtmp.RTMPMinaIoHandler#sessionCreated(IoSession)
   * @see org.red5.client.net.rtmp.RTMPMinaIoHandler#sessionOpened(IoSession)
   * @see org.red5.client.net.rtmp.RTMPMinaIoHandler#sessionClosed(IoSession)
   */</span>
  <span class="nd">@Before</span><span class="o">(</span><span class="s">"call(public void IoHandler.message*(..)) &amp;&amp; target(RTMPMinaIoHandler) &amp;&amp; args(sess, msg)"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeCallMinaIoHandlerMessageMethods</span><span class="o">(</span><span class="kd">final</span> <span class="n">StaticPart</span> <span class="n">joinPt</span><span class="o">,</span>
    <span class="kd">final</span> <span class="n">EnclosingStaticPart</span> <span class="n">enclosingJoinPt</span><span class="o">,</span> <span class="n">IoSession</span> <span class="n">sess</span><span class="o">,</span> <span class="n">Object</span> <span class="n">msg</span><span class="o">){</span>
    <span class="n">Pair</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">fromTo</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getFromToMethods</span><span class="o">(</span><span class="n">joinPt</span><span class="o">,</span> <span class="n">enclosingJoinPt</span><span class="o">);</span>

    <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="n">AOP_MARKER</span><span class="o">,</span> <span class="s">"Method Call: {} -&gt; {}, Session ID: {}, Message Type: {}"</span><span class="o">,</span>
        <span class="n">fromTo</span><span class="o">.</span><span class="na">getLeft</span><span class="o">(),</span> <span class="n">fromTo</span><span class="o">.</span><span class="na">getRight</span><span class="o">(),</span> <span class="o">(</span><span class="n">sess</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">sess</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">:</span> <span class="s">""</span><span class="o">,</span>
        <span class="o">(</span><span class="n">msg</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">msg</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">:</span> <span class="s">"null"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**
   * Traces {@code messageReceived} and {@code messageSent} methods of
   * {@code RTMPMinaIoHandler} class.
   *
   * @param joinPt
   * @param enclosingJoinPt
   * @param sess
   * @see org.red5.client.net.rtmp.RTMPMinaIoHandler#messageReceived(IoSession, Object)
   * @see org.red5.client.net.rtmp.RTMPMinaIoHandler#messageSent(IoSession, Object)
   */</span>
  <span class="nd">@Before</span><span class="o">(</span><span class="s">"call(public void IoHandler.session*(..)) &amp;&amp; target(RTMPMinaIoHandler) &amp;&amp; args(sess)"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeCallMinaIoHandlerSessionMethods</span><span class="o">(</span><span class="kd">final</span> <span class="n">StaticPart</span> <span class="n">joinPt</span><span class="o">,</span>
    <span class="kd">final</span> <span class="n">EnclosingStaticPart</span> <span class="n">enclosingJoinPt</span><span class="o">,</span> <span class="n">IoSession</span> <span class="n">sess</span><span class="o">){</span>
    <span class="n">Pair</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">fromTo</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">getFromToMethods</span><span class="o">(</span><span class="n">joinPt</span><span class="o">,</span> <span class="n">enclosingJoinPt</span><span class="o">);</span>

    <span class="n">logger</span><span class="o">.</span><span class="na">debug</span><span class="o">(</span><span class="n">AOP_MARKER</span><span class="o">,</span> <span class="s">"Method Call: {} -&gt; {}, Session ID: {}"</span><span class="o">,</span>
        <span class="n">fromTo</span><span class="o">.</span><span class="na">getLeft</span><span class="o">(),</span> <span class="n">fromTo</span><span class="o">.</span><span class="na">getRight</span><span class="o">(),</span> <span class="o">(</span><span class="n">sess</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">?</span> <span class="n">sess</span><span class="o">.</span><span class="na">getId</span><span class="o">()</span> <span class="o">:</span> <span class="s">""</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Nonnull</span>
  <span class="kd">private</span> <span class="n">Pair</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">getFromToMethods</span><span class="o">(</span><span class="nd">@Nonnull</span> <span class="n">StaticPart</span> <span class="n">joinPt</span><span class="o">,</span> <span class="nd">@Nonnull</span> <span class="n">EnclosingStaticPart</span> <span class="n">enclosingJoinPt</span><span class="o">){</span>
    <span class="n">String</span> <span class="n">from</span> <span class="o">=</span> <span class="n">enclosingJoinPt</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getDeclaringType</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"."</span>
        <span class="o">+</span> <span class="n">enclosingJoinPt</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>
    <span class="n">String</span> <span class="n">to</span> <span class="o">=</span> <span class="n">joinPt</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getDeclaringType</span><span class="o">().</span><span class="na">getSimpleName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"."</span>
        <span class="o">+</span> <span class="n">joinPt</span><span class="o">.</span><span class="na">getSignature</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">Pair</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">from</span><span class="o">,</span> <span class="n">to</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">aop.xml</code> for this Aspect is</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;aspectj&gt;</span>
   <span class="nt">&lt;weaver</span> <span class="na">options=</span><span class="s">"-showWeaveInfo"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">within=</span><span class="s">"org.red5..*"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">within=</span><span class="s">"org.apache.mina..*"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/weaver&gt;</span>

   <span class="nt">&lt;aspects&gt;</span>
      <span class="nt">&lt;aspect</span> <span class="na">name=</span><span class="s">"...Red5RtmpClientTracingAspect"</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/aspects&gt;</span>
<span class="nt">&lt;/aspectj&gt;</span>
</code></pre></div></div>

<h2 id="java-ee">Java EE</h2>

<h3 id="samples-of-deployment-descriptors">Samples of deployment descriptors</h3>

<h4 id="webxml-of-servlet-25"><strong><code class="highlighter-rouge">web.xml</code></strong> of Servlet 2.5</h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/j2ee"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"</span>
  <span class="na">version=</span><span class="s">"2.5"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;display-name&gt;</span>A Simple Application<span class="nt">&lt;/display-name&gt;</span>
  <span class="nt">&lt;context-param&gt;</span>
    <span class="nt">&lt;param-name&gt;</span>Webmaster<span class="nt">&lt;/param-name&gt;</span>
    <span class="nt">&lt;param-value&gt;</span>webmaster@mycorp.com<span class="nt">&lt;/param-value&gt;</span>
  <span class="nt">&lt;/context-param&gt;</span>
  <span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>catalog<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>com.mycorp.CatalogServlet
    <span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
      <span class="nt">&lt;param-name&gt;</span>catalog<span class="nt">&lt;/param-name&gt;</span>
      <span class="nt">&lt;param-value&gt;</span>Spring<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
  <span class="nt">&lt;/servlet&gt;</span>
  <span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>catalog<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/catalog/*<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/servlet-mapping&gt;</span>
  <span class="nt">&lt;session-config&gt;</span>
    <span class="nt">&lt;session-timeout&gt;</span>30<span class="nt">&lt;/session-timeout&gt;</span>
  <span class="nt">&lt;/session-config&gt;</span>
  <span class="nt">&lt;mime-mapping&gt;</span>
    <span class="nt">&lt;extension&gt;</span>pdf<span class="nt">&lt;/extension&gt;</span>
    <span class="nt">&lt;mime-type&gt;</span>application/pdf<span class="nt">&lt;/mime-type&gt;</span>
  <span class="nt">&lt;/mime-mapping&gt;</span>
  <span class="nt">&lt;welcome-file-list&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.jsp<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.htm<span class="nt">&lt;/welcome-file&gt;</span>
  <span class="nt">&lt;/welcome-file-list&gt;</span>
  <span class="nt">&lt;error-page&gt;</span>
    <span class="nt">&lt;error-code&gt;</span>404<span class="nt">&lt;/error-code&gt;</span>
    <span class="nt">&lt;location&gt;</span>/404.html<span class="nt">&lt;/location&gt;</span>
  <span class="nt">&lt;/error-page&gt;</span>
<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></div>

<h2 id="spring-framework">Spring Framework</h2>

<h3 id="beanfactory-and-applicationcontext-types"><code class="highlighter-rouge">BeanFactory</code> and <code class="highlighter-rouge">ApplicationContext</code> types</h3>

<ul>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/beans/factory/BeanFactory.html"><code class="highlighter-rouge">public interface org.springframework.beans.factory.BeanFactory</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/beans/factory/ListableBeanFactory.html"><code class="highlighter-rouge">public interface org.springframework.beans.factory.ListableBeanFactory extends BeanFactory</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/beans/factory/HierarchicalBeanFactory.html"><code class="highlighter-rouge">public interface org.springframework.beans.factory.HierarchicalBeanFactory extends BeanFactory</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/context/ApplicationContext.html"><code class="highlighter-rouge">public interface org.springframework.context.ApplicationContext extends EnvironmentCapable, ListableBeanFactory, HierarchicalBeanFactory, MessageSource, ApplicationEventPublisher, ResourcePatternResolver</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/context/ConfigurableApplicationContext.html"><code class="highlighter-rouge">public interface org.springframework.context.ConfigurableApplicationContext extends ApplicationContext, Lifecycle</code></a></li>
</ul>

<!-- -->

<ul>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/beans/factory/package-summary.html">Package <code class="highlighter-rouge">org.springframework.beans.factory</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/beans/factory/package-tree.html">Hierarchy For Package <code class="highlighter-rouge">org.springframework.beans.factory</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/context/package-summary.html">Package <code class="highlighter-rouge">org.springframework.context</code></a></li>
  <li><a href="http://docs.spring.io/spring/docs/3.1.x/javadoc-api/index.html?org/springframework/context/package-tree.html">Hierarchy For Package <code class="highlighter-rouge">org.springframework.context</code></a></li>
</ul>

<h3 id="boilerplate-for-spring-configuration">Boilerplate for Spring configuration</h3>

<h4 id="spring-basexml"><code class="highlighter-rouge">spring-base.xml</code></h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="na">xmlns:aop=</span><span class="s">"http://www.springframework.org/schema/aop"</span> <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
  <span class="na">xmlns:tx=</span><span class="s">"http://www.springframework.org/schema/tx"</span> <span class="na">xmlns:task=</span><span class="s">"http://www.springframework.org/schema/task"</span>
  <span class="na">xmlns:lang=</span><span class="s">"http://www.springframework.org/schema/lang"</span> <span class="na">xmlns:util=</span><span class="s">"http://www.springframework.org/schema/util"</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">"
      http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
      http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
      http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
      http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
      http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd
      http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
      http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;description&gt;</span>
    Spring container configuration
  <span class="nt">&lt;/description&gt;</span>

   <span class="c">&lt;!-- @TODO Use SpEL to be able to specify custom property files using System Property --&gt;</span>
  <span class="nt">&lt;util:properties</span> <span class="na">id=</span><span class="s">"config"</span> <span class="na">location=</span><span class="s">"classpath:.../.../.../config.properties"</span> <span class="nt">/&gt;</span>
   <span class="c">&lt;!-- For more on property-placeholder, refer https://github.com/spring-projects/spring-framework/blob/4.0.x/spring-context/src/main/resources/org/springframework/context/config/spring-context-4.0.xsd#L22 --&gt;</span>
  <span class="nt">&lt;context:property-placeholder</span> <span class="na">properties-ref=</span><span class="s">"config"</span>
    <span class="na">system-properties-mode=</span><span class="s">"ENVIRONMENT"</span> <span class="na">local-override=</span><span class="s">"false"</span> <span class="na">ignore-unresolvable=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>

   <span class="c">&lt;!-- enabling Auto-wiring --&gt;</span>
  <span class="nt">&lt;context:annotation-config&gt;</span>
    <span class="nt">&lt;description&gt;</span>Activates various annotations to be detected in bean classes such
      as @Required, @Autowired, @Resource or et. al.
    <span class="nt">&lt;/description&gt;</span>
  <span class="nt">&lt;/context:annotation-config&gt;</span>

   <span class="c">&lt;!-- enabling Auto-registering --&gt;</span>
   <span class="c">&lt;!-- @Note Do NOT use auto-registering of Spring beans as possible.
   &lt;context:component-scan base-package=""/&gt;
   --&gt;</span>

   <span class="c">&lt;!-- enabling LTW of AspectJ --&gt;</span>
   <span class="c">&lt;!-- @Note Use compile-time weaving as possible.
   &lt;context:load-time-weaver/&gt;
   --&gt;</span>

   <span class="c">&lt;!-- enabling @Async, @Scheduled ... --&gt;</span>
   <span class="c">&lt;!-- For more, refer http://docs.spring.io/spring-framework/docs/4.0.x/spring-framework-reference/html/scheduling.html --&gt;</span>
  <span class="nt">&lt;task:annotation-driven</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"mbeanServer"</span> <span class="na">class=</span><span class="s">"org.springframework.jmx.support.MBeanServerFactoryBean"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"locateExistingServerIfPossible"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

   <span class="c">&lt;!-- Data access and transaction --&gt;</span>
   <span class="c">&lt;!-- @TODO Add alternative usage of DBCP 1.4 in case of Java SE 1.6 --&gt;</span>
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"dataSource"</span> <span class="na">class=</span><span class="s">"org.apache.commons.dbcp2.BasicDataSource"</span> <span class="na">destroy-method=</span><span class="s">"close"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      https://commons.apache.org/proper/commons-dbcp/api-2.1/org/apache/commons/dbcp2/BasicDataSource.html
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jmxName"</span> <span class="na">value=</span><span class="s">"${jmx.domain}:type=fabric,name=dataSource"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"driverClassName"</span> <span class="na">value=</span><span class="s">"${datasource.jdbcDriver}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"url"</span> <span class="na">value=</span><span class="s">"${datasource.jdbcUrl}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"username"</span> <span class="na">value=</span><span class="s">"${datasource.user}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">value=</span><span class="s">"${datasource.password}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultAutoCommit"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxTotal"</span> <span class="na">value=</span><span class="s">"${datasource.maxTotal}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxIdle"</span> <span class="na">value=</span><span class="s">"${datasource.maxIdle}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"minIdle"</span> <span class="na">value=</span><span class="s">"${datasource.minIdle}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span> <span class="na">value=</span><span class="s">"${datasource.initSize}"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"transactionManager"</span> <span class="na">class=</span><span class="s">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/jdbc/datasource/DataSourceTransactionManager.html
      http://mybatis.github.io/spring/transactions.html
      Included in spring-jdbc artifact
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataSource"</span> <span class="na">ref=</span><span class="s">"dataSource"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultTimeout"</span> <span class="na">value=</span><span class="s">"120"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"nestedTransactionAllowed"</span> <span class="na">value=</span><span class="s">"false"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- default is true --&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

   <span class="c">&lt;!-- @Note Use 'aspectj' mode as possible to enable in-class call and private methods with @Transactional --&gt;</span>
   <span class="c">&lt;!-- For more on @Transactional in 'aspectj' mode, refer https://gerrydevstory.com/2014/06/28/spring-declarative-transaction-management-with-jdk-proxy-vs-aspectj --&gt;</span>
  <span class="nt">&lt;tx:annotation-driven</span> <span class="na">transaction-manager=</span><span class="s">"transactionManager"</span> <span class="na">mode=</span><span class="s">"aspectj"</span>
    <span class="na">proxy-target-class=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"databaseIdProvider"</span> <span class="na">class=</span><span class="s">"org.apache.ibatis.mapping.VendorDatabaseIdProvider"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      DatabaseIdProvider should be set to SqlSessionFactory directly by setDatabaseIdProvider.
      The databaseIdProvider element in the configuration XML will be ignored when the XML is set to
      SqlSessionFactory.

      http://mybatis.github.io/spring/factorybean.html#Properties
      http://mybatis.github.io/mybatis-3/apidocs/reference/org/apache/ibatis/mapping/VendorDatabaseIdProvider.html
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"properties"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;props&gt;</span>
        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"Microsoft SQL Server"</span><span class="nt">&gt;</span>ms<span class="nt">&lt;/prop&gt;</span>
        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"Oracle"</span><span class="nt">&gt;</span>oracle<span class="nt">&lt;/prop&gt;</span>
        <span class="nt">&lt;prop</span> <span class="na">key=</span><span class="s">"MySQL"</span><span class="nt">&gt;</span>mysql<span class="nt">&lt;/prop&gt;</span>
      <span class="nt">&lt;/props&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"sqlSessionFactory"</span> <span class="na">class=</span><span class="s">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      http://mybatis.github.io/spring/factorybean.html
      http://mybatis.github.io/spring/apidocs/reference/org/mybatis/spring/SqlSessionFactoryBean.html
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataSource"</span> <span class="na">ref=</span><span class="s">"dataSource"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"configLocation"</span> <span class="na">value=</span><span class="s">"${mybatis.configLocation}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"databaseIdProvider"</span> <span class="na">ref=</span><span class="s">"databaseIdProvider"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

   <span class="c">&lt;!-- Scanner for Mybatis SQL Mappers --&gt;</span>
  <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"sqlMapperScanner"</span> <span class="na">class=</span><span class="s">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>
      http://mybatis.github.io/spring/apidocs/reference/org/mybatis/spring/mapper/MapperScannerConfigurer.html
      This class seems to have problem when using with placeholder.
    <span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"processPropertyPlaceHolders"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"basePackage"</span> <span class="na">value=</span><span class="s">"${mybatis.mappers.basePackage}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"sqlSessionFactoryBeanName"</span> <span class="na">value=</span><span class="s">"sqlSessionFactory"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"annotationClass"</span> <span class="na">value=</span><span class="s">"org.springframework.stereotype.Repository"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/bean&gt;</span>

   <span class="c">&lt;!-- JXM --&gt;</span>
  <span class="nt">&lt;beans</span> <span class="na">profile=</span><span class="s">"!production"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;description&gt;</span>JMX configuration - to disable JMX, use '-Dspring.profiles.active=production'<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"jmxAttributeSource"</span> <span class="na">class=</span><span class="s">"org.springframework.jmx.export.annotation.AnnotationJmxAttributeSource"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"manualJmxExporter"</span> <span class="na">class=</span><span class="s">"org.springframework.jmx.export.MBeanExporter"</span>
      <span class="na">lazy-init=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;description&gt;</span>
        http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/jmx/export/MBeanExporter.html
      <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"beans"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;map&gt;</span>
          <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"${jmx.domain}:type=fabric,name=transactionManager"</span> <span class="na">value-ref=</span><span class="s">"transactionManager"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"${jmx.domain}:type=fabric,name=databaseIdProvider"</span> <span class="na">value-ref=</span><span class="s">"databaseIdProvider"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"${jmx.domain}:type=fabric,name=sqlSessionFactory"</span> <span class="na">value-ref=</span><span class="s">"sqlSessionFactory"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"${jmx.domain}:type=fabric,name=sqlMapperScanner"</span> <span class="na">value-ref=</span><span class="s">"sqlMapperScanner"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/map&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"server"</span> <span class="na">ref=</span><span class="s">"mbeanServer"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>

    <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"autodetectJmxExporter"</span> <span class="na">class=</span><span class="s">"org.springframework.jmx.export.MBeanExporter"</span>
      <span class="na">lazy-init=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"assembler"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.jmx.export.assembler.MetadataMBeanInfoAssembler"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"attributeSource"</span> <span class="na">ref=</span><span class="s">"jmxAttributeSource"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"namingStrategy"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.springframework.jmx.export.naming.MetadataNamingStrategy"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;description&gt;</span>
            http://docs.spring.io/spring/docs/4.0.x/javadoc-api/org/springframework/jmx/export/naming/MetadataNamingStrategy.html
          <span class="nt">&lt;/description&gt;</span>
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"attributeSource"</span> <span class="na">ref=</span><span class="s">"jmxAttributeSource"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultDomain"</span> <span class="na">value=</span><span class="s">"${jmx.domain}"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"autodetect"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"autodetectModeName"</span> <span class="na">value=</span><span class="s">"AUTODETECT_ASSEMBLER"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"excludedBeans"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;list&gt;</span>
          <span class="nt">&lt;value&gt;</span>dataSource<span class="nt">&lt;/value&gt;</span>
        <span class="nt">&lt;/list&gt;</span>
      <span class="nt">&lt;/property&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"server"</span> <span class="na">ref=</span><span class="s">"mbeanServer"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/bean&gt;</span>
  <span class="nt">&lt;/beans&gt;</span>

<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<h4 id="mybatisxml"><code class="highlighter-rouge">mybatis.xml</code></h4>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="cp">&lt;!DOCTYPE configuration
    PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
<span class="nt">&lt;configuration&gt;</span>

  <span class="c">&lt;!--
  Some top level elements of configuration will be IGNORED
  when configured via org.mybatis.spring.SqlSessionFactoryBean.setConfigLocation
  method.

  Explicitly documented element is 'environments' (which includes 'dataSource'
  and 'transactionManager' elements).
  Other elements that seem to be IGNORED include 'databaseIdProvider'.

  But 'settings', 'typeAliases' and 'mappers' are documented NOT to be ignored.

  For more, refer http://mybatis.github.io/spring/factorybean.html#Properties
  --&gt;</span>


  <span class="c">&lt;!-- http://mybatis.github.io/mybatis-3/configuration.html#settings --&gt;</span>
  <span class="nt">&lt;settings&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"cacheEnabled"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- default : true --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"useColumnLabel"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- default : true --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"useGeneratedKeys"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- default : false --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"autoMappingUnknownColumnBehavior"</span> <span class="na">value=</span><span class="s">"FAILING"</span><span class="nt">/&gt;</span> <span class="c">&lt;!-- needs MyBatis 3.4.0 or higher --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"defaultExecutorType"</span> <span class="na">value=</span><span class="s">"SIMPLE"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- SIMPLE(default), REUSE or BATCH --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"mapUnderscoreToCamelCase"</span> <span class="na">value=</span><span class="s">"true"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- default : false --&gt;</span>
    <span class="nt">&lt;setting</span> <span class="na">name=</span><span class="s">"logImpl"</span> <span class="na">value=</span><span class="s">"SLF4J"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/settings&gt;</span>

  <span class="nt">&lt;typeHandlers&gt;</span>
    <span class="nt">&lt;typeHandler</span> <span class="na">handler=</span><span class="s">"com.skcc.nexcore.vas.support.mybatis.BooleanYnHandler"</span>
      <span class="na">javaType=</span><span class="s">"boolean"</span> <span class="na">jdbcType=</span><span class="s">"CHAR"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/typeHandlers&gt;</span>
<span class="nt">&lt;/configuration&gt;</span>
</code></pre></div></div>

<h4 id="configproperties"><code class="highlighter-rouge">config.properties</code></h4>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">jmx.domain</span> <span class="p">=</span> <span class="s">myapp</span>
<span class="py">datasource.jdbcDriver</span> <span class="p">=</span> <span class="s">com.microsoft.sqlserver.jdbc.SQLServerDriver</span>
<span class="py">datasource.jdbcUrl</span> <span class="p">=</span> <span class="s">jdbc:...</span>
<span class="py">datasource.user</span> <span class="p">=</span> <span class="s">SECU</span>
<span class="py">datasource.password</span> <span class="p">=</span> <span class="s">nexcore</span>
<span class="py">datasource.maxTotal</span> <span class="p">=</span> <span class="s">5</span>
<span class="py">datasource.maxIdle</span> <span class="p">=</span> <span class="s">5</span>
<span class="py">datasource.minIdle</span> <span class="p">=</span> <span class="s">0</span>
<span class="py">datasource.initSize</span> <span class="p">=</span> <span class="s">2</span>
<span class="py">mybatis.configLocation</span> <span class="p">=</span> <span class="s">classpath:.../mybatis.xml</span>
<span class="py">mybatis.mappers.basePackage</span> <span class="p">=</span> <span class="s">myapp.persistence</span>
</code></pre></div></div>

<h3 id="check-properties-of-an-object-using-spring-el">Check properties of an object using Spring EL</h3>

<p>Spring 3.0 introduced powerful expression language (<a href="http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/expressions.html">SpEL</a>). We can make a simple utility method to check the properties of an object in any type using SpEL</p>

<p>The following is simple sample.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.expression.ExpressionParser</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.expression.spel.standard.SpelExpressionParser</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.expression.spel.support.StandardEvaluationContext</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectInspector</span> <span class="o">{</span>

   <span class="c1">// SpelExpressionParser is thread-safe which is explicitly documented in API doc.</span>
   <span class="kd">private</span> <span class="n">ExpressionParser</span> <span class="n">expressionParser</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SpelExpressionParser</span><span class="o">();</span>

   <span class="cm">/**
    * Evaluate the given boolean expression against the specified object.
    *
    * This method is thread-safe.
    *
    * @param obj object to check
    * @param booleanExpr boolean expression to evaluate which should be valid with SpEL
    * @param clazz the type of the &lt;code&gt;obj&lt;/code&gt;
    */</span>
   <span class="kd">public</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="kt">boolean</span> <span class="nf">checkBooleanExpression</span><span class="o">(</span><span class="n">T</span> <span class="n">obj</span><span class="o">,</span> <span class="n">String</span> <span class="n">booleanExpr</span><span class="o">,</span> <span class="n">Class</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">clazz</span><span class="o">){</span>

      <span class="n">StandardEvaluationContext</span> <span class="n">cntx</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StandardEvaluationContext</span><span class="o">(</span><span class="n">obj</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">expressionParser</span><span class="o">.</span><span class="na">parseExpression</span><span class="o">(</span><span class="n">booleanExpr</span><span class="o">).</span><span class="na">getValue</span><span class="o">(</span><span class="n">cntx</span><span class="o">,</span> <span class="n">Boolean</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Note that the method consists of only two line. With the following unit test sample, you can imagine the robustness of the above method.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectInspectorTest</span> <span class="o">{</span>

   <span class="kd">private</span> <span class="kd">static</span> <span class="n">ObjectInspector</span> <span class="n">inspector</span><span class="o">;</span>

   <span class="nd">@BeforeClass</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setUpBeforeClass</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
      <span class="n">inspector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ObjectInspector</span><span class="o">();</span>
   <span class="o">}</span>

   <span class="nd">@Test</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCheckBooleanExpression</span><span class="o">(){</span>

      <span class="n">Person</span> <span class="n">p1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"Peter"</span><span class="o">,</span> <span class="n">Person</span><span class="o">.</span><span class="na">Gender</span><span class="o">.</span><span class="na">MALE</span><span class="o">,</span> <span class="o">(</span><span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="mi">71</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">23</span><span class="o">)).</span><span class="na">getTime</span><span class="o">());</span>
      <span class="n">Person</span> <span class="n">p2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"Jane"</span><span class="o">,</span> <span class="n">Person</span><span class="o">.</span><span class="na">Gender</span><span class="o">.</span><span class="na">FEMALE</span><span class="o">,</span> <span class="o">(</span><span class="k">new</span> <span class="n">GregorianCalendar</span><span class="o">(</span><span class="mi">74</span><span class="o">,</span> <span class="mi">5</span><span class="o">,</span> <span class="mi">9</span><span class="o">)).</span><span class="na">getTime</span><span class="o">());</span>

      <span class="c1">//first eye-checking</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p1</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">p2</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

      <span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">inspector</span><span class="o">.</span><span class="na">checkBooleanExpression</span><span class="o">(</span><span class="n">p1</span><span class="o">,</span> <span class="s">"'Peter'.equals(#root.name)"</span><span class="o">,</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
      <span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">inspector</span><span class="o">.</span><span class="na">checkBooleanExpression</span><span class="o">(</span><span class="n">p2</span><span class="o">,</span> <span class="s">"#root.birthday.month == 5"</span><span class="o">,</span> <span class="n">Person</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>

      <span class="n">Rectangle</span> <span class="n">rct1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Rectangle</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">6</span><span class="o">);</span>

      <span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">inspector</span><span class="o">.</span><span class="na">checkBooleanExpression</span><span class="o">(</span><span class="n">rct1</span><span class="o">,</span> <span class="s">"#root.width == 5"</span><span class="o">,</span> <span class="n">Rectangle</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
      <span class="n">Assert</span><span class="o">.</span><span class="na">assertFalse</span><span class="o">(</span><span class="n">inspector</span><span class="o">.</span><span class="na">checkBooleanExpression</span><span class="o">(</span><span class="n">rct1</span><span class="o">,</span> <span class="s">"#root.height == 5"</span><span class="o">,</span> <span class="n">Rectangle</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
      <span class="n">Assert</span><span class="o">.</span><span class="na">assertTrue</span><span class="o">(</span><span class="n">inspector</span><span class="o">.</span><span class="na">checkBooleanExpression</span><span class="o">(</span><span class="n">rct1</span><span class="o">,</span> <span class="s">"#root.area == 15"</span><span class="o">,</span> <span class="n">Rectangle</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
   <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Person</span><span class="o">{</span>

   <span class="kd">enum</span> <span class="n">Gender</span><span class="o">{</span> <span class="n">MALE</span><span class="o">,</span> <span class="n">FEMALE</span> <span class="o">}</span>

   <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">Gender</span> <span class="n">gender</span><span class="o">;</span>
   <span class="kd">private</span> <span class="n">Date</span> <span class="n">birthday</span><span class="o">;</span>

   <span class="kd">public</span> <span class="nf">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">Gender</span> <span class="n">gender</span><span class="o">,</span> <span class="n">Date</span> <span class="n">date</span><span class="o">){</span>
      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="n">gender</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">birthday</span> <span class="o">=</span> <span class="n">date</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">name</span><span class="o">;</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="n">Gender</span> <span class="nf">getGender</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">gender</span><span class="o">;</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="n">Date</span> <span class="nf">getBirthday</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">birthday</span><span class="o">;</span> <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">(){</span>
      <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"Name : %1$s, Gender : %2$s, Birthday : %3$tF"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">gender</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">birthday</span><span class="o">);</span>
   <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Rectangle</span><span class="o">{</span>

   <span class="kd">private</span> <span class="kt">int</span> <span class="n">x1</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kt">int</span> <span class="n">x2</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kt">int</span> <span class="n">y1</span><span class="o">;</span>
   <span class="kd">private</span> <span class="kt">int</span> <span class="n">y2</span><span class="o">;</span>

   <span class="kd">public</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">int</span> <span class="n">x1</span><span class="o">,</span> <span class="kt">int</span> <span class="n">x2</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y1</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y2</span><span class="o">){</span>
      <span class="k">if</span><span class="o">(</span><span class="n">x1</span> <span class="o">&gt;</span> <span class="n">x2</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">"x1 should not greater than x2"</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">y1</span> <span class="o">&gt;</span> <span class="n">y2</span><span class="o">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">(</span><span class="s">"y1 should not greater than y2"</span><span class="o">);</span>

      <span class="k">this</span><span class="o">.</span><span class="na">x1</span> <span class="o">=</span> <span class="n">x1</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">x2</span> <span class="o">=</span> <span class="n">x2</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">y1</span> <span class="o">=</span> <span class="n">y1</span><span class="o">;</span>
      <span class="k">this</span><span class="o">.</span><span class="na">y2</span> <span class="o">=</span> <span class="n">y2</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getX1</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x1</span><span class="o">;</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getX2</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">x2</span><span class="o">;</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getY1</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">y1</span><span class="o">;</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getY2</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">y2</span><span class="o">;</span> <span class="o">}</span>

   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getWidth</span><span class="o">(){</span> <span class="k">return</span> <span class="o">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="o">);</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getHeight</span><span class="o">(){</span> <span class="k">return</span> <span class="o">(</span><span class="n">y2</span> <span class="o">-</span> <span class="n">y1</span><span class="o">);</span> <span class="o">}</span>
   <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getArea</span><span class="o">(){</span> <span class="k">return</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getWidth</span><span class="o">())*(</span><span class="k">this</span><span class="o">.</span><span class="na">getHeight</span><span class="o">());</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="mixing-spring-property-placeholder-configurer-and-spel">Mixing Spring property placeholder configurer and SpEL</h3>

<ul>
  <li>Properties file : <strong><code class="highlighter-rouge">props-server.properties</code></strong></li>
</ul>

<div class="language-properties highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">server.threadpool.mbeanName</span><span class="p">=</span><span class="s">"bean:name=threadPool2"</span>
<span class="py">server.threadpool.corePoolSize</span><span class="p">=</span><span class="s">T(Math).min(T(Runtime).getRuntime().availableProcessors(), 6)</span>
<span class="py">server.threadpool.maxPoolSize</span><span class="p">=</span><span class="s">10</span>
<span class="py">server.threadpool.queueCapacity</span><span class="p">=</span><span class="s">25</span>
<span class="py">server.threadpool.keepAliveSeconds</span><span class="p">=</span><span class="s">10</span>
<span class="py">server.threadpool.threadNamePrefix</span><span class="p">=</span><span class="s">"toolServerThread-"</span>
</code></pre></div></div>

<ul>
  <li>Spring configuration file : <strong><code class="highlighter-rouge">spring-context.xml</code></strong></li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
 <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
 <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
 <span class="na">xmlns:util=</span><span class="s">"http://www.springframework.org/schema/util"</span>
 <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
  http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"</span><span class="nt">&gt;</span>

 <span class="nt">&lt;context:property-placeholder</span> <span class="na">location=</span><span class="s">"classpath:sample/server/case2/props-server.properties"</span><span class="nt">/&gt;</span>

 <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"jmxExporter"</span>
  <span class="na">class=</span><span class="s">"org.springframework.jmx.export.MBeanExporter"</span> <span class="na">lazy-init=</span><span class="s">"false"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"beans"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;map&gt;</span>
    <span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">"#{${server.threadpool.mbeanName}}"</span> <span class="na">value-ref=</span><span class="s">"threadPool"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/map&gt;</span>
  <span class="nt">&lt;/property&gt;</span>
 <span class="nt">&lt;/bean&gt;</span>

 <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"threadPool"</span>
  <span class="na">class=</span><span class="s">"org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor"</span>
  <span class="na">lazy-init=</span><span class="s">"false"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"corePoolSize"</span> <span class="na">value=</span><span class="s">"#{${server.threadpool.corePoolSize}}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxPoolSize"</span> <span class="na">value=</span><span class="s">"#{${server.threadpool.maxPoolSize}}"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"threadNamePrefix"</span> <span class="na">value=</span><span class="s">"#{${server.threadpool.threadNamePrefix}}"</span><span class="nt">/&gt;</span>
 <span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<h2 id="mybatis">MyBatis</h2>

<h3 id="changing-entityresolver-for-mapper-xml">Changing <code class="highlighter-rouge">EntityResolver</code> for mapper XML</h3>

<ol>
  <li>Create <strong>custom DTD</strong> extending <a href="http://mybatis.org/dtd/mybatis-3-mapper.dtd"><code class="highlighter-rouge">http://mybatis.org/dtd/mybatis-3-mapper.dtd</code></a> and locate it in a JAR file</li>
  <li>Create <strong>custom <code class="highlighter-rouge">EntityResolver</code></strong> extending <a href="http://mybatis.github.io/mybatis-3/xref/org/apache/ibatis/builder/xml/XMLMapperEntityResolver.html"><code class="highlighter-rouge">org.apache.ibatis.builder.xml.XMLMapperEntityResolver</code></a></li>
  <li>Create <strong>custom <code class="highlighter-rouge">XMLConfigureBuilder</code></strong> extending <code class="highlighter-rouge">org.apache.ibatis.builder.xml.XMLConfigBuilder</code> and <strong>custom <code class="highlighter-rouge">XMLMapperBuilder</code></strong> extending <code class="highlighter-rouge">org.apache.ibatis.builder.xml.XMLMapperBuilder</code></li>
  <li>Create <strong>custom <code class="highlighter-rouge">SqlSessionFactoryBuilder</code></strong> extending <code class="highlighter-rouge">org.apache.ibatis.session.SqlSessionFactoryBuilder</code></li>
  <li>Create <strong>custom <code class="highlighter-rouge">SqlSessionFactoryBean</code></strong> extending <code class="highlighter-rouge">org.mybatis.spring.SqlSessionFactoryBean</code></li>
</ol>

<ul>
  <li>Consideration
    <ul>
      <li><code class="highlighter-rouge">org.apache.ibatis.scripting.xmltags.XMLLanguageDriver</code></li>
      <li><code class="highlighter-rouge">org.apache.ibatis.builder.annotation.MapperAnnotationBuilder</code></li>
      <li><code class="highlighter-rouge">org.apache.ibatis.scripting.defaults.RawLanguageDriver</code></li>
    </ul>
  </li>
</ul>

<h3 id="using-ognl-expressions-within-sql-statement-of-mybatis">Using OGNL expressions within SQL statement of MyBatis</h3>

<p>You can use OGNL expressions with MyBatis using <strong><code class="highlighter-rouge">bind</code></strong> element.
For more, refer <a href="http://www.mybatis.org/mybatis-3/dynamic-sql.html#bind">http://www.mybatis.org/mybatis-3/dynamic-sql.html#bind</a></p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"insertVisitor"</span> <span class="na">parameterType=</span><span class="s">"face.domain.Visitor"</span>
      <span class="na">useGeneratedKeys=</span><span class="s">"true"</span> <span class="na">keyProperty=</span><span class="s">"visitor.id"</span> <span class="na">keyColumn=</span><span class="s">"id"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;bind</span> <span class="na">name=</span><span class="s">"isValid"</span> <span class="na">value=</span><span class="s">"(visitor.isValid())? 'Y' : 'N'"</span><span class="nt">/&gt;</span>
insert vas_visitor (
 name, is_valid, valid_from, valid_to, pass_no,
 company, tel_no, prsnnl_id, remarks,
 last_update_by, last_update_at
)values(
 #{visitor.name}, #{isValid}, #{visitor.validFrom}, #{visitor.validTo}, #{visitor.passNo},
 #{visitor.company}, #{visitor.telephone}, #{visitor.personnelId}, #{visitor.remarks},
 'appl', replace(replace(replace(convert(varchar(19),getdate(),120),'-',''),':',''),' ','')
);
   <span class="nt">&lt;/insert&gt;</span>
</code></pre></div></div>

<h3 id="custom-mybatis-type-handler-sample">Custom MyBatis type handler sample</h3>

<p>Most of databases don’t support intrinsic <code class="highlighter-rouge">boolean</code> datatype. JDBC supports implicit and automatic conversion between <code class="highlighter-rouge">true/false</code> and <code class="highlighter-rouge">'1'/'0'</code> or <code class="highlighter-rouge">1/0</code>.</p>

<p>But <code class="highlighter-rouge">'1'/'0'</code> is not so intuitive and other value pairs such as <code class="highlighter-rouge">'Y'/'N'</code>, <code class="highlighter-rouge">'y'/'n'</code>, <code class="highlighter-rouge">'YES'/'NO'</code>, <code class="highlighter-rouge">'T'/'F'</code>, or <code class="highlighter-rouge">'true'/'false'</code> would be preferred. Even the combination of those pairs could be wanted for liberated people. The following type handler can be used for this purpose.</p>

<ul>
  <li>References
    <ul>
      <li><a href="http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#getBoolean(java.lang.String)"><code class="highlighter-rouge">java.sql.ResultSet.getBoolean(String)</code> API</a></li>
      <li><a href="https://github.com/mybatis/mybatis-3/blob/master/src/main/java/org/apache/ibatis/type/BooleanTypeHandler.java">The source of <code class="highlighter-rouge">BooleanTypeHandler</code> built-in MyBatis</a></li>
    </ul>
  </li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Maps automatically {@code boolean} type property in Java object and string type column in database.
 * &lt;p&gt;
 * The column handled by this class is expected to be {@code CHAR} or {@code VACHAR} datatype.
 * &lt;p&gt;
 * The mapping for {@code NULL} value in database can be configured in constructor.
 *
 * @see &lt;code&gt;https://github.com/mybatis/mybatis-3/blob/master/src/main/java/org/apache/ibatis/type/BooleanTypeHandler.java&lt;/code&gt;
 */</span>
<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">BooleanStringHandler</span> <span class="kd">extends</span> <span class="n">BaseTypeHandler</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;{</span>

   <span class="kd">private</span> <span class="kd">final</span> <span class="n">org</span><span class="o">.</span><span class="na">slf4j</span><span class="o">.</span><span class="na">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">getClass</span><span class="o">());</span>

   <span class="cm">/**
    * the list strings that represent {@code true}
    */</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">trueValues</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>

   <span class="cm">/**
    * the list strings that represent {@code false}
    */</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">falseValues</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>

   <span class="cm">/**
    * determines whether {@code NULL} value in database will be mapped to {@code false} or not.
    */</span>
   <span class="kd">private</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">isNullFalse</span><span class="o">;</span>

   <span class="cm">/**
    * At least one string value should be given for each list of {@code true} values and
    * list of {@code false} values.
    * &lt;p&gt;
    * If more than two values are specified, the first value in either list will be used
    * when inserting or updating the database column.
    *
    * @param trueValues
    * @param falseValues
    */</span>
   <span class="kd">public</span> <span class="nf">BooleanStringHandler</span><span class="o">(</span><span class="nd">@NotEmpty</span> <span class="n">String</span><span class="o">[]</span> <span class="n">trueValues</span><span class="o">,</span> <span class="nd">@NotEmpty</span> <span class="n">String</span><span class="o">[]</span> <span class="n">falseValues</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">isNullFalse</span><span class="o">){</span>
      <span class="n">Validate</span><span class="o">.</span><span class="na">isTrue</span><span class="o">(!</span><span class="n">ArrayUtils</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">trueValues</span><span class="o">),</span>
         <span class="s">"At least one string for true should included."</span><span class="o">);</span>
      <span class="n">Validate</span><span class="o">.</span><span class="na">isTrue</span><span class="o">(!</span><span class="n">ArrayUtils</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">(</span><span class="n">falseValues</span><span class="o">),</span>
         <span class="s">"At least one string for false should included."</span><span class="o">);</span>

      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">trueValues</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span> <span class="k">this</span><span class="o">.</span><span class="na">trueValues</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">trueValues</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span> <span class="o">}</span>
      <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">falseValues</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="o">;</span> <span class="n">i</span><span class="o">++){</span> <span class="k">this</span><span class="o">.</span><span class="na">falseValues</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">falseValues</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span> <span class="o">}</span>
      <span class="k">this</span><span class="o">.</span><span class="na">isNullFalse</span> <span class="o">=</span> <span class="n">isNullFalse</span><span class="o">;</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setNonNullParameter</span><span class="o">(</span><span class="n">PreparedStatement</span> <span class="n">ps</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">,</span>
      <span class="n">Boolean</span> <span class="n">parameter</span><span class="o">,</span> <span class="n">JdbcType</span> <span class="n">jdbcType</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">{</span>

      <span class="k">if</span><span class="o">(</span><span class="n">parameter</span><span class="o">){</span> <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">trueValues</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span> <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span> <span class="n">ps</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">falseValues</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span> <span class="o">}</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="n">Boolean</span> <span class="nf">getNullableResult</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">,</span> <span class="n">String</span> <span class="n">columnName</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">{</span>

      <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">columnName</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="k">return</span> <span class="o">!</span><span class="n">isNullFalse</span><span class="o">;</span> <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">getBooleanFromStringValue</span><span class="o">(</span><span class="n">value</span><span class="o">);</span> <span class="o">}</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="n">Boolean</span> <span class="nf">getNullableResult</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">{</span>

      <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">columnIndex</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="k">return</span> <span class="o">!</span><span class="n">isNullFalse</span><span class="o">;</span> <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">getBooleanFromStringValue</span><span class="o">(</span><span class="n">value</span><span class="o">);</span> <span class="o">}</span>
   <span class="o">}</span>

   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="n">Boolean</span> <span class="nf">getNullableResult</span><span class="o">(</span><span class="n">CallableStatement</span> <span class="n">cs</span><span class="o">,</span> <span class="kt">int</span> <span class="n">columnIndex</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">{</span>

      <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">cs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="n">columnIndex</span><span class="o">);</span>
      <span class="k">if</span><span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span> <span class="k">return</span> <span class="o">!</span><span class="n">isNullFalse</span><span class="o">;</span> <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">getBooleanFromStringValue</span><span class="o">(</span><span class="n">value</span><span class="o">);</span> <span class="o">}</span>
   <span class="o">}</span>

   <span class="nd">@Nonnull</span>
   <span class="kd">private</span> <span class="n">Boolean</span> <span class="nf">getBooleanFromStringValue</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">){</span>
      <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">trueValues</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">value</span><span class="o">)){</span> <span class="k">return</span> <span class="n">Boolean</span><span class="o">.</span><span class="na">TRUE</span><span class="o">;</span> <span class="o">}</span>
      <span class="k">else</span> <span class="nf">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">falseValues</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">value</span><span class="o">)){</span> <span class="k">return</span> <span class="n">Boolean</span><span class="o">.</span><span class="na">FALSE</span><span class="o">;</span> <span class="o">}</span>
      <span class="k">else</span><span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">logger</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"The value('{}') in database is not among expected values."</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
         <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalStateException</span><span class="o">(</span><span class="s">"The value in database is not among expected values."</span><span class="o">);</span>
      <span class="o">}</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The conversion which permits only <code class="highlighter-rouge">'Y'/'N'</code> pair (simplest except <code class="highlighter-rouge">'1'/'0'</code>) can be handled by the following one. Note that relational database world prefers short(but intuitive enough) and capitalized value for enumerations</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Maps automatically {@code boolean} type property in Java object and 'Y' or 'N' value in database column.
 * &lt;p&gt;
 * 'Y' or 'N' value in database will be converted to {@code true} or {@code false} value in Java
 * object and vice versa.
 * &lt;p&gt;
 * {@code NULL} value in database will be converted to {@code false}.
 *
 */</span>
<span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">BooleanYnHandler</span> <span class="kd">extends</span> <span class="n">BooleanStringHandler</span><span class="o">{</span>

   <span class="kd">public</span> <span class="nf">BooleanYnHandler</span><span class="o">(){</span>
      <span class="kd">super</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">"Y"</span><span class="o">},</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="s">"N"</span><span class="o">},</span> <span class="kc">true</span><span class="o">);</span>

   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>To use the above handler, it should be registered MyBatis configuration file</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;typeHandlers&gt;</span>
    <span class="nt">&lt;typeHandler</span> <span class="na">handler=</span><span class="s">"support.mybatis.BooleanYnHandler"</span> <span class="na">javaType=</span><span class="s">"boolean"</span> <span class="na">jdbcType=</span><span class="s">"CHAR"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/typeHandlers&gt;</span>
</code></pre></div></div>

<p>When the <code class="highlighter-rouge">Member</code> class has <code class="highlighter-rouge">boolean isActive</code> filed and the corresponding column is <code class="highlighter-rouge">CHAR(1) TB_MEMBER.IS_ACTIVE</code> in database. MyBatis SQL mapper would like the following.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;insert</span> <span class="na">id=</span><span class="s">"insertMember"</span> <span class="na">resultType=</span><span class="s">"Member"</span><span class="nt">&gt;</span>
insert tb_member (id, name, is_active, registered_at)
values (#{member.id}, #{member.isActive,javaType=boolean,jdbcType=CHAR}, #{member.registeredAt})
<span class="nt">&lt;/insert&gt;</span>

<span class="nt">&lt;select</span> <span class="na">id=</span><span class="s">"selectMemberById"</span><span class="nt">&gt;</span>
select id, name, is_active as isActive, registered_at as registerAt
from tb_member
where id = #{id}
<span class="nt">&lt;/select&gt;</span>
</code></pre></div></div>

<h2 id="activemq">ActiveMQ</h2>

<h3 id="loading-embedded-activemq-broker-and-web-console-respectively">Loading embedded ActiveMQ broker and web console respectively</h3>

<h4 id="maven-depedency-configuration">Maven depedency configuration</h4>

<h4 id="broker">Broker</h4>

<h4 id="web-console">Web console</h4>

<h2 id="jetty">Jetty</h2>

<h3 id="loading-embedded-jetty-9-with-jsp-and-jstl-support">Loading embedded Jetty 9 with JSP and JSTL support</h3>

<p>The dependent libraries to enable JSP and JSTL support for Jetty are much various according to the versions or modes of Jetty. There are <code class="highlighter-rouge">org.eclipse.jetty:apache-jsp</code>, <code class="highlighter-rouge">org.eclipse.jetty:apache-jstl</code>, <code class="highlighter-rouge">org.apache.taglibs:taglibs-standard-spec</code>, <code class="highlighter-rouge">org.apache.taglibs:taglibs-standard-impl</code> or much more modules.</p>

<p>But these make there can be too many possible configurations and make it difficult to setup correct configuration.</p>

<p>As of Jetty 9, the most simple configuration is using only <strong><code class="highlighter-rouge">org.eclipse.jetty:jetty-jsp</code></strong> with no other JSP/JSTL related modules.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      ...
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jetty-server<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>${jetty.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jetty-webapp<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>${jetty.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jetty-jsp<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>${jetty.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jetty-annotations<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>${jetty.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jetty-jmx<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>${jetty.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.eclipse.jetty<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jetty-deploy<span class="nt">&lt;/artifactId&gt;</span>
         <span class="nt">&lt;version&gt;</span>${jetty.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      ...
</code></pre></div></div>

<p>The Java code to setup and load Jetty without <code class="highlighter-rouge">jetty.xml</code> is like the following.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      <span class="o">...</span>
   <span class="c1">//final InetAddress addr = InetAddress.getLocalHost();</span>
   <span class="kd">final</span> <span class="n">InetAddress</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">InetAddress</span><span class="o">.</span><span class="na">getLoopbackAddress</span><span class="o">();</span>
   <span class="kd">final</span> <span class="kt">int</span> <span class="n">port</span> <span class="o">=</span> <span class="mi">8080</span><span class="o">;</span>
   <span class="kd">final</span> <span class="n">Server</span> <span class="n">jetty</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Server</span><span class="o">(</span><span class="k">new</span> <span class="n">InetSocketAddress</span><span class="o">(</span><span class="n">addr</span><span class="o">,</span> <span class="n">port</span><span class="o">));</span>
   <span class="n">jetty</span><span class="o">.</span><span class="na">addBean</span><span class="o">(</span><span class="k">new</span> <span class="n">MBeanContainer</span><span class="o">(</span><span class="n">ManagementFactory</span><span class="o">.</span><span class="na">getPlatformMBeanServer</span><span class="o">()));</span>
   <span class="n">Configuration</span><span class="o">.</span><span class="na">ClassList</span><span class="o">.</span><span class="na">serverDefault</span><span class="o">(</span><span class="n">jetty</span><span class="o">).</span><span class="na">addBefore</span><span class="o">(</span><span class="s">"org.eclipse.jetty.webapp.JettyWebXmlConfiguration"</span>
         <span class="o">,</span> <span class="s">"org.eclipse.jetty.annotations.AnnotationConfiguration"</span><span class="o">);</span>
   <span class="kd">final</span> <span class="n">String</span> <span class="n">webAppPath</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">getenv</span><span class="o">(</span><span class="s">"TEMP"</span><span class="o">)</span> <span class="o">+</span> <span class="s">"/activemq-web-console.war"</span><span class="o">;</span>
   <span class="kd">final</span> <span class="n">WebAppContext</span> <span class="n">webApp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">WebAppContext</span><span class="o">(</span><span class="n">webAppPath</span><span class="o">,</span> <span class="s">"/admin"</span><span class="o">);</span>
   <span class="n">webApp</span><span class="o">.</span><span class="na">setExtractWAR</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
   <span class="n">webApp</span><span class="o">.</span><span class="na">setLogUrlOnStart</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
   <span class="n">webApp</span><span class="o">.</span><span class="na">setAttribute</span><span class="o">(</span><span class="s">"org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern"</span><span class="o">,</span>
         <span class="s">".*/[^/]*servlet-api-[^/]*\\.jar$|.*/javax.servlet.jsp.jstl-.*\\.jar$|.*/[^/]*taglibs.*\\.jar$"</span> <span class="o">);</span>
   <span class="n">jetty</span><span class="o">.</span><span class="na">setHandler</span><span class="o">(</span><span class="n">webApp</span><span class="o">);</span>
   <span class="n">jetty</span><span class="o">.</span><span class="na">setStopAtShutdown</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
   <span class="n">jetty</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
   <span class="c1">//jetty.join();</span>
   <span class="o">...</span>
</code></pre></div></div>

<ul>
  <li>Readings
    <ul>
      <li><a href="http://stackoverflow.com/questions/17685330/how-do-you-get-embedded-jetty-9-to-successfully-resolve-the-jstl-uri">How do you get embedded Jetty 9 to successfully resolve the JSTL URI?</a>(Jul 16 ‘13)</li>
      <li><a href="https://github.com/jetty-project/embedded-jetty-jsp">Example: Embedded Jetty w/ JSP Support</a></li>
    </ul>
  </li>
</ul>

<h2 id="maven">Maven</h2>

<h3 id="simple-pom">Simple POM</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>thirdstage.exercise<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>solidity<span class="nt">&lt;/artifactId&gt;</span>
   <span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>

   <span class="nt">&lt;prerequisites&gt;</span>
      <span class="nt">&lt;maven&gt;</span>3.0<span class="nt">&lt;/maven&gt;</span>
   <span class="nt">&lt;/prerequisites&gt;</span>

   <span class="nt">&lt;properties&gt;</span>
      <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
      <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
      <span class="nt">&lt;skipTests&gt;</span>false<span class="nt">&lt;/skipTests&gt;</span>
      <span class="nt">&lt;maven.deploy.skip&gt;</span>true<span class="nt">&lt;/maven.deploy.skip&gt;</span>
      <span class="nt">&lt;maven.javadoc.skip&gt;</span>false<span class="nt">&lt;/maven.javadoc.skip&gt;</span>
      <span class="nt">&lt;maven.site.deploy.skip&gt;</span>true<span class="nt">&lt;/maven.site.deploy.skip&gt;</span>
      <span class="nt">&lt;findbugs.skip&gt;</span>true<span class="nt">&lt;/findbugs.skip&gt;</span>
      <span class="nt">&lt;checkstyle.skip&gt;</span>true<span class="nt">&lt;/checkstyle.skip&gt;</span>
      <span class="nt">&lt;java.version&gt;</span>1.7<span class="nt">&lt;/java.version&gt;</span>
      <span class="nt">&lt;slf4j.version&gt;</span>1.7.21<span class="nt">&lt;/slf4j.version&gt;</span>
      <span class="nt">&lt;logback.version&gt;</span>1.1.7<span class="nt">&lt;/logback.version&gt;</span>
      <span class="nt">&lt;junit.version&gt;</span>4.8.2<span class="nt">&lt;/junit.version&gt;</span>
      <span class="nt">&lt;testng.version&gt;</span>6.9.10<span class="nt">&lt;/testng.version&gt;</span>
      <span class="nt">&lt;commons.lang3.version&gt;</span>3.4<span class="nt">&lt;/commons.lang3.version&gt;</span>
      <span class="nt">&lt;spring.version&gt;</span>4.0.9.RELEASE<span class="nt">&lt;/spring.version&gt;</span>
      <span class="nt">&lt;mybatis.version&gt;</span>3.4.0<span class="nt">&lt;/mybatis.version&gt;</span>
      <span class="nt">&lt;jackson.version&gt;</span>2.7.4<span class="nt">&lt;/jackson.version&gt;</span>
   <span class="nt">&lt;/properties&gt;</span>

   <span class="nt">&lt;repositories&gt;</span>
      <span class="nt">&lt;repository&gt;</span>
         <span class="nt">&lt;snapshots&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
         <span class="nt">&lt;/snapshots&gt;</span>
         <span class="nt">&lt;id&gt;</span>central2<span class="nt">&lt;/id&gt;</span>
         <span class="nt">&lt;url&gt;</span>http://repo2.maven.org/maven2/<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;/repository&gt;</span>
      <span class="nt">&lt;repository&gt;</span>
         <span class="nt">&lt;snapshots&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
         <span class="nt">&lt;/snapshots&gt;</span>
         <span class="nt">&lt;id&gt;</span>java.net.public<span class="nt">&lt;/id&gt;</span>
         <span class="nt">&lt;url&gt;</span>https://maven.java.net/content/groups/public/<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;/repository&gt;</span>
   <span class="nt">&lt;/repositories&gt;</span>

   <span class="nt">&lt;pluginRepositories&gt;</span>
      <span class="nt">&lt;pluginRepository&gt;</span>
         <span class="nt">&lt;snapshots&gt;</span>
            <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
         <span class="nt">&lt;/snapshots&gt;</span>
         <span class="nt">&lt;id&gt;</span>central2<span class="nt">&lt;/id&gt;</span>
         <span class="nt">&lt;url&gt;</span>http://repo2.maven.org/maven2/<span class="nt">&lt;/url&gt;</span>
      <span class="nt">&lt;/pluginRepository&gt;</span>
   <span class="nt">&lt;/pluginRepositories&gt;</span>

   <span class="nt">&lt;reporting&gt;</span>
      <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;/plugins&gt;</span>
   <span class="nt">&lt;/reporting&gt;</span>

   <span class="nt">&lt;build&gt;</span>
      <span class="nt">&lt;plugins&gt;</span>
         <span class="nt">&lt;plugin&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.basepom.maven<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>duplicate-finder-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;executions&gt;</span>
               <span class="nt">&lt;execution&gt;</span>
                  <span class="nt">&lt;id&gt;</span>find-duplicate-classes<span class="nt">&lt;/id&gt;</span>
                  <span class="nt">&lt;phase&gt;</span>prepare-package<span class="nt">&lt;/phase&gt;</span>
                  <span class="nt">&lt;goals&gt;</span>
                     <span class="nt">&lt;goal&gt;</span>check<span class="nt">&lt;/goal&gt;</span>
                  <span class="nt">&lt;/goals&gt;</span>
               <span class="nt">&lt;/execution&gt;</span>
            <span class="nt">&lt;/executions&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
               <span class="c">&lt;!-- For more, refer https://github.com/basepom/duplicate-finder-maven-plugin/wiki --&gt;</span>
               <span class="nt">&lt;skip&gt;</span>false<span class="nt">&lt;/skip&gt;</span>
               <span class="nt">&lt;checkCompileClasspath&gt;</span>false<span class="nt">&lt;/checkCompileClasspath&gt;</span>
               <span class="nt">&lt;checkRuntimeClasspath&gt;</span>true<span class="nt">&lt;/checkRuntimeClasspath&gt;</span>
               <span class="nt">&lt;checkTestClasspath&gt;</span>false<span class="nt">&lt;/checkTestClasspath&gt;</span>
               <span class="nt">&lt;ignoredResourcePatterns&gt;</span>
                  <span class="nt">&lt;ignoredResourcePattern&gt;</span>about.html<span class="nt">&lt;/ignoredResourcePattern&gt;</span>
               <span class="nt">&lt;/ignoredResourcePatterns&gt;</span>
               <span class="nt">&lt;ignoredDependencies&gt;</span>
                  <span class="nt">&lt;dependency&gt;</span>
                     <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
                     <span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
                  <span class="nt">&lt;/dependency&gt;</span>
               <span class="nt">&lt;/ignoredDependencies&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
         <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;/plugins&gt;</span>
      <span class="nt">&lt;pluginManagement&gt;</span>
         <span class="nt">&lt;plugins&gt;</span>
            <span class="c">&lt;!-- core --&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
               <span class="nt">&lt;inherited&gt;</span>true<span class="nt">&lt;/inherited&gt;</span>
               <span class="nt">&lt;configuration&gt;</span>
                  <span class="nt">&lt;source&gt;</span>${java.version}<span class="nt">&lt;/source&gt;</span>
                  <span class="nt">&lt;target&gt;</span>${java.version}<span class="nt">&lt;/target&gt;</span>
               <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>maven-site-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>3.0<span class="nt">&lt;/version&gt;</span>
               <span class="nt">&lt;dependencies&gt;</span>
                  <span class="nt">&lt;dependency&gt;</span>
                     <span class="nt">&lt;groupId&gt;</span>org.apache.maven.wagon<span class="nt">&lt;/groupId&gt;</span>
                     <span class="nt">&lt;artifactId&gt;</span>wagon-ssh<span class="nt">&lt;/artifactId&gt;</span>
                     <span class="nt">&lt;version&gt;</span>2.0<span class="nt">&lt;/version&gt;</span>
                  <span class="nt">&lt;/dependency&gt;</span>
               <span class="nt">&lt;/dependencies&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="c">&lt;!-- packaging --&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
               <span class="nt">&lt;configuration&gt;</span>
                  <span class="c">&lt;!-- For more on Maven archiver, refer http://maven.apache.org/shared/maven-archiver/index.html --&gt;</span>
                  <span class="nt">&lt;archive&gt;</span>
                     <span class="nt">&lt;addMavenDescriptor&gt;</span>false<span class="nt">&lt;/addMavenDescriptor&gt;</span>
                     <span class="nt">&lt;forced&gt;</span>true<span class="nt">&lt;/forced&gt;</span>
                     <span class="nt">&lt;index&gt;</span>true<span class="nt">&lt;/index&gt;</span>
                     <span class="nt">&lt;manifest&gt;</span>
                        <span class="nt">&lt;addClasspath&gt;</span>false<span class="nt">&lt;/addClasspath&gt;</span>
                        <span class="nt">&lt;addDefaultImplementationEntries&gt;</span>true<span class="nt">&lt;/addDefaultImplementationEntries&gt;</span>
                        <span class="nt">&lt;addDefaultSpecificationEntries&gt;</span>true<span class="nt">&lt;/addDefaultSpecificationEntries&gt;</span>
                        <span class="nt">&lt;addExtensions&gt;</span>false<span class="nt">&lt;/addExtensions&gt;</span>
                        <span class="nt">&lt;classpathLayoutType&gt;</span>simple<span class="nt">&lt;/classpathLayoutType&gt;</span>
                     <span class="nt">&lt;/manifest&gt;</span>
                     <span class="nt">&lt;manifestEntries&gt;</span>
                        <span class="nt">&lt;Source-Revision&gt;</span>${project.svn.revision}<span class="nt">&lt;/Source-Revision&gt;</span>
                     <span class="nt">&lt;/manifestEntries&gt;</span>
                  <span class="nt">&lt;/archive&gt;</span>
               <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="c">&lt;!-- reporting --&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>2.8<span class="nt">&lt;/version&gt;</span>
               <span class="nt">&lt;configuration&gt;</span>
                  <span class="nt">&lt;additionalJOptions&gt;</span>
                     <span class="nt">&lt;additionalJOption&gt;</span>-Xms128m<span class="nt">&lt;/additionalJOption&gt;</span>
                  <span class="nt">&lt;/additionalJOptions&gt;</span>
                  <span class="nt">&lt;docencoding&gt;</span>${project.reporting.outputEncoding}<span class="nt">&lt;/docencoding&gt;</span>
                  <span class="nt">&lt;encoding&gt;</span>${project.build.sourceEncoding}<span class="nt">&lt;/encoding&gt;</span>
                  <span class="nt">&lt;doctitle&gt;</span>${project.name} ${project.version} API<span class="nt">&lt;/doctitle&gt;</span>
                  <span class="nt">&lt;windowtitle&gt;</span>${project.name} ${project.version} API<span class="nt">&lt;/windowtitle&gt;</span>
                  <span class="nt">&lt;links&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://docs.oracle.com/javase/7/docs/api/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://docs.oracle.com/javaee/6/api/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://jsr-305.googlecode.com/svn/trunk/javadoc/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://docs.jboss.org/hibernate/beanvalidation/spec/1.1/api/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://docs.jboss.org/hibernate/validator/5.2/api/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://commons.apache.org/proper/commons-collections/javadocs/api-release/<span class="nt">&lt;/link&gt;</span>
                     <span class="nt">&lt;link&gt;</span>http://docs.spring.io/spring/docs/4.0.x/javadoc-api/<span class="nt">&lt;/link&gt;</span>
                  <span class="nt">&lt;/links&gt;</span>
                  <span class="nt">&lt;show&gt;</span>projected<span class="nt">&lt;/show&gt;</span>
                  <span class="nt">&lt;splitindex&gt;</span>true<span class="nt">&lt;/splitindex&gt;</span>
               <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>maven-checkstyle-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>2.7<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.basepom.maven<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>duplicate-finder-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>1.2.1<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="c">&lt;!-- tools supporting --&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="c">&lt;!-- http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html --&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>maven-eclipse-plugin<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>2.9<span class="nt">&lt;/version&gt;</span>
               <span class="nt">&lt;configuration&gt;</span>
                  <span class="c">&lt;!-- the next two item doesn't work on m2e. m2e has its own confgiruation in Eclipse preferences --&gt;</span>
                  <span class="nt">&lt;downloadJavadocs&gt;</span>true<span class="nt">&lt;/downloadJavadocs&gt;</span>
                  <span class="nt">&lt;downloadSources&gt;</span>true<span class="nt">&lt;/downloadSources&gt;</span>
                  <span class="nt">&lt;forceRecheck&gt;</span>false<span class="nt">&lt;/forceRecheck&gt;</span>
               <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
            <span class="nt">&lt;plugin&gt;</span>
               <span class="nt">&lt;groupId&gt;</span>org.eclipse.m2e<span class="nt">&lt;/groupId&gt;</span>
               <span class="nt">&lt;artifactId&gt;</span>lifecycle-mapping<span class="nt">&lt;/artifactId&gt;</span>
               <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
               <span class="nt">&lt;configuration&gt;</span>
                  <span class="nt">&lt;lifecycleMappingMetadata&gt;</span>
                     <span class="nt">&lt;pluginExecutions&gt;</span>
                        <span class="nt">&lt;pluginExecution&gt;</span>
                           <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                              <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                              <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
                              <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                              <span class="nt">&lt;goals&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
                              <span class="nt">&lt;/goals&gt;</span>
                           <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                           <span class="nt">&lt;action&gt;</span>
                              <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                           <span class="nt">&lt;/action&gt;</span>
                        <span class="nt">&lt;/pluginExecution&gt;</span>
                        <span class="nt">&lt;pluginExecution&gt;</span>
                           <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                              <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                              <span class="nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="nt">&lt;/artifactId&gt;</span>
                              <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                              <span class="nt">&lt;goals&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>run<span class="nt">&lt;/goal&gt;</span>
                              <span class="nt">&lt;/goals&gt;</span>
                           <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                           <span class="nt">&lt;action&gt;</span>
                              <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                           <span class="nt">&lt;/action&gt;</span>
                        <span class="nt">&lt;/pluginExecution&gt;</span>
                        <span class="nt">&lt;pluginExecution&gt;</span>
                           <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                              <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
                              <span class="nt">&lt;artifactId&gt;</span>aspectj-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                              <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                              <span class="nt">&lt;goals&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>test-compile<span class="nt">&lt;/goal&gt;</span>
                              <span class="nt">&lt;/goals&gt;</span>
                           <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                           <span class="nt">&lt;action&gt;</span>
                              <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                           <span class="nt">&lt;/action&gt;</span>
                        <span class="nt">&lt;/pluginExecution&gt;</span>
                        <span class="nt">&lt;pluginExecution&gt;</span>
                           <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                              <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
                              <span class="nt">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                              <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                              <span class="nt">&lt;goals&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>parse-version<span class="nt">&lt;/goal&gt;</span>
                              <span class="nt">&lt;/goals&gt;</span>
                           <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                           <span class="nt">&lt;action&gt;</span>
                              <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                           <span class="nt">&lt;/action&gt;</span>
                        <span class="nt">&lt;/pluginExecution&gt;</span>
                        <span class="nt">&lt;pluginExecution&gt;</span>
                           <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                              <span class="nt">&lt;groupId&gt;</span>net.alchim31.maven<span class="nt">&lt;/groupId&gt;</span>
                              <span class="nt">&lt;artifactId&gt;</span>scala-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                              <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                              <span class="nt">&lt;goals&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>add-source<span class="nt">&lt;/goal&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
                                 <span class="nt">&lt;goal&gt;</span>testCompile<span class="nt">&lt;/goal&gt;</span>
                              <span class="nt">&lt;/goals&gt;</span>
                           <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                           <span class="nt">&lt;action&gt;</span>
                              <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                           <span class="nt">&lt;/action&gt;</span>
                        <span class="nt">&lt;/pluginExecution&gt;</span>
                     <span class="nt">&lt;/pluginExecutions&gt;</span>
                  <span class="nt">&lt;/lifecycleMappingMetadata&gt;</span>
               <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/plugin&gt;</span>
         <span class="nt">&lt;/plugins&gt;</span>
      <span class="nt">&lt;/pluginManagement&gt;</span>
   <span class="nt">&lt;/build&gt;</span>

   <span class="nt">&lt;dependencies&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>com.google.code.findbugs<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jsr305<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>javax.inject<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>javax.inject<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.testng<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>testng<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
         <span class="nt">&lt;artifactId&gt;</span>commons-lang3<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
   <span class="nt">&lt;/dependencies&gt;</span>
   <span class="nt">&lt;dependencyManagement&gt;</span>
      <span class="nt">&lt;dependencies&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="c">&lt;!-- JSR 305 annotations which includes also JCIP annotations --&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>com.google.code.findbugs<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jsr305<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>2.0.3<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="c">&lt;!-- JSR 330 annotations --&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>javax.inject<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>javax.inject<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="c">&lt;!-- JSR 349 annotations --&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>1.1.0.Final<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="c">&lt;!-- Hibernate Validator --&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>5.2.4.Final<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${logback.version}<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.codehaus.janino<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>janino<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>2.7.8<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${junit.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.testng<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>testng<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${testng.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.mockito<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>mockito-core<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${mockito.version}<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
         <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>commons-lang3<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>${commons.lang3.version}<span class="nt">&lt;/version&gt;</span>
         <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;/dependencies&gt;</span>
   <span class="nt">&lt;/dependencyManagement&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<h3 id="typical-sample-of-parent-pom">Typical sample of parent POM</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- For more on Maven project descriptor, refer http://maven.apache.org/ref/2.2.1/maven-model/maven.html --&gt;</span>
  <span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>thridstage<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>thridstage-framework-parent<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>3.0.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;packaging&gt;</span>pom<span class="nt">&lt;/packaging&gt;</span>

  <span class="nt">&lt;name&gt;</span>Thirdstage Framework<span class="nt">&lt;/name&gt;</span>
  <span class="nt">&lt;url&gt;</span>...<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;inceptionYear&gt;</span>2012<span class="nt">&lt;/inceptionYear&gt;</span>
  <span class="nt">&lt;organization&gt;</span>
    <span class="nt">&lt;name&gt;</span>...<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>...<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/organization&gt;</span>

  <span class="nt">&lt;prerequisites&gt;</span>
    <span class="nt">&lt;maven&gt;</span>3.0<span class="nt">&lt;/maven&gt;</span>
  <span class="nt">&lt;/prerequisites&gt;</span>

  <span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="nt">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="nt">&lt;/project.reporting.outputEncoding&gt;</span>
    <span class="nt">&lt;graphviz.home&gt;</span>${env.GRAPHVIZ_HOME}<span class="nt">&lt;/graphviz.home&gt;</span>
    <span class="nt">&lt;skipTests&gt;</span>false<span class="nt">&lt;/skipTests&gt;</span>
    <span class="nt">&lt;maven.deploy.skip&gt;</span>true<span class="nt">&lt;/maven.deploy.skip&gt;</span>
    <span class="nt">&lt;maven.javadoc.skip&gt;</span>false<span class="nt">&lt;/maven.javadoc.skip&gt;</span>
    <span class="nt">&lt;maven.site.deploy.skip&gt;</span>true<span class="nt">&lt;/maven.site.deploy.skip&gt;</span>
    <span class="nt">&lt;findbugs.skip&gt;</span>true<span class="nt">&lt;/findbugs.skip&gt;</span>
    <span class="nt">&lt;checkstyle.skip&gt;</span>true<span class="nt">&lt;/checkstyle.skip&gt;</span>
    <span class="nt">&lt;java.version&gt;</span>1.7<span class="nt">&lt;/java.version&gt;</span>
    <span class="nt">&lt;slf4j.version&gt;</span>1.7.21<span class="nt">&lt;/slf4j.version&gt;</span>
    <span class="nt">&lt;logback.version&gt;</span>1.1.7<span class="nt">&lt;/logback.version&gt;</span>
    <span class="nt">&lt;junit.version&gt;</span>4.8.2<span class="nt">&lt;/junit.version&gt;</span>
    <span class="nt">&lt;testng.version&gt;</span>6.9.10<span class="nt">&lt;/testng.version&gt;</span>
    <span class="nt">&lt;commons.lang3.version&gt;</span>3.4<span class="nt">&lt;/commons.lang3.version&gt;</span>
    <span class="nt">&lt;spring.version&gt;</span>4.0.9.RELEASE<span class="nt">&lt;/spring.version&gt;</span>
    <span class="nt">&lt;mybatis.version&gt;</span>3.4.0<span class="nt">&lt;/mybatis.version&gt;</span>
    <span class="nt">&lt;jackson.version&gt;</span>2.7.4<span class="nt">&lt;/jackson.version&gt;</span>
    <span class="nt">&lt;dependency.locations.enabled&gt;</span>false<span class="nt">&lt;/dependency.locations.enabled&gt;</span>
    <span class="nt">&lt;antrun.echos.properties&gt;</span>true<span class="nt">&lt;/antrun.echos.properties&gt;</span>
    <span class="nt">&lt;scm.url.base&gt;</span>...<span class="nt">&lt;/scm.url.base&gt;</span>
  <span class="nt">&lt;/properties&gt;</span>

  <span class="nt">&lt;issueManagement&gt;</span>
    <span class="nt">&lt;system&gt;</span>Redmine<span class="nt">&lt;/system&gt;</span>
    <span class="nt">&lt;url&gt;</span>.../issues<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/issueManagement&gt;</span>
  <span class="nt">&lt;scm&gt;</span>
    <span class="nt">&lt;connection&gt;</span>scm:svn:http:...<span class="nt">&lt;/connection&gt;</span>
    <span class="nt">&lt;url&gt;</span>http:...<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/scm&gt;</span>
  <span class="nt">&lt;distributionManagement&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>...<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>...<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>...<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;snapshotRepository&gt;</span>
      <span class="nt">&lt;id&gt;</span>...<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>...<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>...<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/snapshotRepository&gt;</span>
    <span class="nt">&lt;site&gt;</span>
      <span class="nt">&lt;id&gt;</span>...<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>sftp://.../${project.version}<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/site&gt;</span>
  <span class="nt">&lt;/distributionManagement&gt;</span>

  <span class="nt">&lt;repositories&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>thirdstag-releases<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>...<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;releases&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/releases&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>true<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>thirdstage-snapshots<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>...<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>central2<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://repo2.maven.org/maven2/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>maven2-repository.dev.java.net<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>Java.net Repository for Maven<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://download.java.net/maven/2/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>thirdparty<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name&gt;</span>3rd-party Repository<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://repo.expertvill.net/nexus/content/repositories/thirdparty<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
    <span class="nt">&lt;repository&gt;</span>
      <span class="nt">&lt;id&gt;</span>evolvis-3rdparty<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://maven-repo.evolvis.org/3rdparty<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
  <span class="nt">&lt;/repositories&gt;</span>
  <span class="nt">&lt;pluginRepositories&gt;</span>
    <span class="nt">&lt;pluginRepository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>central2<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://repo2.maven.org/maven2/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/pluginRepository&gt;</span>
    <span class="nt">&lt;pluginRepository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>spring-beandoc<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://spring-beandoc.sourceforge.net/repo<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/pluginRepository&gt;</span>
    <span class="nt">&lt;pluginRepository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>tmatesoft-releases<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://maven.tmatesoft.com/content/repositories/releases/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/pluginRepository&gt;</span>
    <span class="nt">&lt;pluginRepository&gt;</span>
      <span class="nt">&lt;releases&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/releases&gt;</span>
      <span class="nt">&lt;id&gt;</span>tmatesoft-snapshots<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://maven.tmatesoft.com/content/repositories/snapshots/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/pluginRepository&gt;</span>
    <span class="nt">&lt;pluginRepository&gt;</span>
      <span class="nt">&lt;id&gt;</span>evolvis-3rdparty<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://maven-repo.evolvis.org/3rdparty<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/pluginRepository&gt;</span>
    <span class="nt">&lt;pluginRepository&gt;</span>
      <span class="nt">&lt;snapshots&gt;</span>
        <span class="nt">&lt;enabled&gt;</span>false<span class="nt">&lt;/enabled&gt;</span>
      <span class="nt">&lt;/snapshots&gt;</span>
      <span class="nt">&lt;id&gt;</span>elca-services<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;url&gt;</span>http://el4.elca-services.ch/el4j/maven2repository<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/pluginRepository&gt;</span>
  <span class="nt">&lt;/pluginRepositories&gt;</span>

  <span class="nt">&lt;reporting&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-checkstyle-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;configLocation&gt;</span>../thirdstage.framework.parent/src/main/config/checkstyle/checkstyle.xml<span class="nt">&lt;/configLocation&gt;</span>
          <span class="nt">&lt;propertyExpansion&gt;</span>parent.basedir=../thirdstage.framework.parent<span class="nt">&lt;/propertyExpansion&gt;</span>
          <span class="nt">&lt;failsOnError&gt;</span>false<span class="nt">&lt;/failsOnError&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>findbugs-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;effort&gt;</span>Max<span class="nt">&lt;/effort&gt;</span>
          <span class="nt">&lt;threshold&gt;</span>Low<span class="nt">&lt;/threshold&gt;</span>
          <span class="nt">&lt;onlyAnalyze&gt;</span>thirdstage.framework.*<span class="nt">&lt;/onlyAnalyze&gt;</span>
          <span class="nt">&lt;excludeFilterFile&gt;</span>../thirdstage.framework.parent/src/main/config/findbugs/findbugs-exclude.xml<span class="nt">&lt;/excludeFilterFile&gt;</span>
          <span class="nt">&lt;fork&gt;</span>true<span class="nt">&lt;/fork&gt;</span>
          <span class="nt">&lt;timeout&gt;</span>600000<span class="nt">&lt;/timeout&gt;</span>
          <span class="nt">&lt;maxHeap&gt;</span>512<span class="nt">&lt;/maxHeap&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/reporting&gt;</span>

  <span class="nt">&lt;build&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-enforcer-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>enforce-requirements<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>enforce<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="c">&lt;!-- For more standard rules, refer http://maven.apache.org/enforcer/enforcer-rules/ --&gt;</span>
              <span class="nt">&lt;rules&gt;</span>
                <span class="nt">&lt;requireJavaVersion&gt;</span>
                  <span class="nt">&lt;version&gt;</span>${java.version}<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/requireJavaVersion&gt;</span>
                <span class="nt">&lt;requireMavenVersion&gt;</span>
                  <span class="nt">&lt;version&gt;</span>3.0<span class="nt">&lt;/version&gt;</span>
                <span class="nt">&lt;/requireMavenVersion&gt;</span>
                <span class="nt">&lt;requireEnvironmentVariable&gt;</span>
                  <span class="nt">&lt;variableName&gt;</span>OPENCV_DIR<span class="nt">&lt;/variableName&gt;</span>
                  <span class="nt">&lt;variableName&gt;</span>MINGW_HOME<span class="nt">&lt;/variableName&gt;</span>
                <span class="nt">&lt;/requireEnvironmentVariable&gt;</span>
              <span class="nt">&lt;/rules&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>attach-javadocs<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>test-jar<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="c">&lt;!-- Unveil the commented block when jar-with-dependencies is necessary
        &lt;executions&gt;
          &lt;execution&gt;
            &lt;id&gt;jar-with-deps&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;single&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;descriptorRefs&gt;
                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;
              &lt;/descriptorRefs&gt;
            &lt;/configuration&gt;
          &lt;/execution&gt;
        &lt;/executions&gt;
        --&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>validate-properties<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>validate<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>run<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;failOnError&gt;</span>true<span class="nt">&lt;/failOnError&gt;</span>
              <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"validate-properties"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">"if"</span> <span class="na">classname=</span><span class="s">"ise.antelope.tasks.IfTask"</span> <span class="na">classpathref=</span><span class="s">"maven.plugin.classpath"</span> <span class="nt">/&gt;</span>

                <span class="nt">&lt;if</span> <span class="na">name=</span><span class="s">"antrun.echos.properties"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>Head revision of the project "${project.artifactId}" is
                    ${project.svn.revision}.<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.artifactId : ${project.artifactId}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.basedir : ${project.basedir}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.resources.0.directory : ${project.resources.0.directory}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.resources[0].directory : ${project.resources[0].directory}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.parent : ${project.parent}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.parent.groupId : ${project.parent.groupId}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.parent.artifactId : ${project.parent.artifactId}<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>project.parent.relativePath :
                    ${project.parent.relativePath}<span class="nt">&lt;/echo&gt;</span>

                  <span class="nt">&lt;pathconvert</span> <span class="na">pathsep=</span><span class="s">"${line.separator}"</span> <span class="na">property=</span><span class="s">"classpath.maven.plugin"</span>
                    <span class="na">refid=</span><span class="s">"maven.plugin.classpath"</span> <span class="nt">/&gt;</span>

                  <span class="nt">&lt;pathconvert</span> <span class="na">pathsep=</span><span class="s">"${line.separator}"</span> <span class="na">property=</span><span class="s">"classpath.maven.compile"</span>
                    <span class="na">refid=</span><span class="s">"maven.compile.classpath"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;echo</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>Compile-time classpath for Maven :<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>${classpath.maven.compile}<span class="nt">&lt;/echo&gt;</span>

                  <span class="nt">&lt;pathconvert</span> <span class="na">pathsep=</span><span class="s">"${line.separator}"</span> <span class="na">property=</span><span class="s">"classpath.maven.runtime"</span>
                    <span class="na">refid=</span><span class="s">"maven.runtime.classpath"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;echo</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>Run-time classpath for Maven :<span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>${classpath.maven.runtime}<span class="nt">&lt;/echo&gt;</span>

                  <span class="nt">&lt;echo&gt;</span>Check Korean output : 한글이 정상적으로 보이나요?<span class="nt">&lt;/echo&gt;</span>

                  <span class="c">&lt;!-- echo all properties passed to Ant and environment variables prefixed with 'env' --&gt;</span>
                  <span class="nt">&lt;echo&gt;</span>All properties given to Ant are : <span class="nt">&lt;/echo&gt;</span>
                  <span class="nt">&lt;property</span> <span class="na">environment=</span><span class="s">"env"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;echoproperties</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/if&gt;</span>
              <span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
        <span class="nt">&lt;dependencies&gt;</span>
          <span class="nt">&lt;dependency&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>ise.antelope<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>ant-antelope-tasks<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;version&gt;</span>3.5.0<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;/dependency&gt;</span>
        <span class="nt">&lt;/dependencies&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-release-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="c">&lt;!--
          @fixme javaHome doesn't seem to work as is explained.
          You should specify JAVA_HOME env. variable explicitly in your run configuration when running from
          Eclipse.
           --&gt;</span>
          <span class="c">&lt;!--  &lt;javaHome&gt;c:\lang\jdk1.5&lt;/javaHome&gt; --&gt;</span>

          <span class="c">&lt;!--  &lt;mavenHome&gt;C:\tools\maven-3.0.3&lt;/mavenHome&gt; --&gt;</span>
          <span class="nt">&lt;tagBase&gt;</span>${scm.url.base}/main/tags<span class="nt">&lt;/tagBase&gt;</span>
          <span class="nt">&lt;tagNameFormat&gt;</span>@{project.version}<span class="nt">&lt;/tagNameFormat&gt;</span>
          <span class="nt">&lt;username&gt;</span>OhSangMoon<span class="nt">&lt;/username&gt;</span>
          <span class="nt">&lt;autoVersionSubmodules&gt;</span>true<span class="nt">&lt;/autoVersionSubmodules&gt;</span>
          <span class="nt">&lt;pomFileName&gt;</span>pom.xml<span class="nt">&lt;/pomFileName&gt;</span>
          <span class="nt">&lt;arguments&gt;</span>-f pom.xml<span class="nt">&lt;/arguments&gt;</span>

          <span class="c">&lt;!--  not supported by release plugin oer 2.2.2
          &lt;generateReleasePoms&gt;true&lt;/generateReleasePoms&gt;
          --&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>maven-eclipse-plugin<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>aspectj-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;goals&gt;</span>
              <span class="nt">&lt;goal&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;goal&gt;</span>test-compile<span class="nt">&lt;/goal&gt;</span>
            <span class="nt">&lt;/goals&gt;</span>
            <span class="nt">&lt;configuration&gt;</span>
              <span class="nt">&lt;Xlint&gt;</span>warning<span class="nt">&lt;/Xlint&gt;</span>
            <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.basepom.maven<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>duplicate-finder-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;executions&gt;</span>
          <span class="nt">&lt;execution&gt;</span>
            <span class="nt">&lt;id&gt;</span>find-duplicate-classes<span class="nt">&lt;/id&gt;</span>
            <span class="nt">&lt;phase&gt;</span>prepare-package<span class="nt">&lt;/phase&gt;</span>
            <span class="nt">&lt;goals&gt;&lt;goal&gt;</span>check<span class="nt">&lt;/goal&gt;&lt;/goals&gt;</span>
          <span class="nt">&lt;/execution&gt;</span>
        <span class="nt">&lt;/executions&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="c">&lt;!-- For more, refer https://github.com/basepom/duplicate-finder-maven-plugin/wiki --&gt;</span>
          <span class="nt">&lt;skip&gt;</span>false<span class="nt">&lt;/skip&gt;</span>
          <span class="nt">&lt;checkCompileClasspath&gt;</span>false<span class="nt">&lt;/checkCompileClasspath&gt;</span>
          <span class="nt">&lt;checkRuntimeClasspath&gt;</span>true<span class="nt">&lt;/checkRuntimeClasspath&gt;</span>
          <span class="nt">&lt;checkTestClasspath&gt;</span>false<span class="nt">&lt;/checkTestClasspath&gt;</span>
          <span class="nt">&lt;ignoredResourcePatterns&gt;</span>
            <span class="nt">&lt;ignoredResourcePattern&gt;</span>about.html<span class="nt">&lt;/ignoredResourcePattern&gt;</span>
          <span class="nt">&lt;/ignoredResourcePatterns&gt;</span>
          <span class="nt">&lt;ignoredDependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
          <span class="nt">&lt;/ignoredDependencies&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;pluginManagement&gt;</span>
      <span class="nt">&lt;plugins&gt;</span>
        <span class="c">&lt;!-- core --&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;inherited&gt;</span>true<span class="nt">&lt;/inherited&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;source&gt;</span>${java.version}<span class="nt">&lt;/source&gt;</span>
            <span class="nt">&lt;target&gt;</span>${java.version}<span class="nt">&lt;/target&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-site-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>3.0<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;dependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.apache.maven.wagon<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>wagon-ssh<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>2.0<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
          <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="c">&lt;!-- packaging --&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-jar-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.3.2<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="c">&lt;!-- For more on Maven archiver, refer http://maven.apache.org/shared/maven-archiver/index.html --&gt;</span>
            <span class="nt">&lt;archive&gt;</span>
              <span class="nt">&lt;addMavenDescriptor&gt;</span>false<span class="nt">&lt;/addMavenDescriptor&gt;</span>
              <span class="nt">&lt;forced&gt;</span>true<span class="nt">&lt;/forced&gt;</span>
              <span class="nt">&lt;index&gt;</span>true<span class="nt">&lt;/index&gt;</span>
              <span class="nt">&lt;manifest&gt;</span>
                <span class="nt">&lt;addClasspath&gt;</span>false<span class="nt">&lt;/addClasspath&gt;</span>
                <span class="nt">&lt;addDefaultImplementationEntries&gt;</span>true<span class="nt">&lt;/addDefaultImplementationEntries&gt;</span>
                <span class="nt">&lt;addDefaultSpecificationEntries&gt;</span>true<span class="nt">&lt;/addDefaultSpecificationEntries&gt;</span>
                <span class="nt">&lt;addExtensions&gt;</span>false<span class="nt">&lt;/addExtensions&gt;</span>
                <span class="nt">&lt;classpathLayoutType&gt;</span>simple<span class="nt">&lt;/classpathLayoutType&gt;</span>
              <span class="nt">&lt;/manifest&gt;</span>
              <span class="nt">&lt;manifestEntries&gt;</span>
                <span class="nt">&lt;Source-Revision&gt;</span>${project.svn.revision}<span class="nt">&lt;/Source-Revision&gt;</span>
              <span class="nt">&lt;/manifestEntries&gt;</span>
            <span class="nt">&lt;/archive&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>

        <span class="c">&lt;!-- reporting --&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-project-info-reports-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.4<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-javadoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.8<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;additionalJOptions&gt;</span>
              <span class="nt">&lt;additionalJOption&gt;</span>-Xms128m<span class="nt">&lt;/additionalJOption&gt;</span>
            <span class="nt">&lt;/additionalJOptions&gt;</span>
            <span class="nt">&lt;docencoding&gt;</span>${project.reporting.outputEncoding}<span class="nt">&lt;/docencoding&gt;</span>
            <span class="nt">&lt;encoding&gt;</span>${project.build.sourceEncoding}<span class="nt">&lt;/encoding&gt;</span>
            <span class="nt">&lt;doctitle&gt;</span>${project.name} ${project.version} API<span class="nt">&lt;/doctitle&gt;</span>
            <span class="nt">&lt;windowtitle&gt;</span>${project.name} ${project.version} API<span class="nt">&lt;/windowtitle&gt;</span>
            <span class="nt">&lt;links&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://docs.oracle.com/javase/7/docs/api/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://docs.oracle.com/javaee/6/api/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://jsr-305.googlecode.com/svn/trunk/javadoc/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://docs.jboss.org/hibernate/beanvalidation/spec/1.1/api/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://docs.jboss.org/hibernate/validator/5.2/api/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://commons.apache.org/proper/commons-collections/javadocs/api-release/<span class="nt">&lt;/link&gt;</span>
              <span class="nt">&lt;link&gt;</span>http://docs.spring.io/spring/docs/4.0.x/javadoc-api/<span class="nt">&lt;/link&gt;</span>
            <span class="nt">&lt;/links&gt;</span>
            <span class="nt">&lt;show&gt;</span>projected<span class="nt">&lt;/show&gt;</span>
            <span class="nt">&lt;splitindex&gt;</span>true<span class="nt">&lt;/splitindex&gt;</span>
            <span class="nt">&lt;doclet&gt;</span>org.umlgraph.doclet.UmlGraphDoc<span class="nt">&lt;/doclet&gt;</span>
            <span class="nt">&lt;docletArtifact&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.umlgraph<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>umlgraph<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>5.6.6<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/docletArtifact&gt;</span>
            <span class="c">&lt;!-- For more on UMLGraph's option, refer http://www.umlgraph.org/doc/indexw.html --&gt;</span>
            <span class="nt">&lt;additionalparam&gt;</span>-inferrel<span class="nt">&lt;/additionalparam&gt;</span>
            <span class="nt">&lt;additionalparam&gt;</span>-hide (java|javax).*<span class="nt">&lt;/additionalparam&gt;</span>
            <span class="nt">&lt;additionalparam&gt;</span>-collpackages java.util.*<span class="nt">&lt;/additionalparam&gt;</span>
            <span class="nt">&lt;useStandardDocletOptions&gt;</span>true<span class="nt">&lt;/useStandardDocletOptions&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-springbeandoc-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.0.8-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-checkstyle-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.7<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.basepom.maven<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>duplicate-finder-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="c">&lt;!-- tools supporting --&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-enforcer-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.4<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-assembly-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.4<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-release-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.2.2<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;providerImplementations&gt;</span>
              <span class="nt">&lt;svn&gt;</span>javasvn<span class="nt">&lt;/svn&gt;</span>
            <span class="nt">&lt;/providerImplementations&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;dependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>com.google.code.maven-scm-provider-svnjava<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>maven-scm-provider-svnjava<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>1.15<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.tmatesoft.svnkit<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>svnkit<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>1.7.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
          <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-scm-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.6<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;providerImplementations&gt;</span>
              <span class="nt">&lt;svn&gt;</span>javasvn<span class="nt">&lt;/svn&gt;</span>
            <span class="nt">&lt;/providerImplementations&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
          <span class="nt">&lt;dependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>com.google.code.maven-scm-provider-svnjava<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>maven-scm-provider-svnjava<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>1.15<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.tmatesoft.svnkit<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>svnkit<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>1.7.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
          <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="c">&lt;!-- http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html --&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-eclipse-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>2.9<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="c">&lt;!-- the next two item doesn't work on m2e. m2e has its own confgiruation in Eclipse preferences --&gt;</span>
            <span class="nt">&lt;downloadJavadocs&gt;</span>true<span class="nt">&lt;/downloadJavadocs&gt;</span>
            <span class="nt">&lt;downloadSources&gt;</span>true<span class="nt">&lt;/downloadSources&gt;</span>
            <span class="nt">&lt;forceRecheck&gt;</span>false<span class="nt">&lt;/forceRecheck&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.7<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;dependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.apache.ant<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>ant<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>1.8.2<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
          <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>aspectj-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.8<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;aspectLibraries&gt;</span>
              <span class="nt">&lt;aspectLibrary&gt;</span>
                <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
                <span class="nt">&lt;artifactId&gt;</span>spring-aspects<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;/aspectLibrary&gt;</span>
            <span class="nt">&lt;/aspectLibraries&gt;</span>
            <span class="nt">&lt;source&gt;</span>${java.version}<span class="nt">&lt;/source&gt;</span>
            <span class="nt">&lt;target&gt;</span>${java.version}<span class="nt">&lt;/target&gt;</span>
            <span class="nt">&lt;complianceLevel&gt;</span>${java.version}<span class="nt">&lt;/complianceLevel&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>properties-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.0-alpha-2<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>com.google.code.maven-svn-revision-number-plugin<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>maven-svn-revision-number-plugin<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.7<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;executions&gt;</span>
            <span class="nt">&lt;execution&gt;</span>
              <span class="nt">&lt;phase&gt;</span>validate<span class="nt">&lt;/phase&gt;</span>
              <span class="nt">&lt;goals&gt;</span>
                <span class="nt">&lt;goal&gt;</span>revision<span class="nt">&lt;/goal&gt;</span>
              <span class="nt">&lt;/goals&gt;</span>
              <span class="nt">&lt;configuration&gt;</span>
                <span class="nt">&lt;entries&gt;</span>
                  <span class="nt">&lt;entry&gt;</span>
                    <span class="nt">&lt;path&gt;</span>${project.basedir}<span class="nt">&lt;/path&gt;</span>
                    <span class="nt">&lt;prefix&gt;</span>project.svn<span class="nt">&lt;/prefix&gt;</span>
                    <span class="nt">&lt;depth&gt;</span>infinity<span class="nt">&lt;/depth&gt;</span>
                    <span class="nt">&lt;reportUnversioned&gt;</span>true<span class="nt">&lt;/reportUnversioned&gt;</span>
                    <span class="nt">&lt;reportIgnored&gt;</span>false<span class="nt">&lt;/reportIgnored&gt;</span>
                    <span class="nt">&lt;reportOutOfDate&gt;</span>false<span class="nt">&lt;/reportOutOfDate&gt;</span>
                  <span class="nt">&lt;/entry&gt;</span>
                <span class="nt">&lt;/entries&gt;</span>
              <span class="nt">&lt;/configuration&gt;</span>
            <span class="nt">&lt;/execution&gt;</span>
          <span class="nt">&lt;/executions&gt;</span>
          <span class="nt">&lt;dependencies&gt;</span>
            <span class="nt">&lt;dependency&gt;</span>
              <span class="nt">&lt;groupId&gt;</span>org.tmatesoft.svnkit<span class="nt">&lt;/groupId&gt;</span>
              <span class="nt">&lt;artifactId&gt;</span>svnkit<span class="nt">&lt;/artifactId&gt;</span>
              <span class="nt">&lt;version&gt;</span>1.7.0-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
            <span class="nt">&lt;/dependency&gt;</span>
          <span class="nt">&lt;/dependencies&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
        <span class="nt">&lt;plugin&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse.m2e<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>lifecycle-mapping<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
          <span class="nt">&lt;configuration&gt;</span>
            <span class="nt">&lt;lifecycleMappingMetadata&gt;</span>
              <span class="nt">&lt;pluginExecutions&gt;</span>
                <span class="nt">&lt;pluginExecution&gt;</span>
                  <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>maven-dependency-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>copy-dependencies<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                  <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                  <span class="nt">&lt;action&gt;</span>
                    <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;/action&gt;</span>
                <span class="nt">&lt;/pluginExecution&gt;</span>
                <span class="nt">&lt;pluginExecution&gt;</span>
                  <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>maven-antrun-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>run<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                  <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                  <span class="nt">&lt;action&gt;</span>
                    <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;/action&gt;</span>
                <span class="nt">&lt;/pluginExecution&gt;</span>
                <span class="nt">&lt;pluginExecution&gt;</span>
                  <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>aspectj-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>test-compile<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                  <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                  <span class="nt">&lt;action&gt;</span>
                    <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;/action&gt;</span>
                <span class="nt">&lt;/pluginExecution&gt;</span>
                <span class="nt">&lt;pluginExecution&gt;</span>
                  <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>org.codehaus.mojo<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>build-helper-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>parse-version<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                  <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                  <span class="nt">&lt;action&gt;</span>
                    <span class="nt">&lt;ignore</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;/action&gt;</span>
                <span class="nt">&lt;/pluginExecution&gt;</span>
                <span class="nt">&lt;pluginExecution&gt;</span>
                  <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                    <span class="nt">&lt;groupId&gt;</span>net.alchim31.maven<span class="nt">&lt;/groupId&gt;</span>
                    <span class="nt">&lt;artifactId&gt;</span>scala-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                    <span class="nt">&lt;versionRange&gt;</span>[1.0.0,)<span class="nt">&lt;/versionRange&gt;</span>
                    <span class="nt">&lt;goals&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>add-source<span class="nt">&lt;/goal&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>compile<span class="nt">&lt;/goal&gt;</span>
                      <span class="nt">&lt;goal&gt;</span>testCompile<span class="nt">&lt;/goal&gt;</span>
                    <span class="nt">&lt;/goals&gt;</span>
                  <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                  <span class="nt">&lt;action&gt;</span>
                    <span class="nt">&lt;ignore/&gt;</span>
                  <span class="nt">&lt;/action&gt;</span>
                <span class="nt">&lt;/pluginExecution&gt;</span>
              <span class="nt">&lt;/pluginExecutions&gt;</span>
            <span class="nt">&lt;/lifecycleMappingMetadata&gt;</span>
          <span class="nt">&lt;/configuration&gt;</span>
        <span class="nt">&lt;/plugin&gt;</span>
      <span class="nt">&lt;/plugins&gt;</span>
    <span class="nt">&lt;/pluginManagement&gt;</span>
  <span class="nt">&lt;/build&gt;</span>

  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.google.code.findbugs<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jsr305<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.inject<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>javax.inject<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.testng<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>testng<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>commons-lang3<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;dependencyManagement&gt;</span>
    <span class="nt">&lt;dependencies&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="c">&lt;!-- JSR 305 annotations which includes also JCIP annotations --&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.google.code.findbugs<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jsr305<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.0.3<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="c">&lt;!-- JSR 330 annotations --&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>javax.inject<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>javax.inject<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="c">&lt;!-- JSR 349 annotations --&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.1.0.Final<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="c">&lt;!-- Hibernate Validator --&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>5.2.4.Final<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>slf4j-api<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.slf4j<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jcl-over-slf4j<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${slf4j.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>ch.qos.logback<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>logback-classic<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${logback.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.codehaus.janino<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>janino<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.7.8<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>junit<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>junit<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${junit.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.testng<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>testng<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${testng.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.mockito<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mockito-core<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${mockito.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>commons-lang3<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${commons.lang3.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>commons-io<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>commons-io<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.4<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>commons-codec<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>commons-codec<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.10<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="c">&lt;!--For Java 6, Commons DBCP 1.4 MUST be used. --&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>commons-dbcp<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>commons-dbcp<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.4<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
         <span class="c">&lt;!-- For Java 7, Commons DBCP 2.x MUST be used. --&gt;</span>
         <span class="c">&lt;!-- DBCP 2.x and DBCP 1.4 have difference namespaces. --&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.apache.commons<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>commons-dbcp2<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>2.1<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;exclusions&gt;</span>
          <span class="nt">&lt;exclusion&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>commons-logging<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>commons-logging<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;/exclusion&gt;</span>
        <span class="nt">&lt;/exclusions&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-core<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;exclusions&gt;</span>
          <span class="nt">&lt;exclusion&gt;</span>
            <span class="nt">&lt;groupId&gt;</span>commons-logging<span class="nt">&lt;/groupId&gt;</span>
            <span class="nt">&lt;artifactId&gt;</span>commons-logging<span class="nt">&lt;/artifactId&gt;</span>
          <span class="nt">&lt;/exclusion&gt;</span>
        <span class="nt">&lt;/exclusions&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-beans<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-context<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-expression<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-aspects<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-jdbc<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-tx<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-web<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.springframework<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>spring-test<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${spring.version}<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mybatis<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${mybatis.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.mybatis<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mybatis-spring<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.2.2<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jackson-databind<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${jackson.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.core<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jackson-annotations<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${jackson.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.fasterxml.jackson.module<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>jackson-module-jaxb-annotations<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>${jackson.version}<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;/dependencies&gt;</span>
  <span class="nt">&lt;/dependencyManagement&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<h3 id="using-fundamental-annotations-not-included-in-java-se">Using fundamental annotations not included in Java SE</h3>

<ul>
  <li>JCIP(Java Concurrency in Practice) annotations
    <ul>
      <li><code class="highlighter-rouge">GuardedBy</code>, <code class="highlighter-rouge">Immutable</code>, <code class="highlighter-rouge">NotThreadSafe</code>, <code class="highlighter-rouge">ThreadSafe</code></li>
    </ul>
  </li>
  <li>JSR 305(Annotations for Software Defect Detection) annotations
    <ul>
      <li><code class="highlighter-rouge">javax.annotation</code>, <code class="highlighter-rouge">javax.annotation.concurrent</code>, <code class="highlighter-rouge">javax.annotation.meta</code> packages</li>
      <li>includes JCIP annotations in <code class="highlighter-rouge">javax.annotation.concurrent</code> package</li>
      <li><a href="http://jsr-305.googlecode.com/svn/trunk/javadoc/index.html">JSR305 API</a></li>
    </ul>
  </li>
  <li>JSR 330(Dependency Injection for Java) annotations
    <ul>
      <li><code class="highlighter-rouge">javax.inject</code> package</li>
      <li><a href="http://docs.oracle.com/javaee/6/api/index.html?javax/inject/package-summary.html">javax.inject API</a></li>
    </ul>
  </li>
  <li>JSR 349(Bean Validation 1.1) annotations
    <ul>
      <li><code class="highlighter-rouge">javax.validation</code>, <code class="highlighter-rouge">javax.validation.bootstrap</code>, <code class="highlighter-rouge">javax.validation.constraints</code> … packages</li>
      <li><a href="http://docs.jboss.org/hibernate/beanvalidation/spec/1.1/api/">Bean Validation API 1.1.0.Final</a></li>
    </ul>
  </li>
  <li>Hibernate Validator
    <ul>
      <li><a href="http://docs.jboss.org/hibernate/validator/5.2/api/index.html?org/hibernate/validator/constraints/package-summary.html">Annotations in Hibernate Validator 5.2</a></li>
    </ul>
  </li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ...
  <span class="nt">&lt;dependency&gt;</span>
    <span class="c">&lt;!-- JSR 305 annotations which includes also JCIP annotations --&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.google.code.findbugs<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>jsr305<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>3.0.1<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="c">&lt;!-- JSR 330 annotations --&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>javax.inject<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>javax.inject<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="c">&lt;!-- JSR 349 annotations --&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>javax.validation<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>validation-api<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.1.0.Final<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="c">&lt;!-- Hibernate Validator --&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.hibernate<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>hibernate-validator<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>5.2.4.Final<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
  ...
</code></pre></div></div>

<h3 id="defining-dependencies-on-eclipse-swt-and-jface-with-maven-2">Defining dependencies on Eclipse SWT and JFace with Maven 2</h3>

<p>Artifacts of Eclipse SWT 3.3 and JFace 3.3 are registered central repository, but their versions have qualifiers such as “v3346”, “v20070530” or “I20070606-0010” which are not aligned with Maven’s version comparison definition.(<a href="http://docs.codehaus.org/display/MAVEN/Dependency+Mediation+and+Conflict+Resolution#DependencyMediationandConflictResolution-DependencyVersionRanges_Dependency_Mediation_and_Conflict_Resolution" title="wikilink">http://docs.codehaus.org/display/MAVEN/Dependency+Mediation+and+Conflict+Resolution#DependencyMediationandConflictResolution-DependencyVersionRanges Dependency Mediation and Conflict Resolution</a>) Nevertheless, Maven 3 seems to be able to resolve the dependencies including transitive ones. But Maven 2 and Maven’s Ant Task which uses Maven 2 internally don’t resolve the transitive dependencies correctly and throw exception. So, it you want to define dependencies on SWT and JFace with Maven 2 successfully, some transitive dependencies should be excluded and defined as direct ones like the following.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse.swt.win32.win32<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>x86<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-v3346<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>jar<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;scope&gt;</span>compile<span class="nt">&lt;/scope&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jface<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-I20070606-0010<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>jar<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;scope&gt;</span>compile<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;exclusions&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>swt<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse.core<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>commands<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
      <span class="nt">&lt;/exclusions&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse.jface<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>text<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-v20070606-0010<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>jar<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;scope&gt;</span>compile<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;exclusions&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse.core<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>runtime<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>text<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>swt<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>jface<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
      <span class="nt">&lt;/exclusions&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>text<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-v20070606-0010<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;type&gt;</span>jar<span class="nt">&lt;/type&gt;</span>
      <span class="nt">&lt;scope&gt;</span>compile<span class="nt">&lt;/scope&gt;</span>
      <span class="nt">&lt;exclusions&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse.equinox<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>common<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
      <span class="nt">&lt;/exclusions&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

    <span class="c">&lt;!-- redundant defintions of transitive dependencies to work with Maven 2 --&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>swt<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-v3346<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse.core<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>commands<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-I20070605-0010<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse.core<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>runtime<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.100-v20070530<span class="nt">&lt;/version&gt;</span>
      <span class="nt">&lt;exclusions&gt;</span>
        <span class="nt">&lt;exclusion&gt;</span>
          <span class="nt">&lt;groupId&gt;</span>org.eclipse.equinox<span class="nt">&lt;/groupId&gt;</span>
          <span class="nt">&lt;artifactId&gt;</span>app<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;/exclusion&gt;</span>
      <span class="nt">&lt;/exclusions&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse.equinox<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>common<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>3.3.0-v20070426<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>org.eclipse.equinox<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>app<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>1.0.0-v20070606<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div></div>

<h3 id="typical-sample-of-maven-assembly-descriptor">Typical sample of Maven assembly descriptor</h3>

<p>The location of deployment descriptors or configuration such as <code class="highlighter-rouge">web.xml</code>, <code class="highlighter-rouge">log4j.xml</code> can be adjusted using <code class="highlighter-rouge">file</code> element of assembly descriptor when they are not under <code class="highlighter-rouge">WEB-INF</code> or root directory of source directories.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;assembly</span>
<span class="na">xmlns=</span><span class="s">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"</span>
<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
<span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;id&gt;</span>view<span class="nt">&lt;/id&gt;</span>
  <span class="nt">&lt;formats&gt;</span>
    <span class="nt">&lt;format&gt;</span>jar<span class="nt">&lt;/format&gt;</span>
  <span class="nt">&lt;/formats&gt;</span>
  <span class="nt">&lt;includeBaseDirectory&gt;</span>false<span class="nt">&lt;/includeBaseDirectory&gt;</span>
  <span class="nt">&lt;fileSets&gt;</span>
    <span class="nt">&lt;fileSet&gt;</span>
      <span class="nt">&lt;directory&gt;</span>${project.build.outputDirectory}<span class="nt">&lt;/directory&gt;</span>
      <span class="nt">&lt;outputDirectory&gt;</span>/<span class="nt">&lt;/outputDirectory&gt;</span>
      <span class="nt">&lt;useDefaultExcludes&gt;</span>true<span class="nt">&lt;/useDefaultExcludes&gt;</span>
      <span class="nt">&lt;includes&gt;</span>
        <span class="nt">&lt;include&gt;</span>ambariplus/view/**/*.class<span class="nt">&lt;/include&gt;</span>
      <span class="nt">&lt;/includes&gt;</span>
      <span class="nt">&lt;filtered&gt;</span>false<span class="nt">&lt;/filtered&gt;</span>
      <span class="nt">&lt;fileMode&gt;</span>0644<span class="nt">&lt;/fileMode&gt;</span>
      <span class="nt">&lt;directoryMode&gt;</span>0755<span class="nt">&lt;/directoryMode&gt;</span>
    <span class="nt">&lt;/fileSet&gt;</span>
  <span class="nt">&lt;/fileSets&gt;</span>
  <span class="nt">&lt;files&gt;</span>
    <span class="nt">&lt;file&gt;</span>
      <span class="nt">&lt;source&gt;</span>${project.build.outputDirectory}/ambariplus/view/view.xml<span class="nt">&lt;/source&gt;</span>
      <span class="nt">&lt;outputDirectory&gt;</span>/<span class="nt">&lt;/outputDirectory&gt;</span>
      <span class="nt">&lt;destName&gt;</span>view.xml<span class="nt">&lt;/destName&gt;</span>
      <span class="nt">&lt;filtered&gt;</span>false<span class="nt">&lt;/filtered&gt;</span>
      <span class="nt">&lt;lineEnding&gt;</span>unix<span class="nt">&lt;/lineEnding&gt;</span>
      <span class="nt">&lt;fileMode&gt;</span>0644<span class="nt">&lt;/fileMode&gt;</span>
    <span class="nt">&lt;/file&gt;</span>
  <span class="nt">&lt;/files&gt;</span>
<span class="nt">&lt;/assembly&gt;</span>
</code></pre></div></div>

<h2 id="ant">Ant</h2>

<h3 id="bare-ant-build-file-using-maven-ant-tasks-and-antelope">Bare Ant build file using Maven-Ant tasks and Antelope</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"project.name"</span> <span class="na">basedir=</span><span class="s">"."</span> <span class="na">default=</span><span class="s">"echo.env"</span> <span class="na">xmlns:artifact=</span><span class="s">"antlib:org.apache.maven.artifact.ant"</span>
  <span class="na">xmlns:antelope=</span><span class="s">"antlib:ise.antelope.tasks"</span> <span class="na">xmlns:contrib=</span><span class="s">"antlib:net.sf.antcontrib"</span><span class="nt">&gt;</span>

  <span class="c">&lt;!-- Ant references :
       Manual : http://ant.apache.org/manual/index.html
       Path-like Structures : http://ant.apache.org/manual/using.html#path
       Resource Collections : http://ant.apache.org/manual/Types/resources.html#collection
  --&gt;</span>
  <span class="nt">&lt;description&gt;</span>Title or descrption for this build file.<span class="nt">&lt;/description&gt;</span>

  <span class="nt">&lt;property</span> <span class="na">environment=</span><span class="s">"env"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- Define Maven-Ant tasks --&gt;</span>
  <span class="c">&lt;!-- For more on Maven-Ant tasks, refer http://maven.apache.org/ant-tasks/ --&gt;</span>
  <span class="nt">&lt;typedef</span> <span class="na">resource=</span><span class="s">"org/apache/maven/artifact/ant/antlib.xml"</span>
    <span class="na">uri=</span><span class="s">"antlib:org.apache.maven.artifact.ant"</span>
    <span class="na">classpath=</span><span class="s">"lib/maven-ant-tasks-2.1.3.jar"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/typedef&gt;</span>

  <span class="nt">&lt;artifact:dependencies</span> <span class="na">pathId=</span><span class="s">"ant.tasks.classpath"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- libraries only necessary for Ant task not application. --&gt;</span>
    <span class="c">&lt;!-- Ant-Contrib tasks. For more, refer http://ant-contrib.sourceforge.net/tasks/ --&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"ant-contrib"</span> <span class="na">artifactId=</span><span class="s">"ant-contrib"</span> <span class="na">version=</span><span class="s">"1.0b3"</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- Antelope tasks. For more, refer http://antelope.stage.tigris.org/nonav/docs/manual/index.html --&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"ise.antelope"</span> <span class="na">artifactId=</span><span class="s">"ant-antelope-tasks"</span> <span class="na">version=</span><span class="s">"3.5.0"</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- SvnAnt tasks. For more, refer http://subclipse.tigris.org/svnant.html --&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.tigris"</span> <span class="na">artifactId=</span><span class="s">"svnant"</span> <span class="na">version=</span><span class="s">"1.3.1"</span> <span class="na">scope=</span><span class="s">"system"</span>
      <span class="na">systemPath=</span><span class="s">"${basedir}/lib/svnant.jar"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.tigris"</span> <span class="na">artifactId=</span><span class="s">"svn-client-adapter"</span> <span class="na">version=</span><span class="s">"0.9.102"</span>
      <span class="na">scope=</span><span class="s">"system"</span> <span class="na">systemPath=</span><span class="s">"${basedir}/lib/svnClientAdapter.jar"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.tmatesoft.svnkit"</span> <span class="na">artifactId=</span><span class="s">"svnkit"</span> <span class="na">version=</span><span class="s">"1.8.10"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.tmatesoft.svnkit"</span> <span class="na">artifactId=</span><span class="s">"svnkit-javahl16"</span> <span class="na">version=</span><span class="s">"1.8.10"</span> <span class="nt">/&gt;</span>
    <span class="c">&lt;!-- TestNG tasks. For more, refer http://testng.org/doc/ant.html --&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.testng"</span> <span class="na">artifactId=</span><span class="s">"testng"</span> <span class="na">version=</span><span class="s">"6.8.21"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.mortbay.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-runner"</span> <span class="na">version=</span><span class="s">"7.6.9.v20130131"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.eclipse.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-jmx"</span> <span class="na">version=</span><span class="s">"7.6.9.v20130131"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.eclipse.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-start"</span> <span class="na">version=</span><span class="s">"7.6.9.v20130131"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.umlgraph"</span> <span class="na">artifactId=</span><span class="s">"umlgraph"</span> <span class="na">version=</span><span class="s">"5.6.6"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"com.lunatech.jax-doclets"</span> <span class="na">artifactId=</span><span class="s">"doclets"</span> <span class="na">version=</span><span class="s">"0.10.0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;remoteRepository</span> <span class="na">id=</span><span class="s">"centeral2"</span> <span class="na">url=</span><span class="s">"http://repo2.maven.org/maven2/"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;remoteRepository</span> <span class="na">id=</span><span class="s">"maven2-repository.dev.java.net"</span> <span class="na">url=</span><span class="s">"http://download.java.net/maven/2/"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;remoteRepository</span> <span class="na">id=</span><span class="s">"tmatesoft-releases"</span>
      <span class="na">url=</span><span class="s">"http://maven.tmatesoft.com/content/repositories/releases/"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;remoteRepository</span> <span class="na">id=</span><span class="s">"evolvis-3rdparty"</span> <span class="na">url=</span><span class="s">"http://maven-repo.evolvis.org/3rdparty"</span>
      <span class="na">layout=</span><span class="s">"default"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/artifact:dependencies&gt;</span>

  <span class="c">&lt;!-- Define Ant-Contrib tasks --&gt;</span>
  <span class="nt">&lt;taskdef</span> <span class="na">resource=</span><span class="s">"net/sf/antcontrib/antlib.xml"</span> <span class="na">uri=</span><span class="s">"antlib:net.sf.antcontrib"</span>
    <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- Define Antelope tasks --&gt;</span>
  <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">"stringutil"</span> <span class="na">classname=</span><span class="s">"ise.antelope.tasks.StringUtilTask"</span>
    <span class="na">uri=</span><span class="s">"antlib:ise.antelope.tasks"</span> <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">"if"</span> <span class="na">classname=</span><span class="s">"ise.antelope.tasks.IfTask"</span>
    <span class="na">uri=</span><span class="s">"antlib:ise.antelope.tasks"</span> <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">"var"</span> <span class="na">classname=</span><span class="s">"ise.antelope.tasks.Variable"</span>
    <span class="na">uri=</span><span class="s">"antlib:ise.antelope.tasks"</span> <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">"unset"</span> <span class="na">classname=</span><span class="s">"ise.antelope.tasks.Unset"</span>
    <span class="na">uri=</span><span class="s">"antlib:ise.antelope.tasks"</span> <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- Define SvnAnt tasks --&gt;</span>
  <span class="nt">&lt;typedef</span> <span class="na">resource=</span><span class="s">"org/tigris/subversion/svnant/svnantlib.xml"</span>
    <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>

  <span class="c">&lt;!-- Define TestNG tasks --&gt;</span>
  <span class="nt">&lt;taskdef</span> <span class="na">resource=</span><span class="s">"testngtasks"</span> <span class="na">classpathref=</span><span class="s">"ant.tasks.classpath"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;artifact:pom</span> <span class="na">id=</span><span class="s">"project.pom"</span> <span class="na">file=</span><span class="s">"${basedir}/pom.xml"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;artifact:dependencies</span> <span class="na">pomRefId=</span><span class="s">"project.pom"</span> <span class="na">pathId=</span><span class="s">"project.classpath"</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"echo.env"</span> <span class="na">depends=</span><span class="s">"query.version.revision"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- @todo How to sort the list --&gt;</span>
    <span class="nt">&lt;pathconvert</span> <span class="na">pathsep=</span><span class="s">"${line.separator}"</span> <span class="na">refid=</span><span class="s">"project.classpath"</span> <span class="na">property=</span><span class="s">"project.classpath.list"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;mapper</span> <span class="na">type=</span><span class="s">"regexp"</span> <span class="na">from=</span><span class="s">"(.*\\\.m2\\repository\\)?(.*)"</span> <span class="na">to=</span><span class="s">"  \2"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/pathconvert&gt;</span>

    <span class="nt">&lt;echo&gt;</span>Defined properties : <span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echoproperties</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;echo&gt;</span>
    <span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span>Classpath : <span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span>${project.classpath.list}<span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span>Parsed Version : <span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span> major : ${ver.major}<span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span> minor : ${ver.minor}<span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span> incremental : ${ver.incremental}<span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span> tail : ${ver.tail}<span class="nt">&lt;/echo&gt;</span>
    <span class="nt">&lt;echo&gt;</span>Max revision under this project : ${revision.max}<span class="nt">&lt;/echo&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"check.env"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;fail</span> <span class="na">unless=</span><span class="s">"env.MAVEN_HOME"</span><span class="nt">&gt;</span>Environment variable MAVEN_HOME should be specified properly.<span class="nt">&lt;/fail&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"query.version.revision"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;svnant:svnSetting</span> <span class="na">id=</span><span class="s">"svn.setting"</span> <span class="na">svnkit=</span><span class="s">"true"</span> <span class="na">javahl=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;svnant:svn</span> <span class="na">refid=</span><span class="s">"svn.setting"</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- wcversion will set properties of repository.url, revision.max, committed.max and et al.
        For more, refer http://subclipse.tigris.org/svnant/svntask.html#wcversion --&gt;</span>
      <span class="nt">&lt;wcversion</span> <span class="na">path=</span><span class="s">"${basedir}"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/svnant:svn&gt;</span>
    <span class="nt">&lt;contrib:propertyregex</span> <span class="na">property=</span><span class="s">"ver.wo.snapshot"</span> <span class="na">input=</span><span class="s">"${project.pom.version}"</span>
      <span class="na">regexp=</span><span class="s">"([0-9]+(\.[0-9]+)?(\.[0-9]+)?)"</span> <span class="na">select=</span><span class="s">"\1"</span> <span class="na">defaultValue=</span><span class="s">"0.0.0"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;contrib:propertyregex</span> <span class="na">property=</span><span class="s">"ver.major"</span> <span class="na">input=</span><span class="s">"${project.pom.version}"</span>
      <span class="na">regexp=</span><span class="s">"([0-9]+)(?:\.([0-9]+))?(?:\.([0-9]+))?(.+)?"</span> <span class="na">select=</span><span class="s">"\1"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;contrib:propertyregex</span> <span class="na">property=</span><span class="s">"ver.minor"</span> <span class="na">input=</span><span class="s">"${project.pom.version}"</span>
      <span class="na">regexp=</span><span class="s">"([0-9]+)(?:\.([0-9]+))?(?:\.([0-9]+))?(.+)?"</span> <span class="na">select=</span><span class="s">"\2"</span> <span class="na">defaultValue=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;contrib:propertyregex</span> <span class="na">property=</span><span class="s">"ver.incremental"</span> <span class="na">input=</span><span class="s">"${project.pom.version}"</span>
      <span class="na">regexp=</span><span class="s">"([0-9]+)(?:\.([0-9]+))?(?:\.([0-9]+))?(.+)?"</span> <span class="na">select=</span><span class="s">"\3"</span> <span class="na">defaultValue=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;contrib:propertyregex</span> <span class="na">property=</span><span class="s">"ver.tail"</span> <span class="na">input=</span><span class="s">"${project.pom.version}"</span>
      <span class="na">regexp=</span><span class="s">"([0-9]+)(?:\.([0-9]+))?(?:\.([0-9]+))?(.+)?"</span> <span class="na">select=</span><span class="s">"\4"</span> <span class="na">defaultValue=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;antelope:if</span> <span class="na">name=</span><span class="s">"ver.minor"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
      <span class="nt">&lt;antelope:unset</span> <span class="na">name=</span><span class="s">"ver.minor"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"ver.minor"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/antelope:if&gt;</span>
    <span class="nt">&lt;antelope:if</span> <span class="na">name=</span><span class="s">"ver.incremental"</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
      <span class="nt">&lt;antelope:unset</span> <span class="na">name=</span><span class="s">"ver.incremental"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"ver.incremental"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/antelope:if&gt;</span>
  <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<h3 id="start-and-stop-jetty-using-ant">Start and stop Jetty using Ant</h3>

<ul>
  <li><strong><code class="highlighter-rouge">build.xml</code></strong></li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jetty.ver"</span> <span class="na">value=</span><span class="s">"7.6.9.v20130131"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jetty.port"</span> <span class="na">value=</span><span class="s">"8080"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jetty.jmxPort"</span> <span class="na">value=</span><span class="s">"3333"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jetty.stopPort"</span> <span class="na">value=</span><span class="s">"8087"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"jetty.stopKey"</span> <span class="na">value=</span><span class="s">"stopnow"</span><span class="nt">/&gt;</span>

  <span class="nt">&lt;artifact:dependencies</span> <span class="na">pathId=</span><span class="s">"jetty.classpath"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.mortbay.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-runner"</span> <span class="na">version=</span><span class="s">"${jetty.ver}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.eclipse.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-start"</span> <span class="na">version=</span><span class="s">"${jetty.ver}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.eclipse.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-jmx"</span> <span class="na">version=</span><span class="s">"${jetty.ver}"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.eclipse.jetty"</span> <span class="na">artifactId=</span><span class="s">"jetty-test-webapp"</span> <span class="na">type=</span><span class="s">"war"</span> <span class="na">version=</span><span class="s">"7.0.0.M2"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/artifact:dependencies&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"jetty.runner.help"</span>
    <span class="na">description=</span><span class="s">"Print command line help of jetty-runner"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;java</span> <span class="na">jar=</span><span class="s">"${org.mortbay.jetty:jetty-runner:jar}"</span> <span class="na">fork=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">line=</span><span class="s">"--help"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/java&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"jetty.run"</span>
    <span class="na">description=</span><span class="s">"Run Jetty server"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;java</span> <span class="na">jar=</span><span class="s">"${org.mortbay.jetty:jetty-runner:jar}"</span> <span class="na">fork=</span><span class="s">"true"</span> <span class="na">spawn=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-Dcom.sun.management.jmxremote.port=${jetty.jmxPort}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-Dcom.sun.management.jmxremote.ssl=false"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-Dcom.sun.management.jmxremote.authenticate=false"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-Djetty.host=127.0.0.1"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-Djetty.port=${jetty.port}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"--log"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"${basedir}/target/jetty-yyyy_mm_dd.log"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"--stop-port"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"${jetty.stopPort}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"--stop-key"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"${jetty.stopKey}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"--jar"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"${org.eclipse.jetty:jetty-jmx:jar}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"--config"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"${basedir}/src/main/webapp/WEB-INF/jetty.xml"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"${basedir}/src/main/webapp"</span><span class="nt">/&gt;</span>
      <span class="c">&lt;!-- &lt;arg value="${org.eclipse.jetty:jetty-test-webapp:war}"/&gt; --&gt;</span>
    <span class="nt">&lt;/java&gt;</span>
  <span class="nt">&lt;/target&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"jetty.stop"</span>
    <span class="na">description=</span><span class="s">"Stop Jetty server"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;java</span> <span class="na">jar=</span><span class="s">"${org.eclipse.jetty:jetty-start:jar}"</span> <span class="na">fork=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-DSTOP.PORT=${jetty.stopPort}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;jvmarg</span> <span class="na">value=</span><span class="s">"-DSTOP.KEY=${jetty.stopKey}"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">"--stop"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/java&gt;</span>
  <span class="nt">&lt;/target&gt;</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="highlighter-rouge">jetty.xml</code></strong></li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="cp">&lt;!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd"&gt;</span>

<span class="nt">&lt;Configure</span> <span class="na">id=</span><span class="s">"Server"</span> <span class="na">class=</span><span class="s">"org.eclipse.jetty.server.Server"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"ThreadPool"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- Default queued blocking threadpool --&gt;</span>
    <span class="nt">&lt;New</span> <span class="na">class=</span><span class="s">"org.eclipse.jetty.util.thread.QueuedThreadPool"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"minThreads"</span><span class="nt">&gt;</span>10<span class="nt">&lt;/Set&gt;</span>
      <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"maxThreads"</span><span class="nt">&gt;</span>200<span class="nt">&lt;/Set&gt;</span>
      <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"detailedDump"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/Set&gt;</span>
    <span class="nt">&lt;/New&gt;</span>
  <span class="nt">&lt;/Set&gt;</span>

  <span class="nt">&lt;Call</span> <span class="na">name=</span><span class="s">"addConnector"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Arg&gt;</span>
      <span class="nt">&lt;New</span> <span class="na">class=</span><span class="s">"org.eclipse.jetty.server.nio.SelectChannelConnector"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"host"</span><span class="nt">&gt;&lt;SystemProperty</span> <span class="na">name=</span><span class="s">"jetty.host"</span> <span class="na">default=</span><span class="s">"127.0.0.1"</span><span class="nt">/&gt;&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"port"</span><span class="nt">&gt;&lt;SystemProperty</span> <span class="na">name=</span><span class="s">"jetty.port"</span> <span class="na">default=</span><span class="s">"8080"</span> <span class="nt">/&gt;&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"maxIdleTime"</span><span class="nt">&gt;</span>300000<span class="nt">&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"Acceptors"</span><span class="nt">&gt;</span>2<span class="nt">&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"statsOn"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"confidentialPort"</span><span class="nt">&gt;</span>8443<span class="nt">&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"lowResourcesConnections"</span><span class="nt">&gt;</span>20000<span class="nt">&lt;/Set&gt;</span>
        <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"lowResourcesMaxIdleTime"</span><span class="nt">&gt;</span>5000<span class="nt">&lt;/Set&gt;</span>
      <span class="nt">&lt;/New&gt;</span>
    <span class="nt">&lt;/Arg&gt;</span>
  <span class="nt">&lt;/Call&gt;</span>

  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"handler"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;New</span> <span class="na">id=</span><span class="s">"Handlers"</span> <span class="na">class=</span><span class="s">"org.eclipse.jetty.server.handler.HandlerCollection"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"handlers"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Array</span> <span class="na">type=</span><span class="s">"org.eclipse.jetty.server.Handler"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;Item&gt;</span>
            <span class="nt">&lt;New</span> <span class="na">id=</span><span class="s">"Contexts"</span> <span class="na">class=</span><span class="s">"org.eclipse.jetty.server.handler.ContextHandlerCollection"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/Item&gt;</span>
          <span class="nt">&lt;Item&gt;</span>
            <span class="nt">&lt;New</span> <span class="na">id=</span><span class="s">"DefaultHandler"</span> <span class="na">class=</span><span class="s">"org.eclipse.jetty.server.handler.DefaultHandler"</span> <span class="nt">/&gt;</span>
          <span class="nt">&lt;/Item&gt;</span>
        <span class="nt">&lt;/Array&gt;</span>
      <span class="nt">&lt;/Set&gt;</span>
    <span class="nt">&lt;/New&gt;</span>
  <span class="nt">&lt;/Set&gt;</span>

  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"stopAtShutdown"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/Set&gt;</span>
  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"sendServerVersion"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/Set&gt;</span>
  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"sendDateHeader"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/Set&gt;</span>
  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"gracefulShutdown"</span><span class="nt">&gt;</span>1000<span class="nt">&lt;/Set&gt;</span>
  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"dumpAfterStart"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/Set&gt;</span>
  <span class="nt">&lt;Set</span> <span class="na">name=</span><span class="s">"dumpBeforeStop"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/Set&gt;</span>
<span class="nt">&lt;/Configure&gt;</span>
</code></pre></div></div>

<ul>
  <li><strong><code class="highlighter-rouge">web.xml</code></strong>
    <ul>
      <li>You should set <code class="highlighter-rouge">useFileMappedBuffer</code> param to <code class="highlighter-rouge">false</code> to avoid static file locking on Windows.
        <ul>
          <li>For more, refer <a href="http://wiki.eclipse.org/Jetty/Howto/Deal_with_Locked_Windows_Files">Deal with Locked Windows Files</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;web-app</span> <span class="na">xmlns=</span><span class="s">"http://java.sun.com/xml/ns/j2ee"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>
  <span class="na">version=</span><span class="s">"2.5"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;servlet&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>defaultServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;servlet-class&gt;</span>org.eclipse.jetty.servlet.DefaultServlet<span class="nt">&lt;/servlet-class&gt;</span>
    <span class="nt">&lt;init-param&gt;</span>
      <span class="nt">&lt;param-name&gt;</span>useFileMappedBuffer<span class="nt">&lt;/param-name&gt;</span>
      <span class="nt">&lt;param-value&gt;</span>false<span class="nt">&lt;/param-value&gt;</span>
    <span class="nt">&lt;/init-param&gt;</span>
    <span class="nt">&lt;load-on-startup&gt;</span>0<span class="nt">&lt;/load-on-startup&gt;</span>
  <span class="nt">&lt;/servlet&gt;</span>

  <span class="nt">&lt;servlet-mapping&gt;</span>
    <span class="nt">&lt;servlet-name&gt;</span>defaultServlet<span class="nt">&lt;/servlet-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/servlet-mapping&gt;</span>

  <span class="nt">&lt;welcome-file-list&gt;</span>
    <span class="nt">&lt;welcome-file&gt;</span>index.html<span class="nt">&lt;/welcome-file&gt;</span>
  <span class="nt">&lt;/welcome-file-list&gt;</span>
  <span class="nt">&lt;error-page&gt;</span>
    <span class="nt">&lt;error-code&gt;</span>404<span class="nt">&lt;/error-code&gt;</span>
    <span class="nt">&lt;location&gt;</span>/404.html<span class="nt">&lt;/location&gt;</span>
  <span class="nt">&lt;/error-page&gt;</span>

<span class="nt">&lt;/web-app&gt;</span>
</code></pre></div></div>

<h3 id="generate-javadoc-using-ant-and-maven">Generate Javadoc using Ant and Maven</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"ambari.server.ext"</span> <span class="na">basedir=</span><span class="s">"."</span>
    <span class="na">xmlns:artifact=</span><span class="s">"antlib:org.apache.maven.artifact.ant"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;typedef</span> <span class="na">resource=</span><span class="s">"org/apache/maven/artifact/ant/antlib.xml"</span>
     <span class="na">uri=</span><span class="s">"antlib:org.apache.maven.artifact.ant"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;classpath&gt;</span>
        <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"lib/maven-ant-tasks-2.1.3.jar"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/classpath&gt;</span>
  <span class="nt">&lt;/typedef&gt;</span>

  <span class="nt">&lt;artifact:dependencies</span> <span class="na">pathId=</span><span class="s">"ambari.server.classpath"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;pom</span> <span class="na">file=</span><span class="s">"${ambari.server.project.dir}/pom.xml"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/artifact:dependencies&gt;</span>

  <span class="nt">&lt;artifact:dependencies</span> <span class="na">pathId=</span><span class="s">"extra.classpath"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.umlgraph"</span> <span class="na">artifactId=</span><span class="s">"umlgraph"</span> <span class="na">version=</span><span class="s">"5.6.6"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/artifact:dependencies&gt;</span>

  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"generateAmbariJavadoc"</span> <span class="na">description=</span><span class="s">"generate Java API documentation for Ambari"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;javadoc</span> <span class="na">destdir=</span><span class="s">"${ambari.server.project.dir}/target/javadoc"</span>
      <span class="na">maxmemory=</span><span class="s">"256m"</span> <span class="na">access=</span><span class="s">"private"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span> <span class="na">docencoding=</span><span class="s">"utf-8"</span>
      <span class="na">windowtitle=</span><span class="s">"Apache Ambari Java API"</span> <span class="na">doctitle=</span><span class="s">"Apache Ambari Java API"</span>
      <span class="na">version=</span><span class="s">"true"</span> <span class="na">use=</span><span class="s">"true"</span> <span class="na">author=</span><span class="s">"true"</span>   <span class="na">splitindex=</span><span class="s">"true"</span>
      <span class="na">nodeprecated=</span><span class="s">"false"</span> <span class="na">notree=</span><span class="s">"false"</span> <span class="na">noindex=</span><span class="s">"false"</span> <span class="na">nohelp=</span><span class="s">"false"</span> <span class="na">nonavbar=</span><span class="s">"false"</span>
      <span class="na">linksource=</span><span class="s">"yes"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;sourcepath&gt;</span>
        <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${ambari.server.project.dir}/src/main/java"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/sourcepath&gt;</span>
      <span class="nt">&lt;classpath</span> <span class="na">refId=</span><span class="s">"ambari.server.classpath"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;doclet</span> <span class="na">name=</span><span class="s">"org.umlgraph.doclet.UmlGraphDoc"</span> <span class="na">path=</span><span class="s">"${org.umlgraph:umlgraph:jar}"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-inferrel"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-hide"</span> <span class="na">value=</span><span class="s">"(java|javax).*"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-collpackages"</span> <span class="na">value=</span><span class="s">"java.util.*"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://docs.oracle.com/javase/6/docs/api/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://docs.oracle.com/javaee/6/api/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://jsr-305.googlecode.com/svn/trunk/javadoc/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://docs.jboss.org/hibernate/beanvalidation/spec/1.1/api/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://docs.jboss.org/hibernate/validator/5.2/api/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://google-guice.googlecode.com/svn/tags/3.0/javadoc/packages.html"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"http://docs.spring.io/spring/docs/4.0.x/javadoc-api/"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">"-link"</span> <span class="na">value=</span><span class="s">"https://jersey.java.net/apidocs/1.11/jersey/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/doclet&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.oracle.com/javase/6/docs/api/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.oracle.com/javaee/6/api/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://jsr-305.googlecode.com/svn/trunk/javadoc/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.jboss.org/hibernate/beanvalidation/spec/1.1/api/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.jboss.org/hibernate/validator/5.2/api/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://commons.apache.org/proper/commons-lang/javadocs/api-3.3.2/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://commons.apache.org/proper/commons-collections/javadocs/api-release/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://google-guice.googlecode.com/svn/tags/3.0/javadoc/packages.html"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.spring.io/spring/docs/4.0.x/javadoc-api/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://jersey.java.net/apidocs/1.11/jersey/"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/javadoc&gt;</span>
   <span class="nt">&lt;/target&gt;</span>
</code></pre></div></div>

<p>It could be better to use deployed artifact instead of the pom.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">name=</span><span class="s">"thirdstage.red5.build"</span> <span class="na">basedir=</span><span class="s">"."</span> <span class="na">default=</span><span class="s">"echo.env"</span>
   <span class="na">xmlns:artifact=</span><span class="s">"antlib:org.apache.maven.artifact.ant"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;property</span> <span class="na">environment=</span><span class="s">"env"</span><span class="nt">/&gt;</span>

   <span class="nt">&lt;typedef</span> <span class="na">resource=</span><span class="s">"org/apache/maven/artifact/ant/antlib.xml"</span>
            <span class="na">uri=</span><span class="s">"antlib:org.apache.maven.artifact.ant"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;classpath&gt;</span>
         <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${basedir}/lib/maven-ant-tasks-2.1.3.jar"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/classpath&gt;</span>
   <span class="nt">&lt;/typedef&gt;</span>

   <span class="nt">&lt;artifact:dependencies</span> <span class="na">pathId=</span><span class="s">"classpath.red5"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.red5"</span> <span class="na">artifactId=</span><span class="s">"red5-io"</span> <span class="na">version=</span><span class="s">"1.0.5-RELEASE"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;exclusion</span> <span class="na">groupId=</span><span class="s">"org"</span> <span class="na">artifactId=</span><span class="s">"jaudiotagger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.red5"</span> <span class="na">artifactId=</span><span class="s">"red5-server-common"</span> <span class="na">version=</span><span class="s">"1.0.5-RELEASE"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;exclusion</span> <span class="na">groupId=</span><span class="s">"org"</span> <span class="na">artifactId=</span><span class="s">"jaudiotagger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.red5"</span> <span class="na">artifactId=</span><span class="s">"red5-service"</span> <span class="na">version=</span><span class="s">"1.0.5-RELEASE"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;exclusion</span> <span class="na">groupId=</span><span class="s">"org"</span> <span class="na">artifactId=</span><span class="s">"jaudiotagger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.red5"</span> <span class="na">artifactId=</span><span class="s">"red5-server"</span> <span class="na">version=</span><span class="s">"1.0.5-RELEASE"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;exclusion</span> <span class="na">groupId=</span><span class="s">"org"</span> <span class="na">artifactId=</span><span class="s">"jaudiotagger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;dependency</span> <span class="na">groupId=</span><span class="s">"org.red5"</span> <span class="na">artifactId=</span><span class="s">"red5-client"</span> <span class="na">version=</span><span class="s">"1.0.5-RELEASE"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;exclusion</span> <span class="na">groupId=</span><span class="s">"org"</span> <span class="na">artifactId=</span><span class="s">"jaudiotagger"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/dependency&gt;</span>
      <span class="nt">&lt;remoteRepository</span> <span class="na">id=</span><span class="s">"grails"</span> <span class="na">url=</span><span class="s">"https://repo.grails.org/grails/repo/"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;snapshots</span> <span class="na">checksumPolicy=</span><span class="s">"warn"</span> <span class="na">updatePolicy=</span><span class="s">"never"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;releases</span> <span class="na">checksumPolicy=</span><span class="s">"warn"</span> <span class="na">updatePolicy=</span><span class="s">"never"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/remoteRepository&gt;</span>
   <span class="nt">&lt;/artifact:dependencies&gt;</span>

   <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"echo.env"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;echo&gt;</span>Defined properties : <span class="nt">&lt;/echo&gt;</span>
      <span class="nt">&lt;echoproperties</span> <span class="nt">/&gt;</span>
   <span class="nt">&lt;/target&gt;</span>

   <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"generate.javadoc"</span> <span class="na">description=</span><span class="s">"Generate Javadoc for Red5 projects"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;javadoc</span> <span class="na">destdir=</span><span class="s">"${basedir}/target/javadoc"</span>
         <span class="na">maxmemory=</span><span class="s">"256m"</span> <span class="na">access=</span><span class="s">"private"</span> <span class="na">encoding=</span><span class="s">"utf-8"</span> <span class="na">docencoding=</span><span class="s">"utf-8"</span>
               <span class="na">windowtitle=</span><span class="s">"Red5 API"</span> <span class="na">doctitle=</span><span class="s">"Red5 API"</span>
               <span class="na">version=</span><span class="s">"true"</span> <span class="na">use=</span><span class="s">"true"</span> <span class="na">author=</span><span class="s">"true"</span> <span class="na">splitindex=</span><span class="s">"true"</span>
               <span class="na">nodeprecated=</span><span class="s">"false"</span> <span class="na">notree=</span><span class="s">"false"</span> <span class="na">noindex=</span><span class="s">"false"</span> <span class="na">nohelp=</span><span class="s">"false"</span> <span class="na">nonavbar=</span><span class="s">"false"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;sourcepath&gt;</span>
            <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${basedir}/../red5-io/src/main/java"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${basedir}/../red5-server-common/src/main/java"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${basedir}/../red5-service/src/main/java"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${basedir}/../red5-server/src/main/java"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;pathelement</span> <span class="na">location=</span><span class="s">"${basedir}/../red5-client/src/main/java"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;/sourcepath&gt;</span>
         <span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">"classpath.red5"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.oracle.com/javase/6/docs/api/"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://docs.oracle.com/javaee/6/api/"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"https://mina.apache.org/mina-project/apidocs/"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">"http://ehcache.org/apidocs/2.6.9/"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/javadoc&gt;</span>
   <span class="nt">&lt;/target&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre></div></div>

<h2 id="scala">Scala</h2>

<h3 id="waiting-enter-key-press-on-the-console-1">Waiting <code class="highlighter-rouge">Enter</code> key press on the console</h3>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">...</span>
    <span class="k">var</span> <span class="n">cnt</span> <span class="k">=</span> <span class="mi">0</span>
    <span class="k">var</span> <span class="n">keyed</span> <span class="k">=</span> <span class="kc">false</span>
    <span class="k">do</span> <span class="o">{</span>
      <span class="n">cnt</span> <span class="k">=</span> <span class="nc">System</span><span class="o">.</span><span class="n">in</span><span class="o">.</span><span class="n">available</span><span class="o">()</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">cnt</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="o">)</span> <span class="n">keyed</span> <span class="k">=</span> <span class="kc">true</span>
      <span class="k">else</span> <span class="nc">Thread</span><span class="o">.</span><span class="n">sleep</span><span class="o">(</span><span class="mi">500</span><span class="o">)</span>
    <span class="o">}</span> <span class="k">while</span> <span class="o">(!</span><span class="n">keyed</span><span class="o">)</span>

    <span class="k">while</span> <span class="o">(</span><span class="n">cnt</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="n">in</span><span class="o">.</span><span class="n">read</span><span class="o">()</span>
      <span class="n">cnt</span> <span class="o">-=</span> <span class="n">cnt</span>
    <span class="o">}</span>
    <span class="o">...</span>
</code></pre></div></div>

<h2 id="c-c">C, C++</h2>

<h3 id="pointer-address-operator-and-indirectiondereferencing-operator">Pointer, Address Operator and Indirection(Dereferencing) Operator</h3>

<p>The following definitions and explanations are from the ANCI C specicifation</p>

<ul>
  <li><strong>Address and indirection operators</strong>
    <ul>
      <li><strong>Constraints</strong>
        <ol>
          <li>The operand of the unary <strong>&amp;</strong> operator shall be either a function designator, the result of a [] or unary <strong>*</strong> operator, or an lvalue that designates an object that is not a bit-field and is not declared with the register storage-class specifier.</li>
          <li>The operand of the unary <strong>*</strong> operator shall have pointer type.</li>
        </ol>
      </li>
      <li><strong>Semantics</strong>
        <ol>
          <li>The unary <strong>&amp;</strong> operator yields the address of its operand. If the operand has type ‘‘type’’, the result has type ‘‘pointer to type’’. If the operand is the result of a unary <strong>*</strong> operator, neither that operator nor the <strong>&amp;</strong> operator is evaluated and the result is as if both were omitted, except that the constraints on the operators still apply and the result is not an lvalue. Similarly, if the operand is the result of a <strong>[]</strong> operator, neither the <strong>&amp;</strong> operator nor the unary <strong>*</strong> that is implied by the <strong>[]</strong> is evaluated and the result is as if the <strong>&amp;</strong> operator were removed and the <strong>[]</strong> operator were changed to a <strong>+</strong> operator. Otherwise, the result is a pointer to the object or function designated by its operand.</li>
          <li>The unary <strong>*</strong> operator denotes indirection. If the operand points to a function, the result is a function designator; if it points to an object, the result is an lvalue designating the object. If the operand has type ‘‘pointer to type’’, the result has type ‘‘type’’. If an invalid value has been assigned to the pointer, the behavior of the unary <strong>*</strong> operator is undefined.</li>
        </ol>
      </li>
    </ul>
  </li>
</ul>

<p>The following code snippet is from the book ‘The C Programming Language’</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">z</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
<span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>                   <span class="cm">/* p is a pointer to int */</span>

<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">;</span>                   <span class="cm">/* p now points to x */</span>
<span class="n">y</span> <span class="o">=</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>                   <span class="cm">/* y is now 1 */</span>
<span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                   <span class="cm">/* x is now 0 */</span>
<span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>                <span class="cm">/* p now points to z[0] */</span>
</code></pre></div></div>

<h3 id="developing-visual-c-application-using-eclipse-cdt">Developing Visual C++ application using Eclipse CDT</h3>

<h4 id="visual-c-2008-and-cdt">Visual C++ 2008 and CDT</h4>

<h5 id="visual-c-project--environment-variables">Visual C++ project : Environment Variables</h5>

<ul>
  <li>In case of Visual Studio 2008 on Windows 7 64bit, the environment variable are defined at a batch file called from the <code class="highlighter-rouge">C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat</code>.</li>
</ul>

<!-- -->

<ul>
  <li>Related files
    <ul>
      <li><code class="highlighter-rouge">C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\vcvarsall.bat</code></li>
      <li><code class="highlighter-rouge">C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\vcvars32.bat</code></li>
      <li><code class="highlighter-rouge">C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Tools\vsvars32.bat</code></li>
    </ul>
  </li>
</ul>

<!-- -->

<ul>
  <li>Defined Variables</li>
</ul>

<table>
  <thead>
    <tr>
      <th>Environment Variable</th>
      <th>Value</th>
      <th>Remarks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>VSInstallDir</td>
      <td>C:\Program Files (x86)\Microsoft Visual Studio 9.0</td>
      <td> </td>
    </tr>
    <tr>
      <td>VCInstallDir</td>
      <td>C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC</td>
      <td> </td>
    </tr>
    <tr>
      <td>WindowsSdkDir</td>
      <td>C:\Program Files\Microsoft SDKs\Windows\v6.0A\</td>
      <td>HKEY_CURRENT_USER\Software\Microsoft\Microsoft SDKs\Windows C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A</td>
    </tr>
    <tr>
      <td>FrameworkDir</td>
      <td>C:\Windows\Microsoft.NET\Framework</td>
      <td> </td>
    </tr>
    <tr>
      <td>FrameworkVersion</td>
      <td>v2.0.50727</td>
      <td> </td>
    </tr>
    <tr>
      <td>FrameworkSDKDir</td>
      <td>?</td>
      <td> </td>
    </tr>
    <tr>
      <td>FxCopDir</td>
      <td>?</td>
      <td> </td>
    </tr>
    <tr>
      <td>ProgramFiles</td>
      <td>C:\Program Files</td>
      <td>Predefined by Windows 7</td>
    </tr>
    <tr>
      <td>SystemRoot</td>
      <td>C:\Windows</td>
      <td>Predefined by Windows 7</td>
    </tr>
  </tbody>
</table>

<h5 id="visual-c-project--build-configuration-base">Visual C++ project : Build configuration base</h5>

<ul>
  <li>Implicit base <code class="highlighter-rouge">path</code> (<code class="highlighter-rouge">PATH</code>)</li>
</ul>

<pre><code class="language-dos">$(VCInstallDir)\bin
$(WindowsSdkDir)\bin
$(VSInstallDir)Common7\Tools\bin
$(VSInstallDir)Common7\tools
$(VSInstallDir)Common7\ide
$(ProgramFiles)\HTML Help Workshop
$(FrameworkSDKDir)bin
$(FrameworkDir)$(FrameworkVersion)
$(VSInstallDir)
$(SystemRoot)\SysWow64
$(FxCopDir)
$(PATH)
</code></pre>

<ul>
  <li>Implicit base <code class="highlighter-rouge">include</code> path (<code class="highlighter-rouge">INCLUDE</code>)</li>
</ul>

<pre><code class="language-dos">$(VCInstallDir)include
$(VCInstallDir)atlmfc\include
$(WindowsSdkDir)\include
$(FrameworkSDKDir)include
</code></pre>

<ul>
  <li>Implicit <code class="highlighter-rouge">LIBPATH</code></li>
</ul>

<pre><code class="language-dos">$(FrameworkDir)$(FrameworkVersion)
$(VCInstallDir)atlmfc\lib
$(VCInstallDir)lib
</code></pre>

<ul>
  <li>Implicit <code class="highlighter-rouge">LIB</code></li>
</ul>

<pre><code class="language-dos">$(VCInstallDir)lib
$(VCInstallDir)atlmfc\lib
$(VCInstallDir)atlmfc\lib\i386
$(WindowsSdkDir)\lib
$(FrameworkSDKDir)lib
$(VSInstallDir)
$(VSInstallDir)lib
</code></pre>

<h5 id="cdt-configuration--build-variables">CDT Configuration &gt; build variables</h5>

<table>
  <thead>
    <tr>
      <th>Build Variable</th>
      <th>Value</th>
      <th>Remarks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>VSInstallDir</td>
      <td>${env_var:VS_INSTALL_DIR}</td>
      <td> </td>
    </tr>
    <tr>
      <td>VCInstallDir</td>
      <td>${env_var:VC_INSTALL_DIR}</td>
      <td> </td>
    </tr>
    <tr>
      <td>WindowsSdkDir</td>
      <td>${env_var:WINDOWS_SDK_DIR}</td>
      <td> </td>
    </tr>
    <tr>
      <td>FrameworkDir</td>
      <td>${env_var:FRAMEWORK_DIR}</td>
      <td> </td>
    </tr>
    <tr>
      <td>FrameworkVersion</td>
      <td>${env_var:FRAMEWORK_VERSION}</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h5 id="cdt-configuration--environment">CDT Configuration &gt; Environment</h5>

<table>
  <thead>
    <tr>
      <th>Environment Variable</th>
      <th>Value</th>
      <th>Remarks</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>INCLUDE</td>
      <td>${VCInstallDir}\include;${VCInstallDir}\atlmfc\include;${WindowsSdkDir}\include;${env_var:INCLUDE}</td>
      <td> </td>
    </tr>
    <tr>
      <td>JAVA_HOME</td>
      <td>${env_var:JAVA_32_HOME}</td>
      <td> </td>
    </tr>
    <tr>
      <td>LIB</td>
      <td>${VCInstallDir}\lib;${VCInstallDir}\atlmfc\lib;${VCInstallDir}\atlmfc\lib\i386;${WindowsSdkDir}\lib;${FrameworkSDKDir}\lib;${VSInstallDir};${VSInstallDir}\lib;${env_var:LIB}</td>
      <td> </td>
    </tr>
    <tr>
      <td>LIBPATH</td>
      <td>${FrameworkDir}\${FrameworkVersion};${VCInstallDir}\atlmfc\lib;${VCInstallDir}\lib;${env_var:LIBPATH}</td>
      <td> </td>
    </tr>
    <tr>
      <td>PATH</td>
      <td>${VCInstallDir}\bin;${WindowsSdkDir}\bin;${VSInstallDir}\Common7\Tools\bin;${VSInstallDir}\Common7\Tools;${VSInstallDir}\Common7\IDE;${ProgramFiles}\HTML Help Workshop;${FrameworkDir}\${FrameworkVersion};${VSInstallDir};${SystemRoot}\SysWow64;${VCInstallDir}\VCPackages;${env_var:PATH}</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="visual-c-2010-express">Visual C++ 2010 Express</h4>

<h3 id="visual-c-build-configuration-sample--apache-log4cxx">Visual C++ Build Configuration Sample : Apache Log4cxx</h3>

<ul>
  <li>As of Log4cxx 0.10.0</li>
</ul>

<h4 id="compile">Compile</h4>

<ul>
  <li><strong>Debug</strong> build</li>
</ul>

<pre><code class="language-dos">/Od /I "..\src\main\include" /I "..\..\apr\include" /I "..\..\apr-util\include" /D "_DEBUG" /D "_USRDLL" /D "DLL_EXPORTS" /D "LOG4CXX" /D "APR_DECLARE_STATIC" /D "APU_DECLARE_STATIC" /D "WIN32" /D "_VC80_UPGRADE=0x0600" /D "_WINDLL" /FD /EHsc /RTC1 /MDd /Fp".\Debug/log4cxx.pch" /Fo".\Debug/" /Fd".\Debug/" /nologo /c /Zi /TP /errorReport:prompt
</code></pre>

<ul>
  <li><strong>Release</strong> build</li>
</ul>

<pre><code class="language-dos">/O2 /Ob1 /I "..\src\main\include" /I "..\..\apr\include" /I "..\..\apr-util\include" /D "NDEBUG" /D "_USRDLL" /D "DLL_EXPORTS" /D "LOG4CXX" /D "APR_DECLARE_STATIC" /D "APU_DECLARE_STATIC" /D "WIN32" /D "_VC80_UPGRADE=0x0600" /D "_WINDLL" /GF /FD /EHsc /MD /Gy /Fp".\Release/log4cxx.pch" /Fo".\Release/" /Fd".\Release/" /nologo /c /TP /errorReport:prompt
</code></pre>

<h4 id="link">Link</h4>

<ul>
  <li><strong>Debug</strong> build</li>
</ul>

<pre><code class="language-dos">/OUT:".\Debug/log4cxx.dll" /INCREMENTAL:NO /NOLOGO /DLL /MANIFEST /MANIFESTFILE:".\Debug\log4cxx.dll.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:".\Debug/log4cxx.pdb" /SUBSYSTEM:CONSOLE /DYNAMICBASE:NO /IMPLIB:".\Debug/log4cxx.lib" /ERRORREPORT:PROMPT ADVAPI32.LIB WS2_32.LIB MSWSOCK.LIB SHELL32.LIB ODBC32.LIB  kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib "..\..\apr-util\libd\aprutil-1.lib" "..\..\apr-util\xml\expat\lib\libd\xml.lib" "..\..\apr\libd\apr-1.lib"
</code></pre>

<ul>
  <li><strong>Release</strong> build</li>
</ul>

<pre><code class="language-dos">/OUT:".\Release/log4cxx.dll" /INCREMENTAL:NO /NOLOGO /DLL /MANIFEST /MANIFESTFILE:".\Release\log4cxx.dll.intermediate.manifest" /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /PDB:".\Release/log4cxx.pdb" /SUBSYSTEM:CONSOLE /DYNAMICBASE:NO /IMPLIB:".\Release/log4cxx.lib" /ERRORREPORT:PROMPT ADVAPI32.LIB WS2_32.LIB MSWSOCK.LIB SHELL32.LIB ODBC32.LIB  kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib "..\..\apr-util\libd\aprutil-1.lib" "..\..\apr-util\xml\expat\lib\libd\xml.lib" "..\..\apr\libd\apr-1.lib"
</code></pre>

<h2 id="javascript">JavaScript</h2>

<h3 id="sample-to-understand-scoping-and-hoisting-of-javascript">Sample to understand scoping and hoisting of JavaScript</h3>

<p>The following sample is part of QUnit script to confirm the scope and hoisting of JavaScript explained at <a href="http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html">http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html</a></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">test</span><span class="p">(</span><span class="s2">"scope test 1"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="c1">//For explanation, refer http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html</span>

  <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">bar</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">foo</span><span class="p">){</span> <span class="c1">//this block will be EXECUTED. !!!</span>
      <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">//at interpret time, declare 'var foo' at the 1st line of bar().</span>
      <span class="nx">bar</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">bar</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="kd">function</span> <span class="nx">baz</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">baz</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">foo</span><span class="p">){</span> <span class="c1">//this block will NOT be executed. !!!</span>
      <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">//at interpret time, declare 'var foo' at the 1st line of baz().</span>
      <span class="nx">baz</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">baz</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="kd">function</span> <span class="nx">quz</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">quz</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">a</span><span class="p">(){</span> <span class="nx">quz</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="p">};</span> <span class="c1">//fail to override a, but no error.</span>
    <span class="k">try</span><span class="p">{</span>
      <span class="nx">a</span><span class="p">();</span> <span class="c1">//will throw error at this line.</span>
    <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="nx">quz</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span> <span class="p">};</span>
    <span class="k">return</span> <span class="nx">quz</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="kd">function</span> <span class="nx">kix</span><span class="p">(){</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">//global scope</span>
    <span class="kd">var</span> <span class="nx">kix</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">b</span><span class="p">(){</span> <span class="nx">kix</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="p">};</span> <span class="c1">//fail to override but no error;</span>
    <span class="nx">kix</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
    <span class="k">try</span><span class="p">{</span>
      <span class="nx">b</span><span class="p">();</span> <span class="c1">//will throw error at this line.</span>
    <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="nx">kix</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">return</span> <span class="nx">kix</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">equal</span><span class="p">(</span><span class="nx">bar</span><span class="p">(),</span> <span class="mi">10</span><span class="p">);</span>
  <span class="nx">equal</span><span class="p">(</span><span class="nx">baz</span><span class="p">(),</span> <span class="mi">1</span><span class="p">);</span>
  <span class="nx">equal</span><span class="p">(</span><span class="nx">quz</span><span class="p">(),</span> <span class="mi">100</span><span class="p">);</span>
  <span class="nx">equal</span><span class="p">(</span><span class="nx">kix</span><span class="p">(),</span> <span class="mi">101</span><span class="p">);</span>
  <span class="nx">equal</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="creating-global-object-in-iief">Creating global object in IIEF</h3>

<p>The following sample is a littel modification of <code class="highlighter-rouge">d3.js</code> which shows :</p>

<ul>
  <li>How to encapsulate the global object using IIEF and closuer.</li>
  <li>Exposing the object into global in case of AMD, RequireJS or non-AMD environment.</li>
  <li>Prevent the misuse or unintended pollution on <code class="highlighter-rouge">window</code> or <code class="highlighter-rouge">undefined</code>.</li>
</ul>

<p>But the following code doesn’t show proper contents in Eclipse Outline view. Need more elaboration.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="nx">$</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">){</span>
   <span class="s2">"use strict"</span><span class="p">;</span>

   <span class="kd">var</span> <span class="nx">d3</span> <span class="o">=</span> <span class="p">{</span> <span class="na">version</span><span class="p">:</span> <span class="s2">"3.4.2"</span> <span class="p">};</span>

   <span class="c1">//...</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s2">"function"</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">define</span><span class="p">(</span><span class="nx">d3</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span> <span class="o">===</span> <span class="s2">"object"</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">d3</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">)(</span><span class="nb">window</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">);</span>
</code></pre></div></div>

<h3 id="basic-coordination-of-chart-with-d3js">Basic coordination of chart with D3.js</h3>

<p>Use more semantic variables of <strong><code class="highlighter-rouge">dimensions</code></strong>, <strong><code class="highlighter-rouge">paddings</code></strong>, <strong><code class="highlighter-rouge">area</code></strong>, <strong><code class="highlighter-rouge">domains</code></strong> or <strong><code class="highlighter-rouge">scales</code></strong> as objects like the following typical example. Note that some properties of <code class="highlighter-rouge">areas.x</code>, <code class="highlighter-rouge">area.y</code>, <code class="highlighter-rouge">domains.x</code> or <code class="highlighter-rouge">domains.y</code> are not objects but arrays to make consistency with the syntax of d3.js.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">var</span> <span class="nx">dimensions</span> <span class="o">=</span> <span class="p">{</span><span class="na">width</span> <span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="na">height</span> <span class="p">:</span> <span class="mi">400</span><span class="p">};</span>
  <span class="kd">var</span> <span class="nx">paddings</span> <span class="o">=</span> <span class="p">{</span><span class="na">top</span> <span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="na">right</span> <span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="na">bottom</span> <span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="na">left</span> <span class="p">:</span> <span class="mi">50</span><span class="p">};</span>
  <span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span> <span class="p">:</span> <span class="p">[</span><span class="nx">paddings</span><span class="p">.</span><span class="nx">left</span><span class="p">,</span> <span class="nx">dimensions</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">paddings</span><span class="p">.</span><span class="nx">right</span><span class="p">],</span>
    <span class="na">y</span> <span class="p">:</span> <span class="p">[</span><span class="nx">dimensions</span><span class="p">.</span><span class="nx">height</span> <span class="o">-</span> <span class="nx">paddings</span><span class="p">.</span><span class="nx">bottom</span><span class="p">,</span> <span class="nx">paddings</span><span class="p">.</span><span class="nx">top</span><span class="p">]</span>  <span class="c1">//large value first !</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">domains</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span> <span class="p">:</span> <span class="p">[</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)],</span>
    <span class="na">y</span> <span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="c1">//create scales</span>
  <span class="kd">var</span> <span class="nx">scales</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span> <span class="p">:</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">time</span><span class="p">.</span><span class="nx">scale</span><span class="p">().</span><span class="nx">range</span><span class="p">(</span><span class="nx">area</span><span class="p">.</span><span class="nx">x</span><span class="p">).</span><span class="nx">domain</span><span class="p">(</span><span class="nx">domains</span><span class="p">.</span><span class="nx">x</span><span class="p">),</span>
    <span class="na">y</span> <span class="p">:</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">().</span><span class="nx">range</span><span class="p">(</span><span class="nx">area</span><span class="p">.</span><span class="nx">y</span><span class="p">).</span><span class="nx">domain</span><span class="p">(</span><span class="nx">domains</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">//create pannel</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"#chart"</span><span class="p">).</span><span class="nx">insert</span><span class="p">(</span><span class="s2">"svg"</span><span class="p">,</span> <span class="s2">"div"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"width"</span><span class="p">,</span> <span class="nx">dimensions</span><span class="p">.</span><span class="nx">width</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"height"</span><span class="p">,</span> <span class="nx">dimensions</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
    <span class="c1">//.style("background-color", "white");</span>

  <span class="kd">var</span> <span class="nx">axis</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">x</span> <span class="p">:</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">axis</span><span class="p">().</span><span class="nx">scale</span><span class="p">(</span><span class="nx">scales</span><span class="p">.</span><span class="nx">x</span><span class="p">).</span><span class="nx">orient</span><span class="p">(</span><span class="s2">"bottom"</span><span class="p">).</span><span class="nx">ticks</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="na">y</span> <span class="p">:</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">axis</span><span class="p">().</span><span class="nx">scale</span><span class="p">(</span><span class="nx">scales</span><span class="p">.</span><span class="nx">y</span><span class="p">).</span><span class="nx">orient</span><span class="p">(</span><span class="s2">"left"</span><span class="p">).</span><span class="nx">ticks</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"#chart svg"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"g"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">classed</span><span class="p">(</span><span class="s2">"axis x"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"transform"</span><span class="p">,</span> <span class="s2">"translate(0, "</span> <span class="o">+</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">")"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">axis</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>

  <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"#chart svg"</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">"g"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">classed</span><span class="p">(</span><span class="s2">"axis y"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">"transform"</span><span class="p">,</span> <span class="s2">"translate("</span> <span class="o">+</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">", 0)"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">axis</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="html-and-css">HTML and CSS</h2>

<h3 id="basic-templates">Basic templates</h3>

<h4 id="html">HTML</h4>

<pre><code class="language-html5">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
&lt;title&gt;Standard Template&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<h4 id="css">CSS</h4>

<ul>
  <li>References
    <ul>
      <li><a href="http://www.smashingmagazine.com/2011/11/29/the-perfect-paragraph/">The Perfect Paragraph</a> (November 29th, 2011)</li>
      <li><a href="http://www.scribd.com/doc/32311867/Design-for-Developers">Design for Developers</a></li>
    </ul>
  </li>
</ul>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">body</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"맑은 고딕"</span><span class="p">,</span> <span class="n">Georgia</span><span class="p">,</span> <span class="n">Verdana</span><span class="p">,</span> <span class="nb">sans-serif</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.0em</span><span class="p">;</span>
  <span class="nl">line-height</span><span class="p">:</span><span class="m">1.5</span><span class="p">;</span>
  <span class="nl">margin-left</span><span class="p">:</span><span class="m">2.0em</span><span class="p">;</span>
  <span class="nl">counter-reset</span><span class="p">:</span> <span class="n">step-h3</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">pre</span><span class="o">,</span> <span class="nt">code</span><span class="o">,</span> <span class="nt">tt</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="n">Consolas</span><span class="p">,</span><span class="nb">monospace</span><span class="p">,</span><span class="n">Courier</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">1.0em</span><span class="p">;</span>
  <span class="nl">line-height</span><span class="p">:</span> <span class="m">1.3</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">table</span> <span class="p">{</span> <span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">th</span><span class="o">,</span> <span class="nt">td</span> <span class="p">{</span> <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="m">#999</span><span class="p">;</span><span class="nl">padding</span><span class="p">:</span> <span class="m">0.2em</span><span class="p">;</span> <span class="p">}</span>

<span class="nt">h1</span><span class="o">,</span> <span class="nt">h2</span><span class="o">,</span> <span class="nt">h3</span><span class="o">,</span> <span class="nt">h4</span><span class="o">,</span> <span class="nt">h5</span><span class="o">,</span> <span class="nt">h6</span> <span class="p">{</span>
  <span class="nl">font-family</span><span class="p">:</span> <span class="s1">"맑은 고딕"</span><span class="p">,</span> <span class="n">Helvetica</span><span class="p">,</span> <span class="s1">"Trebuchet MS"</span><span class="p">,</span> <span class="n">Verdana</span><span class="p">;</span>
  <span class="nl">margin-top</span><span class="p">:</span><span class="m">1.0em</span><span class="p">;</span>
  <span class="nl">margin-bottom</span><span class="p">:</span><span class="m">1px</span><span class="p">;</span>
  <span class="nl">padding-top</span><span class="p">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="nl">padding-bottom</span><span class="p">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="nl">-webkit-font-smoothing</span><span class="p">:</span> <span class="n">antialiased</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">h1</span> <span class="p">{</span> <span class="nl">font-size</span><span class="p">:</span><span class="m">1.8em</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">h2</span> <span class="p">{</span> <span class="nl">font-size</span><span class="p">:</span><span class="m">1.5em</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">h3</span> <span class="p">{</span> <span class="nl">font-size</span><span class="p">:</span><span class="m">1.4em</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">h4</span> <span class="p">{</span> <span class="nl">font-size</span><span class="p">:</span><span class="m">1.3em</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">h5</span> <span class="p">{</span> <span class="nl">font-size</span><span class="p">:</span><span class="m">1.2em</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">h6</span> <span class="p">{</span> <span class="nl">font-size</span><span class="p">:</span><span class="m">1.15em</span><span class="p">;</span> <span class="p">}</span>

<span class="nt">h3</span><span class="nd">:before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h3</span><span class="p">)</span> <span class="s1">". "</span><span class="p">;</span>
  <span class="nl">counter-increment</span><span class="p">:</span> <span class="n">step-h3</span><span class="p">;</span>
  <span class="nl">counter-reset</span><span class="p">:</span> <span class="n">step-h4</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">h4</span><span class="nd">:before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h3</span><span class="p">)</span> <span class="s1">". "</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h4</span><span class="p">)</span> <span class="s1">". "</span><span class="p">;</span>
  <span class="nl">counter-increment</span><span class="p">:</span> <span class="n">step-h4</span><span class="p">;</span>
  <span class="nl">counter-reset</span><span class="p">:</span> <span class="n">step-h5</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">h5</span><span class="nd">:before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h3</span><span class="p">)</span> <span class="s1">". "</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h4</span><span class="p">)</span> <span class="s1">". "</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h5</span><span class="p">)</span> <span class="s1">". "</span><span class="p">;</span>
  <span class="nl">counter-increment</span><span class="p">:</span> <span class="n">step-h5</span><span class="p">;</span>
  <span class="nl">counter-reset</span><span class="p">:</span> <span class="n">step-h6</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">h6</span><span class="nd">:before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h3</span><span class="p">)</span> <span class="s1">". "</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h4</span><span class="p">)</span> <span class="s1">". "</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h5</span><span class="p">)</span> <span class="s1">". "</span> <span class="n">counter</span><span class="p">(</span><span class="n">step-h6</span><span class="p">)</span> <span class="s1">". "</span><span class="p">;</span>
  <span class="nl">counter-increment</span><span class="p">:</span> <span class="n">step-h6</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">div</span><span class="nc">.syntaxhighlighter</span><span class="p">{</span>
  <span class="nl">padding-top</span><span class="p">:</span><span class="m">0.5em</span><span class="p">;</span>
  <span class="nl">padding-bottom</span><span class="p">:</span><span class="m">0.5em</span><span class="p">;</span>
  <span class="nl">padding-left</span><span class="p">:</span><span class="m">0.5em</span><span class="p">;</span>
  <span class="nl">border</span><span class="p">:</span><span class="nb">thin</span> <span class="nb">solid</span> <span class="n">lightgray</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="nc">.syntaxhighlighter</span> <span class="nt">div</span><span class="nc">.line</span><span class="p">{</span>
  <span class="nl">line-height</span><span class="p">:</span><span class="m">1.5</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="xml-xslt-xpath-xquery">XML, XSLT, XPath, XQuery</h2>

<h3 id="useful-or-intelligent-expressions-of-xquery">Useful or intelligent expressions of XQuery</h3>

<p>Think over the following expressions. What are they? These are from the book “XSLT Coookbook” by Sal Mangano.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(50,45,40,34,32,29,-1)[(index-of((('XXL', 'XL', 'L', 'M', 'S', 'XS')), size), 7)[1]]
</code></pre></div></div>

<p>The following iterates just n times not n<sup>2</sup> times.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for $pos in 1 to count($sequence), $item in $sequence[$pos] return $item , $pos
</code></pre></div></div>

<h3 id="use-positional-variable-with-order-by">Use positional variable with <strong><code class="highlighter-rouge">order by</code></strong></h3>

<p>Positional variables are calculated before <strong><code class="highlighter-rouge">oder by</code></strong> process. If you want to use positional variables after ordering, you can make additional query with positional variables on ordered query like inline query of SQL.</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;id-list</span> <span class="na">ordered=</span><span class="s">'true'</span><span class="nt">&gt;</span>
   for $y at $i in (for $x in $doc//@id
      order by string($x)
      return $x)
   return <span class="nt">&lt;id</span> <span class="na">count=</span><span class="s">'{$i}'</span><span class="nt">&gt;</span>{string($y)}<span class="nt">&lt;/id&gt;</span>
<span class="nt">&lt;/id-list&gt;</span>
</code></pre></div></div>

<h2 id="regex">Regex</h2>

<h3 id="normalizing-start-tags-of-xml">Normalizing start tags of XML</h3>

<p>To remove unnecessary white-spaces or line-breaks inside start tags, you can apply two regex pattern nested. In the following JavaScript sample, the tag name is assumed to be more typical than the somewhat complex pattern the XML spec defines.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="kd">function</span> <span class="nx">normalizeXmlTags</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>

    <span class="kd">var</span> <span class="nx">str1</span><span class="p">,</span> <span class="nx">str2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">re</span><span class="p">,</span> <span class="nx">re1</span><span class="p">,</span> <span class="nx">re2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>

    <span class="c1">//normalize start tag including attribute values</span>
    <span class="c1">//refer http://www.w3.org/TR/REC-xml/#AVNormalize</span>
    <span class="c1">//the most common form of xs:name : [A-Za-z_:][-\w:.]+ (http://www.w3.org/TR/xml/#d0e804)</span>
    <span class="nx">re1</span> <span class="o">=</span> <span class="sr">/&lt;</span><span class="se">\s</span><span class="sr">*</span><span class="se">([</span><span class="sr">A-Za-z_:</span><span class="se">][</span><span class="sr">-</span><span class="se">\w</span><span class="sr">:.</span><span class="se">]</span><span class="sr">+</span><span class="se">)([^</span><span class="sr">&lt;&gt;</span><span class="se">]</span><span class="sr">*</span><span class="se">[^\/</span><span class="sr">&lt;&gt;</span><span class="se">])?(\/)?</span><span class="sr">&gt;/g</span><span class="p">;</span>
    <span class="nx">re2</span> <span class="o">=</span> <span class="sr">/</span><span class="se">\s</span><span class="sr">*</span><span class="se">([</span><span class="sr">A-Za-z_:</span><span class="se">][</span><span class="sr">-</span><span class="se">\w</span><span class="sr">:.</span><span class="se">]</span><span class="sr">+</span><span class="se">)\s</span><span class="sr">*=</span><span class="se">\s</span><span class="sr">*</span><span class="se">(?:</span><span class="sr">"</span><span class="se">([^</span><span class="sr">"</span><span class="se">]</span><span class="sr">*</span><span class="se">)</span><span class="sr">"|'</span><span class="se">([^</span><span class="sr">'</span><span class="se">]</span><span class="sr">*</span><span class="se">)</span><span class="sr">'</span><span class="se">)</span><span class="sr">/g</span><span class="p">;</span>

    <span class="nx">str1</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re1</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">p2</span> <span class="o">=</span> <span class="p">(</span><span class="nx">p2</span> <span class="o">||</span> <span class="s2">""</span><span class="p">).</span><span class="nx">trim</span><span class="p">();</span>

      <span class="nx">str2</span> <span class="o">=</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re2</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">match</span><span class="p">,</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span><span class="p">,</span> <span class="nx">p3</span><span class="p">,</span> <span class="nx">offset</span><span class="p">,</span> <span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="s2">" "</span> <span class="o">+</span> <span class="nx">p1</span> <span class="o">+</span> <span class="s2">"="</span><span class="p">;</span>
        <span class="c1">// only one of p2 or p3 always undefined</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">p2</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">result</span> <span class="o">+=</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span> <span class="o">+</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="o">+</span> <span class="s2">"</span><span class="se">\"</span><span class="s2">"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">p3</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">result</span> <span class="o">+=</span> <span class="s2">"'"</span> <span class="o">+</span> <span class="nx">p3</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="o">+</span> <span class="s2">"'"</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span><span class="cm">/*error */</span> <span class="p">}</span>

        <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="s2">"&lt;"</span> <span class="o">+</span> <span class="nx">p1</span> <span class="o">+</span> <span class="nx">str2</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p3</span> <span class="o">||</span> <span class="s2">""</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"&gt;"</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="c1">//normalize the end tag</span>
    <span class="nx">re</span> <span class="o">=</span> <span class="sr">/&lt;</span><span class="se">\/\s</span><span class="sr">*</span><span class="se">([</span><span class="sr">A-Za-z_:</span><span class="se">][</span><span class="sr">-</span><span class="se">\w</span><span class="sr">:.</span><span class="se">]</span><span class="sr">+</span><span class="se">)\s</span><span class="sr">*&gt;/g</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">str1</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s2">"&lt;/$1&gt;"</span><span class="p">);</span>
  <span class="p">};</span>
</code></pre></div></div>

<h2 id="sql">SQL</h2>

<h3 id="hierarchical-queries">Hierarchical queries</h3>

<p>There are two types of hierarchical queries handling tree structure data in adjacency list model (table has recursive relationship using foreign key on parent_id column). One is <strong><code class="highlighter-rouge">(START WITH) CONNECT BY</code></strong> clause provided by Oracle and the other is <strong>recursive <code class="highlighter-rouge">WITH</code></strong> clause(recursive common table expressions). Although <code class="highlighter-rouge">CONNECT BY</code> clause is much more intuitive, robust and simple, <code class="highlighter-rouge">WITH</code> clause is ANSI-SQL standard syntax.</p>

<h4 id="connect-by-clause"><code class="highlighter-rouge">CONNECT BY</code> clause</h4>

<ul>
  <li>Supported by : Oracle 9i +, DB2 9.7 (the latest version)</li>
  <li><a href="http://download.oracle.com/docs/cd/B19306_01/server.102/b14200/queries003.htm#i2053935">Hierarchical Queries of Oracle Database 10g</a></li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="o">~</span>
<span class="k">FROM</span> <span class="o">~</span>
<span class="k">WHERE</span> <span class="o">~</span>
<span class="k">START</span> <span class="k">WITH</span> <span class="n">parent_id</span> <span class="k">IS</span> <span class="k">NULL</span>
<span class="k">CONNECT</span> <span class="k">BY</span> <span class="k">PRIOR</span> <span class="n">id</span> <span class="o">=</span> <span class="n">parent_id</span>
</code></pre></div></div>

<h4 id="recursive-with-clause">Recursive <code class="highlighter-rouge">WITH</code> clause</h4>

<ul>
  <li>Supported by : DB2, SQL Server 2005+, PostgreSQL 8.4 (the latest version)</li>
  <li>ANSI-SQL syntax</li>
  <li><a href="http://www.ibm.com/developerworks/data/library/techarticle/dm-0510rielau/">http://www.ibm.com/developerworks/data/library/techarticle/dm-0510rielau/</a></li>
  <li><a href="http://msdn.microsoft.com/en-us/library/ms175972.aspx">http://msdn.microsoft.com/en-us/library/ms175972.aspx</a></li>
  <li><a href="http://www.postgresql.org/docs/8.4/interactive/queries-with.html">http://www.postgresql.org/docs/8.4/interactive/queries-with.html</a></li>
</ul>

<h4 id="examples-by-database">Examples by database</h4>

<p>The structure of the table for the example statements below is defined by the following DDL.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">table</span> <span class="n">category</span><span class="p">(</span>
 <span class="n">id</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>
 <span class="n">name</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span><span class="p">,</span>
 <span class="n">parent_id</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
 <span class="n">seq</span> <span class="n">number</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
 <span class="n">descn</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span>
 <span class="k">constraint</span> <span class="n">pk_category</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">id</span><span class="p">),</span>
 <span class="k">constraint</span> <span class="n">fk_cateogry_1</span> <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">parent_id</span><span class="p">)</span> <span class="k">references</span> <span class="n">category</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<h5 id="oracle-9i-or-higher">Oracle 9i or higher</h5>

<p>The basic query is :</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent_id</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="n">descn</span><span class="p">,</span>
<span class="k">from</span> <span class="n">category</span>
<span class="k">START</span> <span class="k">WITH</span> <span class="n">parent_id</span> <span class="k">is</span> <span class="k">null</span>
<span class="k">CONNECT</span> <span class="k">BY</span> <span class="k">PRIOR</span> <span class="n">id</span> <span class="o">=</span> <span class="n">parent_id</span>
</code></pre></div></div>

<p>Oracle 9i provides <strong><code class="highlighter-rouge">LEVEL</code></strong> pseudo-column, <strong><code class="highlighter-rouge">SYS_CONNECT_BY</code></strong> function and <strong><code class="highlighter-rouge">ORDER SIBLINGS BY</code></strong> clause which can be used in hierarchical queries.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent_id</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="k">LEVEL</span><span class="p">,</span> <span class="n">descn</span><span class="p">,</span>
       <span class="n">SYS_CONNECT_BY_PATH</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'//'</span><span class="p">)</span> <span class="k">as</span> <span class="n">id_path</span><span class="p">,</span>
       <span class="n">SYS_CONNECT_BY_PATH</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">'//'</span><span class="p">)</span> <span class="k">as</span> <span class="n">name_path</span>
<span class="k">from</span> <span class="n">category</span>
<span class="k">START</span> <span class="k">WITH</span> <span class="n">parent_id</span> <span class="k">is</span> <span class="k">null</span>
<span class="k">CONNECT</span> <span class="k">BY</span> <span class="k">PRIOR</span> <span class="n">id</span> <span class="o">=</span> <span class="n">parent_id</span>
<span class="k">ORDER</span> <span class="n">SIBLINGS</span> <span class="k">BY</span> <span class="n">seq</span><span class="p">,</span> <span class="n">name</span>
</code></pre></div></div>

<p>Oracle 10g provides additional <strong><code class="highlighter-rouge">CONNECT_BY_ISLEAF</code></strong> pseudo-column, <strong><code class="highlighter-rouge">CONNECT_BY_ISCYCLE</code></strong> pseudo-column and <strong><code class="highlighter-rouge">CONNECT BY NOCYCLE</code></strong>.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parent_id</span><span class="p">,</span> <span class="n">seq</span><span class="p">,</span> <span class="k">LEVEL</span><span class="p">,</span> <span class="n">descn</span><span class="p">,</span>
       <span class="n">SYS_CONNECT_BY_PATH</span><span class="p">(</span><span class="n">id</span><span class="p">,</span> <span class="s1">'//'</span><span class="p">)</span> <span class="k">as</span> <span class="n">id_path</span><span class="p">,</span>
       <span class="n">SYS_CONNECT_BY_PATH</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">'//'</span><span class="p">)</span> <span class="k">as</span> <span class="n">name_path</span><span class="p">,</span>
       <span class="n">CONNECT_BY_ISLEAF</span> <span class="k">as</span> <span class="n">is_leaf</span>
<span class="k">from</span> <span class="n">category</span>
<span class="k">START</span> <span class="k">WITH</span> <span class="n">parent_id</span> <span class="k">is</span> <span class="k">null</span>
<span class="k">CONNECT</span> <span class="k">BY</span> <span class="n">NOCYCLE</span> <span class="k">PRIOR</span> <span class="n">id</span> <span class="o">=</span> <span class="n">parent_id</span> <span class="k">and</span> <span class="k">LEVEL</span> <span class="o">&gt;=</span> <span class="mi">5</span>
<span class="k">ORDER</span> <span class="n">SIBLINGS</span> <span class="k">BY</span> <span class="n">seq</span><span class="p">,</span> <span class="n">name</span>
</code></pre></div></div>

<h5 id="microsoft-sql-server-2005-or-higher">Microsoft SQL Server 2005 or higher</h5>

<p>The basic hierarchical query is</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WITH</span> <span class="n">v_category</span><span class="p">(</span><span class="nv">"id"</span><span class="p">,</span> <span class="nv">"name"</span><span class="p">,</span> <span class="nv">"level"</span><span class="p">,</span> <span class="n">parent_id</span><span class="p">)</span> <span class="k">as</span> <span class="p">(</span>
   <span class="k">select</span> <span class="nv">"id"</span><span class="p">,</span> <span class="nv">"name"</span><span class="p">,</span> <span class="mi">1</span> <span class="k">as</span> <span class="nv">"level"</span><span class="p">,</span> <span class="n">parent_id</span>
   <span class="k">from</span> <span class="n">category</span>
   <span class="k">where</span> <span class="n">id</span> <span class="k">is</span> <span class="k">null</span>
   <span class="k">union</span> <span class="k">all</span>
   <span class="k">select</span> <span class="n">a</span><span class="p">.</span><span class="nv">"id"</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="nv">"level"</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">parent_id</span>
   <span class="k">from</span> <span class="n">category</span> <span class="k">as</span> <span class="n">a</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">v_category</span> <span class="k">as</span> <span class="n">b</span> <span class="k">on</span> <span class="n">a</span><span class="p">.</span><span class="n">parent_id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="nv">"id"</span>
<span class="p">)</span>
<span class="k">select</span> <span class="nv">"id"</span><span class="p">,</span> <span class="nv">"name"</span><span class="p">,</span> <span class="nv">"level"</span><span class="p">,</span> <span class="n">parent_id</span>
<span class="k">from</span> <span class="n">v_category</span>
</code></pre></div></div>

<h4 id="readings">Readings</h4>

<ul>
  <li><a href="http://www.sqlsummit.com/AdjacencyList.htm">Adjacency list model</a></li>
  <li><a href="http://www.oracle-developer.net/display.php?id=212">Subquery factoring in Oracle 9i</a></li>
  <li><a href="http://download.oracle.com/docs/cd/E11882_01/server.112/e10592/statements_10002.htm#BABCDJDB">Recursive Subquery Factoring Examples of Oracle 11.2</a>
    <ul>
      <li>Oracle at last added recursive feature to existing with clause.</li>
    </ul>
  </li>
  <li><a href="http://www.ibm.com/developerworks/data/library/techarticle/dm-0907oracleappsondb2/">DB2 9.7: Run Oracle applications on DB2 9.7 for Linux, Unix, and Windows</a></li>
</ul>

<h4 id="misc">misc</h4>

<ul>
  <li>MySQL (up to 6.0, latest version) still doesn’t support hierarchical query.</li>
</ul>

<h2 id="ffmpeg">FFmpeg</h2>

<ul>
  <li><a href="https://www.ffmpeg.org/ffmpeg.html"><code class="highlighter-rouge">ffmpeg</code> Documentation</a></li>
  <li><a href="https://www.ffmpeg.org/ffprobe.html"><code class="highlighter-rouge">ffprobe</code> Documentation</a></li>
  <li><a href="https://trac.ffmpeg.org/wiki/Encode/H.264">FFmpeg and H.264 Encoding Guide</a></li>
</ul>

<h3 id="querying-information-on-a-media">Querying information on a media</h3>

<pre><code class="language-dos">ffprobe -unit -pretty -print_format json ^
-show_format -show_streams -show_programs -show_chapters ^
-show_program_version  -show_library_versions -show_versions ^
matrix2-superbowltrailer640_dl.mov
</code></pre>

<h3 id="encoding-a-video-using-h264">Encoding a video using H.264</h3>

<pre><code class="language-dos">ffmpeg -i matrix2-superbowltrailer640_dl.mov ^
-an -c:v libx264 -r 30 -aspect 16:9 -bf 0 -refs 1 ^
-pix_fmt yuvj420p -preset veryslow -profile:v main -level 4.1 ^
-format avi matrix2-superbowltrailer640_dl.avi
</code></pre>

<pre><code class="language-dos">ffmpeg -i matrix2-superbowltrailer640_dl.mov ^
-an -c:v libx264 -r 30 -aspect 16:9 -bf 0 -refs 1 ^
-pix_fmt yuvj420p -preset veryslow -profile:v main -level 4.1 ^
-format mp4 matrix2-superbowltrailer640_dl.mp4
</code></pre>

<h2 id="misc-1">Misc.</h2>

<h3 id="typical-sample-of-findbugs-exclude-filter">Typical sample of FindBugs’ exclude filter</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;FindBugsFilter&gt;</span>

  <span class="c">&lt;!--
  Details of filter file : "http://findbugs.sourceforge.net/manual/filter.html"
  Details of bug pattern :
    . FindBugs built-in : http://findbugs.sourceforge.net/bugDescriptions.html
    . fb-contrib : http://fb-contrib.sourceforge.net/bugdescriptions.html
  --&gt;</span>

  <span class="c">&lt;!-- GROUP 1. test classes --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Class</span> <span class="na">name=</span><span class="s">"~.*Test[0-9]*"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- ProcessorTest, ProcessorTest1, ProcessorTest2 --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Class</span> <span class="na">name=</span><span class="s">"~.*Test[0-9]*\$.*"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- ProcessorTest$Task, ProcessorTest1$Task --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Class</span> <span class="na">name=</span><span class="s">"~.*\.Test[A-Z][a-zA-Z0-9]*"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- TestProcessor --&gt;</span>

  <span class="c">&lt;!-- GROUP 2. specific to this application or library --&gt;</span>


  <span class="c">&lt;!-- GROUP 3. patterns in LOW priority in most cases --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"BAS_BLOATED_ASSIGNMENT_SCOPE"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"BX_UNBOXED_AND_COERCED_FOR_TERNARY_OPERATOR"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"CC_CYCLOMATIC_COMPLEXITY"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"CD_CIRCULAR_DEPENDENCY"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DLC_DUBIOUS_LIST_COLLECTION"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;</span>
      <span class="c">&lt;!-- The following detection find false cases to much as of FindBugs 2.0.2.
      Maybe a bug in the detector --&gt;</span>
      <span class="nt">&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DLS_DEAD_LOCAL_STORE"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DLS_DEAD_LOCAL_STORE_OF_NULL"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DLS_DEAD_LOCAL_STORE_IN_RETURN"</span><span class="nt">/&gt;&lt;/Match&gt;</span>

  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DM_CONVERT_CASE"</span><span class="nt">/&gt;&lt;/Match&gt;</span>

  <span class="nt">&lt;Match&gt;</span>
      <span class="c">&lt;!--  Default encoding can be explicitly specified using -Dfile.encoding option
      at JVM's loading time. --&gt;</span>
      <span class="nt">&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DM_DEFAULT_ENCODING"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"DRE_DECLARED_RUNTIME_EXCEPTION"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"EI_EXPOSE_REP"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"EI_EXPOSE_REP2"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"EXS_EXCEPTION_SOFTENING_NO_CHECKED"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"EXS_EXCEPTION_SOFTENING_HAS_CHECKED"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"EXS_EXCEPTION_SOFTENING_NO_CONSTRAINTS"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"FCBL_FIELD_COULD_BE_LOCAL"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"FL_MATH_USING_FLOAT_PRECISION"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>

  <span class="nt">&lt;Match&gt;</span>
    <span class="c">&lt;!--
    Performance related bug pattern but in low rank.
    Needs more review before including this pattrn.
    Seems to be included in fb-contrib, but not listed in the official documentation of fb-contrib as of now.
    --&gt;</span>
    <span class="nt">&lt;Bug</span> <span class="na">pattern=</span><span class="s">"IMA_INEFFICIENT_MEMBER_ACCESS"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/Match&gt;</span>

  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"ITC_INHERITANCE_TYPE_CHECKING"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"LG_LOST_LOGGER_DUE_TO_WEAK_REFERENCE"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"LO_LOGGER_LOST_EXCEPTION_STACK_TRACE"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"LO_STUTTERED_MESSAGE"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MDM_INETADDRESS_GETLOCALHOST"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>

  <span class="c">&lt;!-- duplicate with DM_DEFAULT_ENCODING which is one FindBugs built-in pattern --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MDM_STRING_BYTES_ENCODING"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>

  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MRC_METHOD_RETURNS_CONSTANT"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MS_CANNOT_BE_FINAL"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MS_OOI_PKGPROTECT"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MS_PKGPROTECT"</span> <span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"MS_SHOULD_BE_FINAL"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NAB_NEEDLESS_BOOLEAN_CONSTANT_CONVERSION"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NAB_NEEDLESS_BOXING_PARSE"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NAB_NEEDLESS_BOXING_STRING_CTOR"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NAB_NEEDLESS_BOX_TO_CAST"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NAB_NEEDLESS_BOXING_VALUEOF"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NAB_NEEDLESS_AUTOBOXING_VALUEOF"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NM_FIELD_NAMING_CONVENTION"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"NPMC_NON_PRODUCTIVE_METHOD_CALL"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>

  <span class="c">&lt;!-- expreimental. as is described documentation,
    "essentially the same as the OS_OPEN_STREAM and ODR_OPEN_DATABASE_RESOURCE bug patter" --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"OBL_UNSATISFIED_OBLIGATION_EXCEPTION_EDGE"</span><span class="nt">/&gt;&lt;/Match&gt;</span>

  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"OC_OVERZEALOUS_CASTING"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"OCP_OVERLY_CONCRETE_PARAMETER"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"PCAIL_POSSIBLE_CONSTANT_ALLOCATION_IN_LOOP"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"PCOA_PARTIALLY_CONSTRUCTED_OBJECT_ACCESS"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"RCN_REDUNDANT_NULLCHECK_OF_NULL_VALUE"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"PMB_POSSIBLE_MEMORY_BLOAT"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"PRMC_POSSIBLY_REDUNDANT_METHOD_CALLS"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"REC_CATCH_EXCEPTION"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"PZLA_PREFER_ZERO_LENGTH_ARRAYS"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SBSC_USE_STRINGBUFFER_CONCATENATION"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SE_NO_SERIALVERSIONID"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SIC_INNER_SHOULD_BE_STATIC_ANON"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>

  <span class="c">&lt;!-- seems to work incorrectly with 2.0.2 --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SNG_SUSPICIOUS_NULL_FIELD_GUARD"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SPP_TEMPORARY_TRIM"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib : clarity --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SPP_SUSPECT_STRING_TEST"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SPP_USE_ISEMPTY"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib : clarity --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SPP_USE_MATH_CONSTANT"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SS_SHOULD_BE_STATIC"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"SUA_SUSPICIOUS_UNINITIALIZED_ARRAY"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"UNNC_UNNECESSARY_NEW_NULL_CHECK"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"UCPM_USE_CHARACTER_PARAMETERIZED_METHOD"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"UI_INHERITANCE_UNSAFE_GETRESOURCE"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"URF_UNREAD_FIELD"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD"</span> <span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"USBR_UNNECESSARY_STORE_BEFORE_RETURN"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"UUF_UNUSED_PUBLIC_OR_PROTECTED_FIELD"</span><span class="nt">/&gt;&lt;/Match&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"UVA_USE_VAR_ARGS"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"WEM_WEAK_EXCEPTION_MESSAGING"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"WOC_WRITE_ONLY_COLLECTION_FIELD"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
  <span class="nt">&lt;Match&gt;&lt;Bug</span> <span class="na">pattern=</span><span class="s">"WOC_WRITE_ONLY_COLLECTION_LOCAL"</span><span class="nt">/&gt;&lt;/Match&gt;</span> <span class="c">&lt;!-- fb-contrib --&gt;</span>
<span class="nt">&lt;/FindBugsFilter&gt;</span>
</code></pre></div></div>

<h3 id="typical-sample-of-pmd-ruleset-configuration">Typical sample of PMD ruleset configuration</h3>

<ul>
  <li><a href="https://pmd.github.io/pmd-5.4.1/customizing/howtomakearuleset.html">How to make a new rule set</a></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="p">?</span><span class="nx">xml</span> <span class="nx">version</span><span class="o">=</span><span class="s2">"1.0"</span><span class="p">?</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">ruleset</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"Custom ruleset"</span> <span class="nx">xmlns</span><span class="o">=</span><span class="s2">"http://pmd.sourceforge.net/ruleset/2.0.0"</span> <span class="nx">xmlns</span><span class="p">:</span><span class="nx">xsi</span><span class="o">=</span><span class="s2">"http://www.w3.org/2001/XMLSchema-instance"</span>
  <span class="nx">xsi</span><span class="p">:</span><span class="nx">schemaLocation</span><span class="o">=</span><span class="s2">"http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">description</span><span class="o">&gt;</span>
  <span class="nx">Ruleset</span> <span class="k">for</span> <span class="nx">PMD</span>
  <span class="o">&lt;</span><span class="sr">/description</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/basic.xml"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/braces.xml"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/clone.xml"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/codesize.xml"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/comments.xml"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">exclude</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"CommentSize"</span> <span class="o">/&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/controversial.xml"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"rulesets/java/coupling.xml"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
  <span class="o">&lt;</span><span class="nx">rule</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"ControllerClassNamePostfix"</span> <span class="kd">class</span><span class="o">=</span><span class="s2">"net.sourceforge.pmd.lang.rule.XPathRule"</span> <span class="nx">language</span><span class="o">=</span><span class="s2">"java"</span>
    <span class="nx">message</span><span class="o">=</span><span class="s2">"Controller classes under packages ending with '.controller' should have 'Controller' or 'ControllerTest' postfix in their name"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">description</span><span class="o">&gt;</span><span class="nx">Controller</span> <span class="nx">classes</span> <span class="nx">under</span> <span class="nx">packages</span> <span class="nx">ending</span> <span class="kd">with</span> <span class="s1">'.controller'</span> <span class="nx">should</span> <span class="nx">have</span> <span class="s1">'Controller'</span> <span class="nx">postfix</span> <span class="k">in</span> <span class="nx">their</span> <span class="nx">name</span><span class="o">&lt;</span><span class="sr">/description</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">priority</span><span class="o">&gt;</span><span class="mi">1</span><span class="o">&lt;</span><span class="sr">/priority</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">properties</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">property</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"xpath"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;</span>
        <span class="o">&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span><span class="c1">//CompilationUnit[matches(PackageDeclaration/Name/@Image, '.*\.controller')]//ClassOrInterfaceDeclaration[@Public and not(matches(@Image, '.*Controller(Test)?$'))]]]&gt;</span>
        <span class="o">&lt;</span><span class="sr">/value</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/property</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/properties</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">example</span><span class="o">&gt;</span>
    <span class="o">&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
      <span class="nx">lucy</span><span class="p">.</span><span class="nx">activity</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">ActivityTypeController</span>
    <span class="p">]]</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="sr">/example</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="sr">/rule</span><span class="err">&gt;
</span>
<span class="o">&lt;</span><span class="sr">/ruleset</span><span class="err">&gt;
</span></code></pre></div></div>

<h3 id="typical-sample-of-jshint-configuration">Typical sample of JSHint configuration</h3>

<ul>
  <li><a href="http://www.jshint.com/docs/options/">JSHint Options</a></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"eqeqeq"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="c1">//"freeze": true,</span>
  <span class="s2">"noarg"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"smarttabs"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"undef"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"unused"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"-W099"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// allowed mixed tabs and spaces</span>

  <span class="s2">"laxbreak"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="s2">"browser"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"devel"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"jquery"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"predef"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"require"</span><span class="p">,</span> <span class="s2">"Ember"</span><span class="p">,</span> <span class="s2">"Em"</span><span class="p">,</span> <span class="s2">"CodeMirror"</span><span class="p">,</span> <span class="s2">"vkbeautify"</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="json-schema-examples">JSON schema examples</h3>

<p>The following examples are from <a href="http://json-schema.org/">the home of JSON Schema</a>.</p>

<ul>
  <li><strong>A simple example</strong></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"$schema"</span><span class="p">:</span> <span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span>
    <span class="s2">"title"</span><span class="p">:</span> <span class="s2">"Product set"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
    <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"title"</span><span class="p">:</span> <span class="s2">"Product"</span><span class="p">,</span>
        <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"id"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The unique identifier for a product"</span><span class="p">,</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span>
            <span class="p">},</span>
            <span class="s2">"name"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span>
            <span class="p">},</span>
            <span class="s2">"price"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
                <span class="s2">"minimum"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">"exclusiveMinimum"</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">},</span>
            <span class="s2">"tags"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
                <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span>
                <span class="p">},</span>
                <span class="s2">"minItems"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">"uniqueItems"</span><span class="p">:</span> <span class="kc">true</span>
            <span class="p">},</span>
            <span class="s2">"dimensions"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
                <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"length"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">},</span>
                    <span class="s2">"width"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">},</span>
                    <span class="s2">"height"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">}</span>
                <span class="p">},</span>
                <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"length"</span><span class="p">,</span> <span class="s2">"width"</span><span class="p">,</span> <span class="s2">"height"</span><span class="p">]</span>
            <span class="p">},</span>
            <span class="s2">"warehouseLocation"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Coordinates of the warehouse with the product"</span><span class="p">,</span>
                <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"http://json-schema.org/geo"</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">,</span> <span class="s2">"price"</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><strong>An advanced example</strong></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"http://some.site.somewhere/entry-schema#"</span><span class="p">,</span>
    <span class="s2">"$schema"</span><span class="p">:</span> <span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"schema for an fstab entry"</span><span class="p">,</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
    <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"storage"</span> <span class="p">],</span>
    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"storage"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
            <span class="s2">"oneOf"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/diskDevice"</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/diskUUID"</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/nfs"</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/tmpfs"</span> <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"fstype"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"ext3"</span><span class="p">,</span> <span class="s2">"ext4"</span><span class="p">,</span> <span class="s2">"btrfs"</span> <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"options"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
            <span class="s2">"minItems"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
            <span class="s2">"uniqueItems"</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="s2">"readonly"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"definitions"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"diskDevice"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"disk"</span> <span class="p">]</span> <span class="p">},</span>
                <span class="s2">"device"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
                    <span class="s2">"pattern"</span><span class="p">:</span> <span class="s2">"^/dev/[^/]+(/[^/]+)*$"</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"type"</span><span class="p">,</span> <span class="s2">"device"</span> <span class="p">],</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">"diskUUID"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"disk"</span> <span class="p">]</span> <span class="p">},</span>
                <span class="s2">"label"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
                    <span class="s2">"pattern"</span><span class="p">:</span> <span class="s2">"^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$"</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"type"</span><span class="p">,</span> <span class="s2">"label"</span> <span class="p">],</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">"nfs"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"nfs"</span> <span class="p">]</span> <span class="p">},</span>
                <span class="s2">"remotePath"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
                    <span class="s2">"pattern"</span><span class="p">:</span> <span class="s2">"^(/[^/]+)+$"</span>
                <span class="p">},</span>
                <span class="s2">"server"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
                    <span class="s2">"oneOf"</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span> <span class="s2">"format"</span><span class="p">:</span> <span class="s2">"host-name"</span> <span class="p">},</span>
                        <span class="p">{</span> <span class="s2">"format"</span><span class="p">:</span> <span class="s2">"ipv4"</span> <span class="p">},</span>
                        <span class="p">{</span> <span class="s2">"format"</span><span class="p">:</span> <span class="s2">"ipv6"</span> <span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"type"</span><span class="p">,</span> <span class="s2">"server"</span><span class="p">,</span> <span class="s2">"remotePath"</span> <span class="p">],</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">"tmpfs"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"type"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"tmpfs"</span> <span class="p">]</span> <span class="p">},</span>
                <span class="s2">"sizeInMB"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"integer"</span><span class="p">,</span>
                    <span class="s2">"minimum"</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span>
                    <span class="s2">"maximum"</span><span class="p">:</span> <span class="mi">512</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s2">"required"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"type"</span><span class="p">,</span> <span class="s2">"sizeInMB"</span> <span class="p">],</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="json-corevalidation-meta-schema">JSON Core/Validation Meta-Schema</h4>

<ul>
  <li>Used for schemas written for pure validation.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span>
    <span class="s2">"$schema"</span><span class="p">:</span> <span class="s2">"http://json-schema.org/draft-04/schema#"</span><span class="p">,</span>
    <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Core schema meta-schema"</span><span class="p">,</span>
    <span class="s2">"definitions"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"schemaArray"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
            <span class="s2">"minItems"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">"positiveInteger"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"integer"</span><span class="p">,</span>
            <span class="s2">"minimum"</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="s2">"positiveIntegerDefault0"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"allOf"</span><span class="p">:</span> <span class="p">[</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveInteger"</span> <span class="p">},</span> <span class="p">{</span> <span class="s2">"default"</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"simpleTypes"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"enum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"array"</span><span class="p">,</span> <span class="s2">"boolean"</span><span class="p">,</span> <span class="s2">"integer"</span><span class="p">,</span> <span class="s2">"null"</span><span class="p">,</span> <span class="s2">"number"</span><span class="p">,</span> <span class="s2">"object"</span><span class="p">,</span> <span class="s2">"string"</span> <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"stringArray"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
            <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span> <span class="p">},</span>
            <span class="s2">"minItems"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"uniqueItems"</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
    <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
            <span class="s2">"format"</span><span class="p">:</span> <span class="s2">"uri"</span>
        <span class="p">},</span>
        <span class="s2">"$schema"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
            <span class="s2">"format"</span><span class="p">:</span> <span class="s2">"uri"</span>
        <span class="p">},</span>
        <span class="s2">"title"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span>
        <span class="p">},</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span>
        <span class="p">},</span>
        <span class="s2">"default"</span><span class="p">:</span> <span class="p">{},</span>
        <span class="s2">"multipleOf"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span><span class="p">,</span>
            <span class="s2">"minimum"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">"exclusiveMinimum"</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="s2">"maximum"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span>
        <span class="p">},</span>
        <span class="s2">"exclusiveMaximum"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span><span class="p">,</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">"minimum"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"number"</span>
        <span class="p">},</span>
        <span class="s2">"exclusiveMinimum"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span><span class="p">,</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">"maxLength"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveInteger"</span> <span class="p">},</span>
        <span class="s2">"minLength"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveIntegerDefault0"</span> <span class="p">},</span>
        <span class="s2">"pattern"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span>
            <span class="s2">"format"</span><span class="p">:</span> <span class="s2">"regex"</span>
        <span class="p">},</span>
        <span class="s2">"additionalItems"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"anyOf"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"anyOf"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/schemaArray"</span> <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="s2">"maxItems"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveInteger"</span> <span class="p">},</span>
        <span class="s2">"minItems"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveIntegerDefault0"</span> <span class="p">},</span>
        <span class="s2">"uniqueItems"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span><span class="p">,</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">"maxProperties"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveInteger"</span> <span class="p">},</span>
        <span class="s2">"minProperties"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/positiveIntegerDefault0"</span> <span class="p">},</span>
        <span class="s2">"required"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/stringArray"</span> <span class="p">},</span>
        <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"anyOf"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"boolean"</span> <span class="p">},</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="s2">"definitions"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">},</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="s2">"properties"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">},</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="s2">"patternProperties"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">},</span>
            <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">},</span>
        <span class="s2">"dependencies"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"object"</span><span class="p">,</span>
            <span class="s2">"additionalProperties"</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">"anyOf"</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">},</span>
                    <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/stringArray"</span> <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">"enum"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
            <span class="s2">"minItems"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">"uniqueItems"</span><span class="p">:</span> <span class="kc">true</span>
        <span class="p">},</span>
        <span class="s2">"type"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">"anyOf"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/simpleTypes"</span> <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"array"</span><span class="p">,</span>
                    <span class="s2">"items"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/simpleTypes"</span> <span class="p">},</span>
                    <span class="s2">"minItems"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">"uniqueItems"</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="s2">"allOf"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/schemaArray"</span> <span class="p">},</span>
        <span class="s2">"anyOf"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/schemaArray"</span> <span class="p">},</span>
        <span class="s2">"oneOf"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#/definitions/schemaArray"</span> <span class="p">},</span>
        <span class="s2">"not"</span><span class="p">:</span> <span class="p">{</span> <span class="s2">"$ref"</span><span class="p">:</span> <span class="s2">"#"</span> <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">"dependencies"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"exclusiveMaximum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"maximum"</span> <span class="p">],</span>
        <span class="s2">"exclusiveMinimum"</span><span class="p">:</span> <span class="p">[</span> <span class="s2">"minimum"</span> <span class="p">]</span>
    <span class="p">},</span>
    <span class="s2">"default"</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="configuration-exclusion-list-samples-by-product">Configuration exclusion list samples by product</h3>

<h4 id="git">Git</h4>

<p>A typical <code class="highlighter-rouge">.gitignore</code> file contains</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/
target/
build/
output/
Debug/
Release/
x86/
x64/
obj/
node_modules/
log/
logs/
test-output/
reports/
.apt_generated/
/<span class="k">**</span>/<span class="k">*</span>.log
/<span class="k">**</span>/.cache<span class="k">*</span>
/<span class="k">**</span>/.~<span class="k">*</span>
</code></pre></div></div>

<p>For more, refer</p>

<ul>
  <li><a href="https://git-scm.com/docs/gitignore"><code class="highlighter-rouge">gitignore</code> documentation</a></li>
  <li><a href="https://github.com/github/gitignore">A collection of useful <code class="highlighter-rouge">.gitignore</code> templates</a></li>
</ul>

<h4 id="subversion">Subversion</h4>

<p>A typical <a href="svn:ignore"><code class="highlighter-rouge">svn:ignore</code></a> property contains</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin
target
build
output
Debug
Release
x86
x64
obj
node_modules
log
logs
test-output
reports
<span class="k">*</span>.log
</code></pre></div></div>

<h4 id="team-foundation-server">Team Foundation Server</h4>

<p>A typical <code class="highlighter-rouge">.tfignore</code> file contains</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/bin
/target
/build
/output
/Debug
/Release
/x86
/x64
/obj
/node_modules
/log
/logs
/test-output
/reports
/<span class="k">*</span>.log
</code></pre></div></div>

<h3 id="git-per-repository-settingsgitattributes-file-sample">Git per-repository settings(<code class="highlighter-rouge">.gitattributes</code> file) sample</h3>

<p>The following <code class="highlighter-rouge">.gitattributes</code> prohibits the automatic conversion of line ending by Git. This is especially important with Eclipses project when project specific line ending and text encoding are defined.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 2016/01/07 - added C++ sources (*.cpp and *.hpp)</span>

<span class="c"># Set the default behavior, in case people don't have core.autocrlf set.</span>
<span class="k">*</span> <span class="nt">-text</span>

<span class="c"># Explicitly declare text files you want to always be normalized and converted</span>
<span class="c"># to native line endings on checkout.</span>
<span class="k">*</span>.c <span class="nt">-text</span>
<span class="k">*</span>.cpp <span class="nt">-text</span>
<span class="k">*</span>.h <span class="nt">-text</span>
<span class="k">*</span>.hpp <span class="nt">-text</span>
<span class="k">*</span>.java <span class="nt">-text</span>
<span class="k">*</span>.properties <span class="nt">-text</span>
<span class="k">*</span>.jsp <span class="nt">-text</span>
<span class="k">*</span>.jspf <span class="nt">-text</span>
<span class="k">*</span>.tag <span class="nt">-text</span>
<span class="k">*</span>.MF <span class="nt">-text</span>
<span class="k">*</span>.aj <span class="nt">-text</span>
<span class="k">*</span>.ftl <span class="nt">-text</span>
<span class="k">*</span>.html <span class="nt">-text</span>
<span class="k">*</span>.htm <span class="nt">-text</span>
<span class="k">*</span>.xhtml <span class="nt">-text</span>
<span class="k">*</span>.css <span class="nt">-text</span>
<span class="k">*</span>.js <span class="nt">-text</span>
<span class="k">*</span>.json <span class="nt">-text</span>
<span class="k">*</span>.xml <span class="nt">-text</span>
<span class="k">*</span>.dtd <span class="nt">-text</span>
<span class="k">*</span>.xsd <span class="nt">-text</span>
<span class="k">*</span>.sch <span class="nt">-text</span>
<span class="k">*</span>.xsl <span class="nt">-text</span>
<span class="k">*</span>.xslt <span class="nt">-text</span>
<span class="k">*</span>.wsdl <span class="nt">-text</span>
<span class="k">*</span>.wsdd <span class="nt">-text</span>
<span class="k">*</span>.svg <span class="nt">-text</span>
<span class="k">*</span>.mediawiki <span class="nt">-text</span>
<span class="k">*</span>.textile <span class="nt">-text</span>
<span class="k">*</span>.sql <span class="nt">-text</span>
<span class="k">*</span>.ddl <span class="nt">-text</span>
<span class="k">*</span>.q <span class="nt">-text</span>
<span class="k">*</span>.g <span class="nt">-text</span>
<span class="k">*</span>.tokens <span class="nt">-text</span>
<span class="k">*</span>.script <span class="nt">-text</span>
<span class="k">*</span>.cfg <span class="nt">-text</span>
.classpath <span class="nt">-text</span>
.project <span class="nt">-text</span>
.jsdtscope <span class="nt">-text</span>
<span class="k">*</span>.prefs <span class="nt">-text</span>
<span class="k">*</span>.component <span class="nt">-text</span>
<span class="k">*</span>.launch <span class="nt">-text</span>
.springBeans <span class="nt">-text</span>
.euml2 <span class="nt">-text</span>
.umlproject <span class="nt">-text</span>
.clay <span class="nt">-text</span>
.fbprefs <span class="nt">-text</span>
.pmd <span class="nt">-text</span>
.lint4jprefs <span class="nt">-text</span>
.jshintrc <span class="nt">-text</span>

<span class="c"># Declare files that will always have CRLF line endings on checkout.</span>
<span class="k">*</span>.sln text <span class="nv">eol</span><span class="o">=</span>crlf

<span class="c"># Denote all files that are truly binary and should not be modified.</span>
<span class="k">*</span>.a binary
<span class="k">*</span>.o binary
<span class="k">*</span>.so binary
<span class="k">*</span>.lib binary
<span class="k">*</span>.com binary
<span class="k">*</span>.exe binary
<span class="k">*</span>.dll binary
<span class="k">*</span>.zip binary
<span class="k">*</span>.7z binary
<span class="k">*</span>.png binary
<span class="k">*</span>.jpeg binary
<span class="k">*</span>.jpg binary
<span class="k">*</span>.gif binary
<span class="k">*</span>.bmp binary
<span class="k">*</span>.tif binary
<span class="k">*</span>.tiff binary
<span class="k">*</span>.mp3 binary
<span class="k">*</span>.mp4 binary
<span class="k">*</span>.avi binary
<span class="k">*</span>.flv binary
<span class="k">*</span>.ico binary
<span class="k">*</span>.class binary
<span class="k">*</span>.jar binary
<span class="k">*</span>.doc binary
<span class="k">*</span>.docx binary
<span class="k">*</span>.xls binary
<span class="k">*</span>.xlsx binary
<span class="k">*</span>.ppt binary
<span class="k">*</span>.pptx binary
<span class="k">*</span>.pdf binary
</code></pre></div></div>

<ul>
  <li>Reference
    <ul>
      <li><a href="https://help.github.com/articles/dealing-with-line-endings/">GitHub Help &gt; Dealing with line endings</a></li>
    </ul>
  </li>
</ul>

<h3 id="typical-sample-of-wix-toolset-source">Typical sample of Wix Toolset source</h3>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version='1.0' encoding='windows-1252'?&gt;</span>
<span class="nt">&lt;Wix</span> <span class="na">xmlns=</span><span class="s">'http://schemas.microsoft.com/wix/2006/wi'</span><span class="nt">&gt;</span>
   <span class="c">&lt;!--
   WiX source for NEXCORE VAS library installer

   author : Sangmoon Oh
   since : 2015/05/27

   This file contains lots of placeholders following Ant syntax (@TOKEN@) and is
   expected to be filtered by Ant or Maven before processed by WiX compiler

   Required token
     * VAS_VERSION
     * PROJECT_DIR
     * MAIN_JAR_PATH : Full path (including file name and extension) for the main Jar file
     * TEST_JAR_PATH : Full path (including file name and extension) for the test Jar file
     * RUNTIME_CLASSPATH : Classpath from the Jars in runtime scope
     * TEST_CLASSPATH : Classpath from the Jars in test scope
     * DEPENDENT_JARS_ZIP_PATH : Full path for the Zip file containing the Jar files on which this project depends
     * ADAPTER_VA_SKT_PROJECT_DIR
     * ADAPTER_VA_SKT_BUILD_CONFIG : C project build configuration name such as 'Debug', 'Release' or something like that
     * ADAPTER_VA_SKT_ARTIFACT_NAME : File name of DLL without path and extension.
     * ADAPTER_VMS_TRIUMI_PROJECT_DIR
     * ADAPTER_VMS_TRIUMI_BUILD_CONFIG
     * ADAPTER_VMS_TRIUMI_ARTIFACT_NAME
     * OPENCV_BASE
   --&gt;</span>

   <span class="c">&lt;!--
   @TODO Try to directly inject Ant properties and Maven properties exposed to Ant to simplify this docuement.
   @TODO(Done) Add opencv_java249.dll
   @TODO(Done) Add log4cxx.properties and logback.xml
   @TODO Installer create or update environment variables 'NEXCORE_VAS_HOME', 'NEXCORE_VAS_DATA_DIR' and ''NEXCORE_VAS_LOG_DIR'
   @TODO Add sample VF1 file in SECU_ADAPTER_VMS_TRIUMI project, for test.
   @TODO Unzip the zip file containing dependent Jars.
   @TODO Add steps to check if the required vc++ runtime is installed or not using ProductSearch or something like that.
   @TODO Add steps to install vc++ runtime if necessary during installation
   @TODO Separate the OpenCV into another package.
   @TODO Add maven-ant-tasks-2.1.3.jar into test\lib\
   @TODO Add test\resources\com\skcc\nexcore\vas\test-ant.xml
   --&gt;</span>

   <span class="c">&lt;!-- Don't change the Id and Name of Product as possible --&gt;</span>
   <span class="nt">&lt;Product</span> <span class="na">Id=</span><span class="s">"4F8D46B3-287B-4894-8387-2AC52A68BAFD"</span>
      <span class="na">UpgradeCode=</span><span class="s">"7AF39E75-2F15-4066-AD7D-D406980683F3"</span>
      <span class="na">Name=</span><span class="s">"NEXCORE Video Analysis Service Library"</span> <span class="na">Version=</span><span class="s">"@VAS_VERSION@"</span> <span class="na">Language=</span><span class="s">"1033"</span>
      <span class="na">Codepage=</span><span class="s">"1252"</span> <span class="na">Manufacturer=</span><span class="s">"SK C&amp;amp;C"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;Package</span> <span class="na">InstallerVersion=</span><span class="s">"100"</span> <span class="na">Languages=</span><span class="s">"1033"</span> <span class="na">SummaryCodepage=</span><span class="s">"1252"</span>
         <span class="na">InstallScope=</span><span class="s">"perMachine"</span>
         <span class="na">Compressed=</span><span class="s">"yes"</span> <span class="na">Keywords=</span><span class="s">"NEXCORE VAS,NEXCORE"</span>
         <span class="na">Comments=</span><span class="s">"NEXCORE VAS Library for Windows"</span>
         <span class="na">Description=</span><span class="s">"DLLs and their related artifacts for NEXCORE Video Analysis Service"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;Media</span> <span class="na">Id=</span><span class="s">"1"</span> <span class="na">Cabinet=</span><span class="s">"nexcore_vas.cab"</span> <span class="na">EmbedCab=</span><span class="s">"yes"</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- Properties and variables --&gt;</span>
      <span class="nt">&lt;Property</span> <span class="na">Id=</span><span class="s">"ApplicationFolderName"</span> <span class="na">Value=</span><span class="s">"NEXCORE VAS"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;Property</span> <span class="na">Id=</span><span class="s">"WixAppFolder"</span> <span class="na">Value=</span><span class="s">"WixPerMachineFolder"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;WixVariable</span> <span class="na">Id=</span><span class="s">"WixUISupportPerUser"</span> <span class="na">Value=</span><span class="s">"0"</span> <span class="nt">/&gt;</span>

      <span class="c">&lt;!-- Directory layout --&gt;</span>
      <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TARGETDIR"</span> <span class="na">Name=</span><span class="s">"SourceDir"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"ProgramFilesFolder"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"APPLICATIONFOLDER"</span><span class="nt">&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"INCLUDE_DIR"</span> <span class="na">Name=</span><span class="s">"include"</span><span class="nt">&gt;</span>
                  <span class="c">&lt;!-- @TODO Can be replaced by Component[Id="DIRECTORIES"] element below --&gt;</span>
                  <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"INCLUDE_DIR_CREATE"</span> <span class="na">Guid=</span><span class="s">""</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"BIN_X86_VC9_DIR"</span> <span class="na">Name=</span><span class="s">"vc9"</span> <span class="nt">/&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"BIN_X86_VC10_DIR"</span> <span class="na">Name=</span><span class="s">"vc10"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LIB_DIR"</span> <span class="na">Name=</span><span class="s">"lib"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LIB_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LIB_X86_VC9_DIR"</span> <span class="na">Name=</span><span class="s">"vc9"</span> <span class="nt">/&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LIB_X86_VC10_DIR"</span> <span class="na">Name=</span><span class="s">"vc10"</span> <span class="nt">/&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"CONF_DIR"</span> <span class="na">Name=</span><span class="s">"conf"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DATA_DIR"</span> <span class="na">Name=</span><span class="s">"data"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DATA_VIDEO_DIR"</span> <span class="na">Name=</span><span class="s">"video"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DATA_VIDEO_TRIUMI_DIR"</span> <span class="na">Name=</span><span class="s">"triumi"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DATA_VIDEO_TRIUMI_SAMPLES_DIR"</span> <span class="na">Name=</span><span class="s">"samples"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DATA_VIDEO_TRIUMI_SAMPLES_SET1_DIR"</span> <span class="na">Name=</span><span class="s">"set1"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DOC_DIR"</span> <span class="na">Name=</span><span class="s">"doc"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DOC_API_DIR"</span> <span class="na">Name=</span><span class="s">"api"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"DOC_API_JAVADOC_DIR"</span> <span class="na">Name=</span><span class="s">"javadoc"</span><span class="nt">/&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG_DIR"</span> <span class="na">Name=</span><span class="s">"log"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TMP_DIR"</span> <span class="na">Name=</span><span class="s">"tmp"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TEST_DIR"</span> <span class="na">Name=</span><span class="s">"test"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TEST_LIB_DIR"</span> <span class="na">Name=</span><span class="s">"lib"</span><span class="nt">/&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TEST_CLASSES_DIR"</span> <span class="na">Name=</span><span class="s">"classes"</span><span class="nt">/&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TEST_OUTPUT_DIR"</span> <span class="na">Name=</span><span class="s">"output"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"THIRD_PARTY_BASE"</span> <span class="na">Name=</span><span class="s">"3rdparty"</span><span class="nt">&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_BASE"</span> <span class="na">Name=</span><span class="s">"sktvc"</span><span class="nt">&gt;</span>
                     <span class="c">&lt;!-- Location for libraries from SKT's Video Cloud --&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_BIN_X86_VC10_DIR"</span> <span class="na">Name=</span><span class="s">"vc10"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_LIB_DIR"</span> <span class="na">Name=</span><span class="s">"lib"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_LIB_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SKT_VC_LIB_X86_VC10_DIR"</span> <span class="na">Name=</span><span class="s">"vc10"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TRIUMI_BASE"</span> <span class="na">Name=</span><span class="s">"triumi"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TRIUMI_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TRIUMI_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TRIUMI_BIN_X86_KO_DIR"</span> <span class="na">Name=</span><span class="s">"ko-KR"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TRIUMI_LIB_DIR"</span> <span class="na">Name=</span><span class="s">"lib"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"TRIUMI_LIB_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_BASE"</span> <span class="na">Name=</span><span class="s">"log4cxx-0.10"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_BIN_X86_VC9_DIR"</span> <span class="na">Name=</span><span class="s">"vc9"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_LIB_DIR"</span> <span class="na">Name=</span><span class="s">"lib"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_LIB_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"LOG4CXX_LIB_X86_VC9_DIR"</span> <span class="na">Name=</span><span class="s">"vc9"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_BASE"</span> <span class="na">Name=</span><span class="s">"opencv-2.4.9"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_BIN_X86_VC10_DIR"</span> <span class="na">Name=</span><span class="s">"vc10"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_LIB_DIR"</span> <span class="na">Name=</span><span class="s">"lib"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_LIB_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                           <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_LIB_X86_VC10_DIR"</span> <span class="na">Name=</span><span class="s">"vc10"</span> <span class="nt">/&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"EMGU_CV_BASE"</span> <span class="na">Name=</span><span class="s">"emgucv-2.4.2"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"EMGU_CV_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"EMGU_CV_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_SHARP_BASE"</span> <span class="na">Name=</span><span class="s">"opencvsharp"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_SHARP_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"OPENCV_SHARP_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"FFMPEG_BASE"</span> <span class="na">Name=</span><span class="s">"ffmpeg"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"FFMPEG_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"FFMPEG_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"INTEL_JPEG_BASE"</span> <span class="na">Name=</span><span class="s">"ijl"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"INTEL_JPEG_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"INTEL_JPEG_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"GENUINE_CHANNELS_BASE"</span> <span class="na">Name=</span><span class="s">"genuine-channels-2.5"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"GENUINE_CHANNELS_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"GENUINE_CHANNELS_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SMART_THREAD_POOL_BASE"</span> <span class="na">Name=</span><span class="s">"smart-thread-pool"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SMART_THREAD_POOL_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SMART_THREAD_POOL_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SHARP_ZIP_BASE"</span> <span class="na">Name=</span><span class="s">"sharp-zip-lib-0.84"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SHARP_ZIP_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"SHARP_ZIP_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"JSON_NET_BASE"</span> <span class="na">Name=</span><span class="s">"json-net-6.0"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"JSON_NET_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"JSON_NET_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"VNC_SHARP_BASE"</span> <span class="na">Name=</span><span class="s">"vncsharp-1.0"</span><span class="nt">&gt;</span>
                     <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"VNC_SHARP_BIN_DIR"</span> <span class="na">Name=</span><span class="s">"bin"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;Directory</span> <span class="na">Id=</span><span class="s">"VNC_SHARP_BIN_X86_DIR"</span> <span class="na">Name=</span><span class="s">"x86"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;/Directory&gt;</span>
                     <span class="nt">&lt;/Directory&gt;</span>
                  <span class="nt">&lt;/Directory&gt;</span>
               <span class="nt">&lt;/Directory&gt;</span>
            <span class="nt">&lt;/Directory&gt;</span>
         <span class="nt">&lt;/Directory&gt;</span>
      <span class="nt">&lt;/Directory&gt;</span>
      <span class="c">&lt;!-- End of directory layout --&gt;</span>

      <span class="c">&lt;!-- Components --&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"DIRECTORIES"</span> <span class="na">Guid=</span><span class="s">"F0C0B2B1-739F-4767-BBD8-FA3137AB2E66"</span>
         <span class="na">Directory=</span><span class="s">"APPLICATIONFOLDER"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"BIN_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"LIB_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"LIB_X86_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"INCLUDE_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"CONF_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DATA_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DATA_VIDEO_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DATA_VIDEO_TRIUMI_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DATA_VIDEO_TRIUMI_SAMPLES_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DATA_VIDEO_TRIUMI_SAMPLES_SET1_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DOC_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DOC_API_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"DOC_API_JAVADOC_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"LOG_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"TMP_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"TEST_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"TEST_CLASSES_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"TEST_LIB_DIR"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;CreateFolder</span> <span class="na">Directory=</span><span class="s">"TEST_OUTPUT_DIR"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"CONF_COMPONENT"</span> <span class="na">Guid=</span><span class="s">"0838B27B-A727-42E1-891F-574FCBEE5ED8"</span>
         <span class="na">Directory=</span><span class="s">"CONF_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@PROJECT_DIR@\target\classes\log4cxx.properties"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@PROJECT_DIR@\target\classes\logback.xml"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"RUNTIME_JARS"</span> <span class="na">Guid=</span><span class="s">"1A09247D-6B6F-4166-9B46-297520B0E735"</span>
         <span class="na">Directory=</span><span class="s">"LIB_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@MAIN_JAR_PATH@"</span><span class="nt">/&gt;</span>
         <span class="cp">&lt;?foreach DEPENDENCY in @RUNTIME_CLASSPATH@?&gt;</span>
            <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"$(var.DEPENDENCY)"</span><span class="nt">/&gt;</span>
         <span class="cp">&lt;?endforeach?&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"TEST_JARS"</span> <span class="na">Guid=</span><span class="s">"BD48DB37-90DE-4BC1-8C4B-53C3B5154A75"</span>
         <span class="na">Directory=</span><span class="s">"TEST_LIB_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@TEST_JAR_PATH@"</span><span class="nt">/&gt;</span>
         <span class="cp">&lt;?foreach DEPENDENCY in @TEST_CLASSPATH@?&gt;</span>
            <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"$(var.DEPENDENCY)"</span><span class="nt">/&gt;</span>
         <span class="cp">&lt;?endforeach?&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"DEPENDENT_JARS_ZIP"</span> <span class="na">Guid=</span><span class="s">"085DF0A0-11B3-49B2-9541-11D50F94F4C2"</span>
         <span class="na">Directory=</span><span class="s">"TMP_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@DEPENDENT_JARS_ZIP_PATH@"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>

      <span class="c">&lt;!-- Native components --&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"ADAPTER_VA_SKT_DLL"</span> <span class="na">Guid=</span><span class="s">"C351BEBD-300D-498F-9082-055C521F4D62"</span>
         <span class="na">Directory=</span><span class="s">"BIN_X86_VC9_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\@ADAPTER_VA_SKT_BUILD_CONFIG@\@ADAPTER_VA_SKT_ARTIFACT_NAME@.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\@ADAPTER_VA_SKT_BUILD_CONFIG@\@ADAPTER_VA_SKT_ARTIFACT_NAME@.pdb"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"ADAPTER_VA_SKT_LIB"</span> <span class="na">Guid=</span><span class="s">"08A3808D-C471-43EB-A0DA-13B412ADA841"</span>
         <span class="na">Directory=</span><span class="s">"LIB_X86_VC9_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\@ADAPTER_VA_SKT_BUILD_CONFIG@\@ADAPTER_VA_SKT_ARTIFACT_NAME@.lib"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"ADAPTER_VMS_TRIUMI_DLL"</span> <span class="na">Guid=</span><span class="s">"F281C90F-A9F9-4F7F-B02F-9D2203FA166E"</span>
         <span class="na">Directory=</span><span class="s">"BIN_X86_VC9_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\@ADAPTER_VMS_TRIUMI_BUILD_CONFIG@\@ADAPTER_VMS_TRIUMI_ARTIFACT_NAME@.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\@ADAPTER_VMS_TRIUMI_BUILD_CONFIG@\@ADAPTER_VMS_TRIUMI_ARTIFACT_NAME@.pdb"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"ADAPTER_VMS_TRIUMI_LIB"</span> <span class="na">Guid=</span><span class="s">"35D0B232-85DD-4DF6-99B3-CE1C22EBB36C"</span>
         <span class="na">Directory=</span><span class="s">"LIB_X86_VC9_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\@ADAPTER_VMS_TRIUMI_BUILD_CONFIG@\@ADAPTER_VMS_TRIUMI_ARTIFACT_NAME@.lib"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="c">&lt;!-- End of native components --&gt;</span>

      <span class="c">&lt;!-- 3rd-party components --&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"SKT_VA_DLL"</span> <span class="na">Guid=</span><span class="s">"715FC1A4-F271-43A1-B777-9F9E6C558E80"</span>
         <span class="na">Directory=</span><span class="s">"SKT_VC_BIN_X86_VC10_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\bin\VideoAnalyticsDLL.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\bin\AppVC.dll"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"SKT_VA_LIB"</span> <span class="na">Guid=</span><span class="s">"477F4180-9755-44D1-80F2-D852637FB833"</span>
         <span class="na">Directory=</span><span class="s">"SKT_VC_LIB_X86_VC10_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\lib\AppVC.lib"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"TRIUMI_DLL"</span> <span class="na">Guid=</span><span class="s">"001B65A4-7750-4DF2-BCC4-D31F2F1B46C2"</span>
         <span class="na">Directory=</span><span class="s">"TRIUMI_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\AxInterop.MSTSCLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Client.Shared.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Client.Shared.pdb"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\FFH264DecoderLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\FFMPEGDecoderLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\H264DecoderLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\InDrawLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Interop.ComUtilitiesLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Interop.MSTSCLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Interop.SHDocVw.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span>
            <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Interop.SundanceCoreLibrary.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\NxCVLib.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.Common.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.Common.pdb"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span>
            <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.Interop.BackupSDK.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span>
            <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.Interop.BackupSDK.pdb"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.Interop.SDK.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.Interop.SDK.pdb"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.SharedResources.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Sundance.SharedResources.pdb"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\SundanceFSUtils.dll"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="c">&lt;!-- @TODO Find out the way to merge TRIUMI_KO_DLL into TRIUMI_DLL --&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"TRIUMI_KO_DLL"</span> <span class="na">Guid=</span><span class="s">"A5364642-BAD6-45A1-9C0C-D1AA7355A0CE"</span>
         <span class="na">Directory=</span><span class="s">"TRIUMI_BIN_X86_KO_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span>
            <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\ko-KR\Client.Shared.resources.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span>
            <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\ko-KR\Sundance.Common.resources.dll"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="c">&lt;!-- @TODO(Done) Is Sundance.Interop.BackupSDK.lib necessary? : Deleted --&gt;</span>

      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"LOG4CXX_DLL"</span> <span class="na">Guid=</span><span class="s">"21F55756-3245-4516-A781-D30AD8814731"</span>
         <span class="na">Directory=</span><span class="s">"LOG4CXX_BIN_X86_VC9_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\bin\log4cxx-0.10.0.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\bin\log4cxx-0.10.0d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\bin\log4cxx-0.10.0d.pdb"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"LOG4CXX_LIB"</span> <span class="na">Guid=</span><span class="s">"B3690EDF-E155-4700-BEBC-C3F7B873ADFD"</span>
         <span class="na">Directory=</span><span class="s">"LOG4CXX_LIB_X86_VC9_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\lib\log4cxx-0.10.0.lib"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VA_SKT_PROJECT_DIR@\src\nar\resources\lib\log4cxx-0.10.0d.lib"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"OPENCV_249_DLL"</span> <span class="na">Guid=</span><span class="s">"E38DB7CB-6456-48D1-BADC-B42944916E1D"</span>
         <span class="na">Directory=</span><span class="s">"OPENCV_BIN_X86_VC10_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_calib3d249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_calib3d249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_contrib249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_contrib249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_core249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_core249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_features2d249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_features2d249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_ffmpeg249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_flann249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_flann249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_gpu249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_gpu249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_highgui249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_highgui249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_imgproc249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_imgproc249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_legacy249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_legacy249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_ml249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_ml249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_nonfree249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_nonfree249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_objdetect249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_objdetect249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_ocl249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_ocl249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_photo249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_photo249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_stitching249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_stitching249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_superres249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_superres249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_video249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_video249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_videostab249.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\bin\opencv_videostab249d.dll"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\java\x86\opencv_java249.dll"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"OPENCV_249_LIB"</span> <span class="na">Guid=</span><span class="s">"2D2DB742-72D8-4981-9257-D17F069633E9"</span>
         <span class="na">Directory=</span><span class="s">"OPENCV_LIB_X86_VC10_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_calib3d249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_calib3d249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_contrib249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_contrib249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_core249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_core249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_features2d249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_features2d249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_flann249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_flann249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_gpu249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_gpu249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_highgui249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_highgui249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_imgproc249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_imgproc249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_legacy249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_legacy249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_ml249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_ml249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_nonfree249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_nonfree249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_objdetect249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_objdetect249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_ocl249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_ocl249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_photo249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_photo249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_stitching249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_stitching249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_superres249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_superres249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_ts249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_ts249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_video249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_video249d.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_videostab249.lib"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@OPENCV_BASE@\build\x86\vc10\lib\opencv_videostab249d.lib"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"EMGU_CV_242_DLL"</span> <span class="na">Guid=</span><span class="s">"0B514298-4516-49A4-A1F7-E1F85C2BB443"</span>
         <span class="na">Directory=</span><span class="s">"EMGU_CV_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Emgu.CV.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Emgu.CV.GPU.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Emgu.CV.UI.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Emgu.Util.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"OPENCV_SHARP_DLL"</span> <span class="na">Guid=</span><span class="s">"611F55EA-EA25-4D98-9312-46ECF8BF4E3F"</span>
         <span class="na">Directory=</span><span class="s">"OPENCV_SHARP_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\OpenCvSharp.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\OpenCvSharp.Blob.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"FFMPEG_DLL"</span> <span class="na">Guid=</span><span class="s">"AD1E6532-9ADB-422E-81FD-99569B78F143"</span>
         <span class="na">Directory=</span><span class="s">"FFMPEG_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\avcodec-54-DVR.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\avformat-54-DVR.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\avutil-51.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\avutil-51-DVR.dll"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\swscale-2-DVR.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"INTEL_JPEG_DLL"</span> <span class="na">Guid=</span><span class="s">"0E97BF57-8017-4720-A31F-368AAE56C204"</span>
         <span class="na">Directory=</span><span class="s">"INTEL_JPEG_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\ijl20.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"GENUINE_CHANNELS_DLL"</span> <span class="na">Guid=</span><span class="s">"530EED6D-7266-444B-B496-822059C0BAE2"</span>
         <span class="na">Directory=</span><span class="s">"GENUINE_CHANNELS_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\GenuineChannels.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"SMART_THREAD_POOL_DLL"</span> <span class="na">Guid=</span><span class="s">"FE15D05E-82C6-4476-B4BE-5E9E92E233E2"</span>
         <span class="na">Directory=</span><span class="s">"SMART_THREAD_POOL_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\SmartThreadPool.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"SHARP_ZIP_DLL"</span> <span class="na">Guid=</span><span class="s">"19F40E7E-9152-4AC4-9326-22EA997930CD"</span>
         <span class="na">Directory=</span><span class="s">"SHARP_ZIP_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\ICSharpCode.SharpZipLib.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"JSON_NET_DLL"</span> <span class="na">Guid=</span><span class="s">"3994E1CC-3E24-4B8D-BDF4-F7E14CA1C9BD"</span>
         <span class="na">Directory=</span><span class="s">"JSON_NET_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\Newtonsoft.Json.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="nt">&lt;Component</span> <span class="na">Id=</span><span class="s">"VNC_SHARP_DLL"</span> <span class="na">Guid=</span><span class="s">"B64358AB-B030-463B-B9C5-C39411F6C2CD"</span>
         <span class="na">Directory=</span><span class="s">"VNC_SHARP_BIN_X86_DIR"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;File</span> <span class="na">Source=</span><span class="s">"@ADAPTER_VMS_TRIUMI_PROJECT_DIR@\src\nar\resources\bin\VncSharp.dll"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Component&gt;</span>
      <span class="c">&lt;!-- End of 3rd-party components --&gt;</span>
      <span class="c">&lt;!-- End of components --&gt;</span>

      <span class="c">&lt;!-- Features --&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"CORE_FEATURE"</span> <span class="na">Title=</span><span class="s">"Core components"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"DIRECTORIES"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"CONF_COMPONENT"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"RUNTIME_JARS"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"TEST_JARS"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"DEPENDENT_JARS_ZIP"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>

      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"SKT_VA_ADAPTER_FEATURE"</span> <span class="na">Title=</span><span class="s">"JNI Adapter for SKT VA Engine"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"ADAPTER_VA_SKT_DLL"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"ADAPTER_VA_SKT_LIB"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"TRIUMI_VMS_ADAPTER_FEATURE"</span> <span class="na">Title=</span><span class="s">"JNI Adapter for Trium i VMS"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"ADAPTER_VMS_TRIUMI_DLL"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"ADAPTER_VMS_TRIUMI_LIB"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"SKT_VA_FEATURE"</span> <span class="na">Title=</span><span class="s">"SKT VA Engine Core"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"SKT_VA_DLL"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"SKT_VA_LIB"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"TRIUMI_FEATURE"</span> <span class="na">Title=</span><span class="s">"Trium i Interface Library"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"TRIUMI_DLL"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"TRIUMI_KO_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"LOG4CXX_FEATURE"</span> <span class="na">Title=</span><span class="s">"Log4cxx 0.10 Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"LOG4CXX_DLL"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"LOG4CXX_LIB"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"OPENCV_249_FEATURE"</span> <span class="na">Title=</span><span class="s">"OpenCV 2.4.9 Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"OPENCV_249_DLL"</span> <span class="nt">/&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"OPENCV_249_LIB"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"EMGU_CV_242_FEATURE"</span> <span class="na">Title=</span><span class="s">"Emgu CV 2.4.2 Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"EMGU_CV_242_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"OPENCV_SHARP_FEATURE"</span> <span class="na">Title=</span><span class="s">"OpenCvSharp Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"OPENCV_SHARP_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"FFMPEG_FEATURE"</span> <span class="na">Title=</span><span class="s">"FFmpeg Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"FFMPEG_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"INTEL_JPEG_FEATURE"</span> <span class="na">Title=</span><span class="s">"Intel JPEG Library Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"INTEL_JPEG_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"GENUINE_CHANNELS_FEATURE"</span> <span class="na">Title=</span><span class="s">"Genuine Channels Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"GENUINE_CHANNELS_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"SMART_THREAD_POOL_FEATURE"</span> <span class="na">Title=</span><span class="s">"Smart Thread Pool Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"SMART_THREAD_POOL_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"SHARP_ZIP_FEATURE"</span> <span class="na">Title=</span><span class="s">"SharpZipLib Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"SHARP_ZIP_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"JSON_NET_FEATURE"</span> <span class="na">Title=</span><span class="s">"Json.NET Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"JSON_NET_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>
      <span class="nt">&lt;Feature</span> <span class="na">Id=</span><span class="s">"VNC_SHARP_FEATURE"</span> <span class="na">Title=</span><span class="s">"VNC# 1.0 Binaries"</span> <span class="na">Level=</span><span class="s">"1"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;ComponentRef</span> <span class="na">Id=</span><span class="s">"VNC_SHARP_DLL"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/Feature&gt;</span>

      <span class="c">&lt;!-- UI --&gt;</span>
      <span class="nt">&lt;UI&gt;</span>
         <span class="nt">&lt;UIRef</span> <span class="na">Id=</span><span class="s">"WixUI_Advanced"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/UI&gt;</span>
   <span class="nt">&lt;/Product&gt;</span>
<span class="nt">&lt;/Wix&gt;</span>
</code></pre></div></div>

<p>Ant task to build the above source</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">"package.dlls.using.wix"</span> <span class="na">depends=</span><span class="s">"check.env"</span>
   <span class="na">description=</span><span class="s">"Create windows installer in .msi file for NEXCORE VAS Windows libraries(dlls, libs and so on)"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;zip</span> <span class="na">destfile=</span><span class="s">"${project.pom.build.directory}/dependent-jars.zip"</span>
        <span class="na">basedir=</span><span class="s">"${project.pom.build.directory}/dependency"</span>
        <span class="na">update=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>

   <span class="nt">&lt;copy</span> <span class="na">file=</span><span class="s">"${basedir}/src/main/config/wix/default.wxs"</span> <span class="na">tofile=</span><span class="s">"${project.pom.build.directory}/wix/default.wxs"</span> <span class="na">overwrite=</span><span class="s">"true"</span> <span class="na">force=</span><span class="s">"true"</span> <span class="na">filtering=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;filterset&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"VAS_VERSION"</span> <span class="na">value=</span><span class="s">"${version.wo.snapshot}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"PROJECT_DIR"</span> <span class="na">value=</span><span class="s">"${basedir}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"MAIN_JAR_PATH"</span> <span class="na">value=</span><span class="s">"${project.pom.build.directory}/${project.pom.build.finalName}.jar"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"TEST_JAR_PATH"</span> <span class="na">value=</span><span class="s">"${project.pom.build.directory}/${project.pom.build.finalName}-tests.jar"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"RUNTIME_CLASSPATH"</span> <span class="na">value=</span><span class="s">"${toString:project.classpath}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"TEST_CLASSPATH"</span> <span class="na">value=</span><span class="s">"${toString:project.testonly.classpath}"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"DEPENDENT_JARS_ZIP_PATH"</span> <span class="na">value=</span><span class="s">"${project.pom.build.directory}/dependent-jars.zip"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"ADAPTER_VA_SKT_PROJECT_DIR"</span> <span class="na">value=</span><span class="s">"${basedir}\..\SECU_ADAPTER_VA_SKT"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"ADAPTER_VA_SKT_BUILD_CONFIG"</span> <span class="na">value=</span><span class="s">"Release"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"ADAPTER_VA_SKT_ARTIFACT_NAME"</span> <span class="na">value=</span><span class="s">"va_skt_adapter_jni"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"ADAPTER_VMS_TRIUMI_PROJECT_DIR"</span> <span class="na">value=</span><span class="s">"${basedir}\..\SECU_ADAPTER_VMS_TRIUMI"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"ADAPTER_VMS_TRIUMI_BUILD_CONFIG"</span> <span class="na">value=</span><span class="s">"Release"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"ADAPTER_VMS_TRIUMI_ARTIFACT_NAME"</span> <span class="na">value=</span><span class="s">"vms_triumi_adapter_jni"</span><span class="nt">/&gt;</span>
         <span class="nt">&lt;filter</span> <span class="na">token=</span><span class="s">"OPENCV_BASE"</span> <span class="na">value=</span><span class="s">"${env.OPENCV_DIR}\..\..\.."</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;/filterset&gt;</span>
   <span class="nt">&lt;/copy&gt;</span>
   <span class="nt">&lt;schemavalidate</span> <span class="na">file=</span><span class="s">"${project.pom.build.directory}/wix/default.wxs"</span>
      <span class="na">disableDTD=</span><span class="s">"true"</span>
      <span class="na">failonerror=</span><span class="s">"false"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;schema</span> <span class="na">namespace=</span><span class="s">"http://schemas.microsoft.com/wix/2006/wi"</span>
         <span class="na">file=</span><span class="s">"${project.pom.basedir}/src/main/resources/org/wixtoolset/schemas/wix.xsd"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/schemavalidate&gt;</span>
   <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">"cmd"</span> <span class="na">dir=</span><span class="s">"${basedir}"</span> <span class="na">osfamily=</span><span class="s">"windows"</span> <span class="na">failonerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'/C'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'${env.WIX_HOME}\\candle.exe'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'-out'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'${project.pom.build.directory}\\wix\\default.wixobj'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'-v'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'${project.pom.build.directory}\\wix\\default.wxs'</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/exec&gt;</span>
   <span class="nt">&lt;exec</span> <span class="na">executable=</span><span class="s">"cmd"</span> <span class="na">dir=</span><span class="s">"${basedir}"</span> <span class="na">osfamily=</span><span class="s">"windows"</span> <span class="na">failonerror=</span><span class="s">"true"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'/C'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'"${env.WIX_HOME}\\light.exe"'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'-out'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'${project.pom.build.directory}\\nexcore-vas-dlls.msi'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'-ext'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'WixUIExtension'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'-ext'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'WixUtilExtension'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'-v'</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;arg</span> <span class="na">value=</span><span class="s">'${project.pom.build.directory}\\wix\\default.wixobj'</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/exec&gt;</span>
<span class="nt">&lt;/target&gt;</span>
</code></pre></div></div>

        </main>
      </div>
    </div>

    
<!-- Refer http://getbootstrap.com/docs/4.0/getting-started/introduction/#starter-template -->
<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>

  </body>
</html>